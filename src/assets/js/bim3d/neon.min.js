var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)if(t.hasOwnProperty(r))e[r]=t[r]};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var __awaiter=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n["throw"](e))}catch(e){a(e)}}function l(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,s)}l((n=n.apply(e,t||[])).next())})};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,o&&(a=o[i[0]&2?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;if(o=0,a)i=[0,a.value];switch(i[0]){case 0:case 1:a=i;break;case 4:r.label++;return{value:i[1],done:false};case 5:r.label++;o=i[1];i=[0];continue;case 7:i=r.ops.pop();r.trys.pop();continue;default:if(!(a=r.trys,a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1];a=i;break}if(a&&r.label<a[2]){r.label=a[2];r.ops.push(i);break}if(a[2])r.ops.pop();r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e];o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:true}}};var __decorate=this&&this.__decorate||function(e,t,r,n){var o=arguments.length,a=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(i=e[s])a=(o<3?i(a):o>3?i(t,r,a):i(t,r))||a;return o>3&&a&&Object.defineProperty(t,r,a),a};var __metadata=this&&this.__metadata||function(e,t){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(e,t)};var Neon;(function(e){var t={glyphs:{0:{ha:814,x_min:62,x_max:755,o:"m 62 505 q 154 925 62 783 q 421 1068 246 1068 q 755 530 755 1068 q 661 123 755 264 q 397 -18 567 -18 q 150 116 237 -18 q 62 505 62 250 m 197 511 q 410 92 197 92 q 618 517 618 92 q 414 958 618 958 q 197 511 197 958 z "},1:{ha:814,x_min:122,x_max:730,o:"m 730 0 l 128 0 l 128 115 l 363 115 l 363 912 l 122 842 l 122 964 l 496 1073 l 496 115 l 730 115 l 730 0 z "},2:{ha:814,x_min:72,x_max:720,o:"m 711 0 l 72 0 l 72 115 l 377 420 q 546 620 503 546 q 589 772 589 693 q 538 909 589 861 q 393 957 488 957 q 125 838 253 957 l 125 972 q 414 1068 250 1068 q 638 991 556 1068 q 720 785 720 915 q 668 594 720 688 q 469 355 615 500 l 229 121 l 229 118 l 711 118 l 711 0 z "},3:{ha:814,x_min:97,x_max:711,o:"m 97 176 q 340 92 205 92 q 512 145 449 92 q 576 288 576 199 q 290 488 576 488 l 203 488 l 203 597 l 286 597 q 539 785 539 597 q 346 958 539 958 q 138 883 235 958 l 138 1008 q 378 1068 241 1068 q 594 998 513 1068 q 675 816 675 928 q 465 551 675 610 l 465 548 q 645 468 579 536 q 711 298 711 399 q 609 69 711 156 q 338 -18 507 -18 q 97 38 189 -18 l 97 176 z "},4:{ha:814,x_min:12,x_max:765,o:"m 765 273 l 631 273 l 631 0 l 502 0 l 502 273 l 12 273 l 12 359 l 477 1050 l 631 1050 l 631 378 l 765 378 l 765 273 m 502 378 l 502 818 q 505 926 502 865 l 502 926 q 462 845 492 900 l 149 378 l 502 378 z "},5:{ha:814,x_min:120,x_max:717,o:"m 120 161 q 340 92 226 92 q 515 153 449 92 q 582 314 582 214 q 514 471 582 415 q 319 526 447 526 q 153 517 257 526 l 153 1050 l 669 1050 l 669 933 l 276 933 l 276 636 q 365 640 335 640 q 624 555 531 640 q 717 323 717 471 q 617 77 717 171 q 342 -18 517 -18 q 120 26 195 -18 l 120 161 z "},6:{ha:814,x_min:80,x_max:756,o:"m 690 916 q 519 958 608 958 q 300 839 382 958 q 216 515 217 720 l 219 515 q 457 659 294 659 q 675 570 593 659 q 756 334 756 481 q 662 81 756 180 q 422 -18 568 -18 q 171 107 262 -18 q 80 463 80 233 q 200 904 80 741 q 515 1068 319 1068 q 690 1038 627 1068 l 690 916 m 224 344 q 279 166 224 240 q 426 92 334 92 q 567 156 513 92 q 621 320 621 220 q 570 489 621 429 q 425 549 519 549 q 279 488 335 549 q 224 344 224 427 z "},7:{ha:814,x_min:64,x_max:747,o:"m 747 1004 l 336 0 l 198 0 l 589 933 l 64 933 l 64 1050 l 747 1050 l 747 1004 z "},8:{ha:814,x_min:72,x_max:745,o:"m 297 553 q 109 806 109 640 q 197 995 109 922 q 422 1068 286 1068 q 629 1000 548 1068 q 711 823 711 931 q 515 553 711 648 l 515 551 q 745 269 745 468 q 650 60 745 138 q 386 -18 555 -18 q 159 59 247 -18 q 72 258 72 136 q 297 550 72 458 l 297 553 m 576 807 q 532 918 576 878 q 413 959 488 959 q 293 917 342 959 q 243 808 243 874 q 408 608 243 677 q 576 807 576 678 m 400 490 q 205 264 205 411 q 262 140 205 189 q 411 91 319 91 q 555 139 500 91 q 611 260 611 188 q 400 490 611 413 z "},9:{ha:814,x_min:68,x_max:742,o:"m 125 142 q 313 92 212 92 q 531 203 454 92 q 609 519 609 315 q 606 519 608 518 q 374 388 537 388 q 155 479 241 388 q 68 715 68 570 q 163 969 68 869 q 409 1068 258 1068 q 654 945 566 1068 q 742 587 742 822 q 628 139 742 296 q 313 -18 514 -18 q 125 18 202 -18 l 125 142 m 202 732 q 256 564 202 626 q 406 502 311 502 q 545 558 489 502 q 602 696 602 615 q 546 883 602 809 q 398 958 490 958 q 258 893 313 958 q 202 732 202 829 z "}," ":{ha:411,x_min:0,x_max:0,o:""},'"':{ha:605,x_min:144,x_max:462,o:"m 279 1052 l 256 725 l 165 725 l 144 1052 l 279 1052 m 462 1052 l 440 725 l 349 725 l 326 1052 l 462 1052 z "},"#":{ha:886,x_min:24,x_max:852,o:"m 852 760 l 836 675 l 650 675 l 606 460 l 802 460 l 785 376 l 587 376 l 526 90 l 428 90 l 489 376 l 309 376 l 248 90 l 149 90 l 210 376 l 24 376 l 41 460 l 229 460 l 273 675 l 75 675 l 92 760 l 290 760 l 350 1050 l 448 1050 l 388 760 l 568 760 l 629 1050 l 727 1050 l 667 760 l 852 760 m 551 675 l 371 675 l 327 460 l 507 460 l 551 675 z "},$:{ha:814,x_min:115,x_max:724,o:"m 456 -153 l 376 -153 l 376 0 q 120 64 222 0 l 120 200 q 376 111 222 117 l 376 473 q 164 616 213 550 q 115 774 115 683 q 188 958 115 880 q 376 1052 261 1036 l 376 1184 l 456 1184 l 456 1055 q 658 1013 604 1049 l 658 880 q 456 944 580 939 l 456 570 q 667 430 609 500 q 724 274 724 361 q 652 95 724 165 q 456 6 579 24 l 456 -153 m 376 940 q 246 789 246 911 q 274 691 246 730 q 376 611 302 652 l 376 940 m 456 116 q 593 263 593 146 q 456 435 593 361 l 456 116 z "},"%":{ha:1236,x_min:59,x_max:1179,o:"m 59 785 q 128 990 59 914 q 313 1066 197 1066 q 488 996 425 1066 q 551 802 551 926 q 481 600 551 677 q 298 523 412 523 q 124 595 189 523 q 59 785 59 667 m 163 792 q 201 657 163 705 q 305 610 239 610 q 410 659 373 610 q 447 798 447 708 q 411 933 447 885 q 309 981 374 981 q 202 931 241 981 q 163 792 163 881 m 1008 1050 l 334 -7 l 220 -7 l 895 1050 l 1008 1050 m 688 246 q 757 452 688 375 q 942 529 826 529 q 1116 459 1053 529 q 1179 261 1179 389 q 1109 61 1179 138 q 927 -16 1040 -16 q 753 57 818 -16 q 688 246 688 130 m 792 252 q 830 119 792 167 q 934 71 868 71 q 1039 121 1002 71 q 1076 259 1076 170 q 1039 394 1076 347 q 937 441 1002 441 q 830 391 868 441 q 792 252 792 341 z "},"&":{ha:1208,x_min:84,x_max:1179,o:"m 822 142 q 444 -17 667 -17 q 181 64 279 -17 q 84 288 84 145 q 328 607 84 502 q 206 827 206 700 q 283 1003 206 937 q 484 1068 359 1068 q 674 1006 602 1068 q 747 844 747 944 q 548 600 747 682 q 835 335 699 542 q 954 720 954 498 q 940 821 954 773 l 1066 821 q 1076 724 1076 781 q 1030 475 1076 605 q 901 235 983 345 q 995 130 957 158 q 1083 102 1034 102 q 1179 123 1124 102 l 1179 5 q 1061 -17 1122 -17 q 946 13 998 -17 q 822 142 895 43 m 448 656 q 623 833 623 716 q 583 929 623 894 q 484 965 543 965 q 372 927 414 965 q 331 827 331 888 q 448 656 331 720 m 760 237 q 604 436 675 369 q 424 544 533 503 q 266 440 313 499 q 218 292 218 380 q 281 148 218 201 q 446 96 345 96 q 760 237 631 96 z "},"(":{ha:464,x_min:104,x_max:450,o:"m 332 -239 q 104 401 104 22 q 332 1050 104 780 l 450 1050 q 220 402 220 769 q 448 -239 220 36 l 332 -239 z "},")":{ha:464,x_min:16,x_max:363,o:"m 17 -239 q 245 402 245 35 q 16 1050 245 770 l 134 1050 q 363 401 363 782 q 134 -239 363 20 l 17 -239 z "},"*":{ha:632,x_min:55,x_max:578,o:"m 578 804 l 377 765 l 517 589 l 431 530 l 318 724 l 204 530 l 117 589 l 257 765 l 55 804 l 90 902 l 281 829 l 263 1050 l 372 1050 l 353 829 l 545 902 l 578 804 z "},"+":{ha:1030,x_min:171,x_max:862,o:"m 862 385 l 567 385 l 567 91 l 465 91 l 465 385 l 171 385 l 171 488 l 465 488 l 465 782 l 567 782 l 567 488 l 862 488 l 862 385 z "},"-":{ha:601,x_min:106,x_max:505,o:"m 505 365 l 106 365 l 106 467 l 505 467 l 505 365 z "},".":{ha:334,x_min:81,x_max:256,o:"m 81 70 q 106 132 81 106 q 168 157 131 157 q 231 131 206 157 q 256 70 256 106 q 231 9 256 35 q 168 -16 206 -16 q 105 9 130 -16 q 81 70 81 35 z "},"/":{ha:593,x_min:-22,x_max:606,o:"m 606 1050 l 102 -174 l -22 -174 l 481 1050 l 606 1050 z "},":":{ha:334,x_min:81,x_max:256,o:"m 81 680 q 106 741 81 717 q 168 766 132 766 q 231 741 205 766 q 256 680 256 716 q 231 619 256 644 q 168 594 206 594 q 106 619 131 594 q 81 680 81 644 m 81 70 q 106 132 81 106 q 168 157 131 157 q 231 131 206 157 q 256 70 256 106 q 231 9 256 35 q 168 -16 206 -16 q 105 9 130 -16 q 81 70 81 35 z "},"<":{ha:1030,x_min:198,x_max:834,o:"m 834 87 l 198 404 l 198 455 l 834 806 l 834 688 l 361 434 l 361 431 l 834 204 l 834 87 z "},"=":{ha:1030,x_min:171,x_max:862,o:"m 862 542 l 171 542 l 171 644 l 862 644 l 862 542 m 862 229 l 171 229 l 171 331 l 862 331 l 862 229 z "},">":{ha:1030,x_min:198,x_max:834,o:"m 834 405 l 198 89 l 198 205 l 671 430 l 671 435 l 198 689 l 198 806 l 834 456 l 834 405 z "},"?":{ha:671,x_min:90,x_max:602,o:"m 239 293 q 222 400 222 343 q 243 491 222 445 q 347 617 263 536 q 451 739 432 698 q 471 816 471 779 q 425 919 471 881 q 307 956 378 956 q 90 859 183 956 l 90 998 q 326 1068 203 1068 q 526 1005 450 1068 q 602 833 602 942 q 579 727 602 781 q 463 583 557 673 q 367 478 391 516 q 342 396 342 440 q 366 293 342 347 l 239 293 m 222 71 q 248 132 222 106 q 310 157 274 157 q 372 132 346 157 q 397 71 397 106 q 372 12 397 37 q 313 -14 347 -14 q 248 12 273 -14 q 222 71 222 38 z "},"@":{ha:1432,x_min:123,x_max:1312,o:"m 976 779 q 942 368 942 383 q 1025 222 942 222 q 1153 307 1103 222 q 1204 527 1204 391 q 1078 850 1204 725 q 731 976 953 976 q 373 825 515 976 q 231 446 231 673 q 364 88 231 224 q 726 -47 497 -47 q 1034 13 904 -47 l 1034 -83 q 717 -138 907 -138 q 287 23 450 -138 q 123 442 123 183 q 295 887 123 710 q 735 1065 467 1065 q 1149 917 986 1065 q 1312 533 1312 770 q 1225 245 1312 357 q 1011 134 1137 134 q 849 304 850 134 l 846 304 q 638 134 791 134 q 476 207 538 134 q 414 406 414 280 q 500 681 414 572 q 720 790 585 790 q 814 763 773 790 q 866 696 855 736 l 869 696 q 876 779 869 699 l 976 779 m 525 406 q 560 274 525 323 q 659 224 595 224 q 799 313 748 224 q 850 547 850 401 q 722 701 850 701 q 579 615 634 701 q 525 406 525 530 z "},A:{ha:977,x_min:16,x_max:961,o:"m 961 0 l 811 0 l 704 288 l 267 288 l 165 0 l 16 0 l 416 1050 l 561 1050 l 961 0 m 662 406 l 503 843 q 487 916 496 864 l 484 916 q 467 843 476 869 l 309 406 l 662 406 z "},B:{ha:871,x_min:136,x_max:799,o:"m 136 0 l 136 1050 l 444 1050 q 665 984 583 1050 q 748 809 748 918 q 699 656 748 722 q 564 562 650 589 l 564 559 q 735 478 671 547 q 799 303 799 409 q 702 84 799 168 q 452 0 604 0 l 136 0 m 271 932 l 271 603 l 395 603 q 549 651 493 603 q 605 783 605 699 q 407 932 605 932 l 271 932 m 271 485 l 271 119 l 434 119 q 598 168 541 119 q 656 304 656 217 q 412 485 656 485 l 271 485 z "},C:{ha:929,x_min:68,x_max:854,o:"m 854 43 q 564 -18 739 -18 q 203 126 338 -18 q 68 505 68 269 q 220 913 68 759 q 606 1068 372 1068 q 854 1025 756 1068 l 854 884 q 607 946 742 946 q 321 829 431 946 q 210 513 210 712 q 313 214 210 325 q 583 103 416 103 q 854 174 739 103 l 854 43 z "},D:{ha:1058,x_min:136,x_max:991,o:"m 136 0 l 136 1050 l 435 1050 q 832 911 674 1050 q 991 538 991 772 q 832 147 991 294 q 425 0 674 0 l 136 0 m 271 930 l 271 120 l 424 120 q 736 229 624 120 q 848 535 848 338 q 733 831 848 732 q 430 930 618 930 l 271 930 z "},E:{ha:764,x_min:136,x_max:701,o:"m 701 0 l 136 0 l 136 1050 l 677 1050 l 677 930 l 271 930 l 271 593 l 647 593 l 647 473 l 271 473 l 271 120 l 701 120 l 701 0 z "},F:{ha:738,x_min:136,x_max:677,o:"m 677 930 l 271 930 l 271 578 l 647 578 l 647 459 l 271 459 l 271 0 l 136 0 l 136 1050 l 677 1050 l 677 930 z "},G:{ha:1033,x_min:68,x_max:930,o:"m 930 72 q 574 -18 772 -18 q 207 126 347 -18 q 68 511 68 271 q 222 911 68 755 q 616 1068 376 1068 q 905 1014 787 1068 l 905 867 q 604 947 779 947 q 321 829 433 947 q 210 520 210 712 q 313 213 210 323 q 589 103 415 103 q 793 149 709 103 l 793 433 l 566 433 l 566 553 l 930 553 l 930 72 z "},H:{ha:1074,x_min:136,x_max:939,o:"m 939 0 l 803 0 l 803 473 l 271 473 l 271 0 l 136 0 l 136 1050 l 271 1050 l 271 594 l 803 594 l 803 1050 l 939 1050 l 939 0 z "},I:{ha:408,x_min:35,x_max:372,o:"m 372 936 l 271 936 l 271 115 l 372 115 l 372 0 l 35 0 l 35 115 l 136 115 l 136 936 l 35 936 l 35 1050 l 372 1050 l 372 936 z "},J:{ha:550,x_min:16,x_max:423,o:"m 423 381 q 342 86 423 191 q 123 -18 262 -18 q 16 1 58 -18 l 16 134 q 122 103 58 103 q 288 381 288 103 l 288 1050 l 423 1050 l 423 381 z "},K:{ha:882,x_min:136,x_max:883,o:"m 883 0 l 697 0 l 302 477 q 275 517 282 503 l 271 517 l 271 0 l 136 0 l 136 1050 l 271 1050 l 271 556 l 275 556 q 302 595 286 574 l 684 1050 l 851 1050 l 410 547 l 883 0 z "},L:{ha:713,x_min:136,x_max:690,o:"m 690 0 l 136 0 l 136 1050 l 271 1050 l 271 120 l 690 120 l 690 0 z "},M:{ha:1357,x_min:136,x_max:1221,o:"m 1086 0 l 1086 696 q 1096 903 1086 782 l 1093 903 q 1061 797 1075 827 l 715 0 l 640 0 l 294 791 q 262 903 281 818 l 258 903 q 265 690 265 829 l 265 0 l 136 0 l 136 1050 l 319 1050 l 629 330 q 676 201 665 248 l 681 201 q 730 333 716 298 l 1046 1050 l 1221 1050 l 1221 0 l 1086 0 z "},N:{ha:1129,x_min:136,x_max:994,o:"m 994 0 l 833 0 l 304 817 q 269 886 282 852 l 264 886 q 270 739 270 850 l 270 0 l 136 0 l 136 1050 l 306 1050 l 820 248 q 863 175 857 191 l 866 175 q 859 328 859 220 l 859 1050 l 994 1050 l 994 0 z "},O:{ha:1132,x_min:68,x_max:1065,o:"m 68 513 q 205 918 68 767 q 578 1068 343 1068 q 931 921 798 1068 q 1065 538 1065 774 q 928 132 1065 282 q 562 -18 791 -18 q 203 130 338 -18 q 68 513 68 277 m 210 524 q 308 218 210 333 q 562 103 405 103 q 826 213 730 103 q 922 522 922 323 q 828 836 922 725 q 570 946 734 946 q 310 829 410 946 q 210 524 210 713 z "},P:{ha:850,x_min:136,x_max:792,o:"m 271 393 l 271 0 l 136 0 l 136 1050 l 434 1050 q 698 968 604 1050 q 792 734 792 886 q 682 483 792 579 q 408 393 572 387 l 271 393 m 271 931 l 271 512 l 397 512 q 585 568 521 512 q 650 728 650 624 q 410 931 650 931 l 271 931 z "},Q:{ha:1132,x_min:68,x_max:1095,o:"m 1095 -273 q 977 -288 1046 -288 q 792 -241 879 -288 q 551 -18 705 -193 q 204 132 340 -19 q 68 513 68 283 q 205 918 68 768 q 582 1068 343 1068 q 931 921 797 1068 q 1065 538 1065 774 q 970 186 1065 328 q 703 2 876 43 q 852 -128 790 -93 q 989 -163 913 -163 q 1095 -144 1052 -163 l 1095 -273 m 210 524 q 308 218 210 333 q 562 103 405 103 q 826 213 730 103 q 922 522 922 323 q 828 836 922 725 q 570 946 734 946 q 310 829 410 946 q 210 524 210 713 z "},R:{ha:907,x_min:136,x_max:903,o:"m 903 0 l 743 0 l 568 292 q 473 411 516 379 q 369 442 429 442 l 271 442 l 271 0 l 136 0 l 136 1050 l 456 1050 q 696 977 609 1050 q 783 770 783 903 q 549 486 783 551 l 549 483 q 624 431 593 465 q 706 315 656 397 l 903 0 m 271 932 l 271 561 l 431 561 q 582 615 524 561 q 640 758 640 669 q 587 886 640 840 q 433 932 534 932 l 271 932 z "},S:{ha:802,x_min:87,x_max:732,o:"m 87 197 q 216 128 135 155 q 369 101 296 101 q 590 258 590 101 q 566 338 590 302 q 501 400 543 373 q 346 484 460 427 q 138 630 188 562 q 87 784 87 697 q 193 991 87 915 q 458 1068 298 1068 q 688 1030 614 1068 l 688 882 q 448 948 593 948 q 291 908 351 948 q 230 795 230 867 q 272 692 230 732 q 454 583 314 652 q 671 435 609 509 q 732 269 732 361 q 632 56 732 130 q 353 -18 532 -18 q 208 0 291 -18 q 87 43 125 17 l 87 197 z "},T:{ha:796,x_min:29,x_max:770,o:"m 770 930 l 467 930 l 467 0 l 331 0 l 331 930 l 29 930 l 29 1050 l 770 1050 l 770 930 z "},U:{ha:1037,x_min:123,x_max:914,o:"m 914 428 q 510 -18 914 -18 q 123 412 123 -18 l 123 1050 l 258 1050 l 258 418 q 523 103 258 103 q 779 408 779 103 l 779 1050 l 914 1050 l 914 428 z "},V:{ha:939,x_min:12,x_max:927,o:"m 927 1050 l 541 0 l 391 0 l 12 1050 l 163 1050 l 446 229 q 467 135 460 189 l 470 135 q 494 231 475 182 l 782 1050 l 927 1050 z "},W:{ha:1413,x_min:18,x_max:1396,o:"m 1396 1050 l 1101 0 l 943 0 l 732 757 q 715 865 718 808 l 712 865 q 693 758 708 809 l 479 0 l 323 0 l 18 1050 l 168 1050 l 382 257 q 399 149 397 203 l 404 149 q 426 257 407 190 l 653 1050 l 787 1050 l 1004 251 q 1021 151 1015 212 l 1024 151 q 1044 254 1027 195 l 1250 1050 l 1396 1050 z "},X:{ha:896,x_min:18,x_max:876,o:"m 876 0 l 711 0 l 476 395 q 452 450 468 409 l 449 450 q 425 395 448 444 l 183 0 l 18 0 l 367 528 l 45 1050 l 212 1050 l 419 687 q 456 612 437 655 l 458 612 q 498 690 475 649 l 715 1050 l 871 1050 l 543 530 l 876 0 z "},Y:{ha:838,x_min:12,x_max:831,o:"m 831 1050 l 485 387 l 485 0 l 349 0 l 349 383 l 12 1050 l 167 1050 l 394 585 q 419 518 395 585 l 421 518 q 449 585 429 547 l 686 1050 l 831 1050 z "},Z:{ha:861,x_min:25,x_max:829,o:"m 829 1010 l 224 120 l 816 120 l 816 0 l 25 0 l 25 46 l 627 930 l 73 930 l 73 1050 l 829 1050 l 829 1010 z "},"[":{ha:464,x_min:148,x_max:425,o:"m 425 -239 l 148 -239 l 148 1050 l 425 1050 l 425 956 l 264 956 l 264 -145 l 425 -145 l 425 -239 z "},"\\":{ha:578,x_min:-17,x_max:598,o:"m 598 -176 l 477 -176 l -17 1050 l 107 1050 l 598 -176 z "},"]":{ha:464,x_min:40,x_max:318,o:"m 318 -239 l 40 -239 l 40 -145 l 201 -145 l 201 956 l 40 956 l 40 1050 l 318 1050 l 318 -239 z "},"^":{ha:1030,x_min:166,x_max:866,o:"m 866 456 l 749 456 l 509 906 l 505 906 l 281 456 l 166 456 l 476 1068 l 532 1068 l 866 456 z "},_:{ha:623,x_min:0,x_max:623,o:"m 623 -218 l 0 -218 l 0 -130 l 623 -130 l 623 -218 z "},"`":{ha:410,x_min:58,x_max:355,o:"m 355 889 l 254 889 l 58 1129 l 191 1129 l 355 889 z "},a:{ha:768,x_min:63,x_max:666,o:"m 136 698 q 395 768 248 768 q 666 483 666 768 l 666 0 l 534 0 l 534 116 l 531 116 q 301 -18 453 -18 q 127 41 192 -18 q 63 201 63 100 q 312 446 63 411 l 534 477 q 382 661 534 661 q 136 570 248 661 l 136 698 m 359 353 q 232 307 267 340 q 197 212 197 273 q 235 124 197 158 q 335 90 273 90 q 478 151 422 90 q 534 304 534 212 l 534 376 l 359 353 z "},b:{ha:887,x_min:119,x_max:819,o:"m 252 106 l 252 0 l 119 0 l 119 1110 l 252 1110 l 252 621 l 254 621 q 512 768 342 768 q 736 668 653 768 q 819 397 819 569 q 726 95 819 207 q 477 -18 633 -18 q 254 106 331 -18 l 252 106 m 251 309 q 310 155 251 218 q 458 92 369 92 q 623 174 564 92 q 683 399 683 255 q 627 588 683 517 q 475 658 572 658 q 314 588 378 658 q 251 410 251 518 l 251 309 z "},c:{ha:696,x_min:68,x_max:637,o:"m 637 34 q 429 -18 551 -18 q 168 87 267 -18 q 68 357 68 191 q 175 655 68 542 q 461 768 282 768 q 637 731 564 768 l 637 600 q 461 658 558 658 q 276 579 347 658 q 204 368 204 500 q 272 165 204 239 q 454 92 339 92 q 637 156 551 92 l 637 34 z "},d:{ha:888,x_min:68,x_max:770,o:"m 770 0 l 637 0 l 637 125 l 634 125 q 379 -18 552 -18 q 153 84 237 -18 q 68 357 68 185 q 163 655 68 543 q 412 768 258 768 q 634 648 565 768 l 637 648 l 637 1110 l 770 1110 l 770 0 m 637 446 q 578 597 637 536 q 432 658 519 658 q 265 579 326 658 q 204 363 204 500 q 263 165 204 238 q 419 92 321 92 q 576 164 515 92 q 637 342 637 235 l 637 446 z "},e:{ha:788,x_min:68,x_max:730,o:"m 730 341 l 205 341 q 271 156 208 221 q 445 90 333 90 q 676 171 571 90 l 676 52 q 414 -18 577 -18 q 160 85 251 -18 q 68 372 68 189 q 169 656 68 544 q 417 768 269 768 q 647 673 564 768 q 730 408 730 578 l 730 341 m 597 448 q 549 605 596 549 q 415 661 501 661 q 278 602 336 661 q 205 448 220 543 l 597 448 z "},f:{ha:481,x_min:38,x_max:503,o:"m 503 997 q 422 1017 466 1017 q 298 862 298 1017 l 298 750 l 473 750 l 473 640 l 298 640 l 298 0 l 166 0 l 166 640 l 38 640 l 38 750 l 166 750 l 166 868 q 236 1058 166 989 q 412 1126 305 1126 q 503 1114 469 1126 l 503 997 z "},g:{ha:888,x_min:68,x_max:770,o:"m 770 63 q 366 -353 770 -353 q 123 -301 226 -353 l 123 -173 q 363 -243 248 -243 q 637 45 637 -243 l 637 124 l 634 124 q 379 -18 549 -18 q 153 83 238 -18 q 68 351 68 184 q 162 655 68 543 q 412 768 256 768 q 634 648 562 768 l 637 648 l 637 750 l 770 750 l 770 63 m 637 446 q 578 595 637 533 q 433 658 519 658 q 264 578 325 658 q 204 359 204 498 q 262 166 204 240 q 417 92 321 92 q 576 163 514 92 q 637 342 637 233 l 637 446 z "},h:{ha:855,x_min:119,x_max:752,o:"m 752 0 l 620 0 l 620 431 q 452 658 620 658 q 309 592 366 658 q 252 425 252 526 l 252 0 l 119 0 l 119 1110 l 252 1110 l 252 627 l 254 627 q 499 768 340 768 q 752 462 752 768 l 752 0 z "},i:{ha:370,x_min:102,x_max:271,o:"m 102 1015 q 126 1074 102 1050 q 186 1098 151 1098 q 247 1074 222 1098 q 271 1015 271 1050 q 247 956 271 979 q 186 932 222 932 q 126 956 150 932 q 102 1015 102 979 m 118 0 l 118 750 l 251 750 l 251 0 l 118 0 z "},j:{ha:371,x_min:-140,x_max:272,o:"m 103 1015 q 127 1074 103 1050 q 186 1098 151 1098 q 248 1074 223 1098 q 272 1015 272 1050 q 247 956 272 980 q 186 932 222 932 q 127 957 151 932 q 103 1015 103 981 m 252 29 q 176 -253 252 -153 q -39 -353 100 -353 q -140 -330 -90 -353 l -140 -210 q -39 -242 -87 -242 q 119 9 119 -242 l 119 750 l 252 750 l 252 29 z "},k:{ha:756,x_min:119,x_max:756,o:"m 756 0 l 575 0 l 254 361 l 252 361 l 252 0 l 119 0 l 119 1110 l 252 1110 l 252 406 l 254 406 l 559 750 l 730 750 l 391 389 l 756 0 z "},l:{ha:370,x_min:118,x_max:251,o:"m 118 0 l 118 1110 l 251 1110 l 251 0 l 118 0 z "},m:{ha:1301,x_min:119,x_max:1198,o:"m 1198 0 l 1065 0 l 1065 431 q 1027 605 1065 553 q 903 658 989 658 q 777 589 829 658 q 725 427 725 521 l 725 0 l 592 0 l 592 444 q 427 658 592 658 q 301 593 351 658 q 252 427 252 528 l 252 0 l 119 0 l 119 750 l 252 750 l 252 631 l 254 631 q 488 768 334 768 q 621 726 564 768 q 701 614 679 685 q 951 768 785 768 q 1198 463 1198 768 l 1198 0 z "},n:{ha:856,x_min:119,x_max:753,o:"m 753 0 l 621 0 l 621 427 q 452 658 621 658 q 308 593 364 658 q 252 428 252 528 l 252 0 l 119 0 l 119 750 l 252 750 l 252 626 l 254 626 q 500 768 339 768 q 688 689 624 768 q 753 458 753 610 l 753 0 z "},o:{ha:883,x_min:68,x_max:814,o:"m 68 367 q 172 660 68 553 q 454 768 276 768 q 719 664 623 768 q 814 378 814 561 q 712 92 814 201 q 437 -18 610 -18 q 169 88 269 -18 q 68 367 68 194 m 204 371 q 270 167 204 241 q 446 92 335 92 q 619 165 559 92 q 679 374 679 238 q 619 585 679 511 q 446 658 559 658 q 269 581 334 658 q 204 371 204 505 z "},p:{ha:887,x_min:119,x_max:819,o:"m 252 106 l 252 -345 l 119 -345 l 119 750 l 252 750 l 252 621 l 254 621 q 512 768 342 768 q 738 667 656 768 q 819 397 819 566 q 727 96 819 210 q 477 -18 634 -18 q 254 106 333 -18 l 252 106 m 251 309 q 310 155 251 218 q 458 92 369 92 q 623 174 564 92 q 683 399 683 255 q 627 589 683 520 q 475 658 572 658 q 314 588 377 658 q 251 409 251 518 l 251 309 z "},q:{ha:888,x_min:68,x_max:770,o:"m 770 -345 l 637 -345 l 637 126 l 634 126 q 380 -18 555 -18 q 154 82 239 -18 q 68 357 68 182 q 162 656 68 544 q 413 768 256 768 q 634 648 565 768 l 637 648 l 637 750 l 770 750 l 770 -345 m 637 444 q 580 595 637 532 q 431 658 523 658 q 264 579 325 658 q 204 361 204 500 q 262 163 204 235 q 414 92 320 92 q 577 163 517 92 q 637 340 637 234 l 637 444 z "},r:{ha:530,x_min:119,x_max:521,o:"m 521 618 q 429 642 488 642 q 302 570 352 642 q 252 380 252 498 l 252 0 l 119 0 l 119 750 l 252 750 l 252 597 l 254 597 q 451 763 311 763 q 521 753 496 763 l 521 618 z "},s:{ha:643,x_min:77,x_max:583,o:"m 77 162 q 293 90 177 90 q 448 191 448 90 q 414 263 448 235 q 277 330 380 291 q 115 429 152 380 q 77 548 77 478 q 162 708 77 648 q 370 768 246 768 q 547 734 465 768 l 547 606 q 357 661 463 661 q 253 633 293 661 q 213 559 213 605 q 242 490 213 515 q 370 425 271 465 q 539 328 495 378 q 583 204 583 278 q 499 42 583 101 q 280 -18 414 -18 q 77 26 163 -18 l 77 162 z "},t:{ha:517,x_min:31,x_max:479,o:"m 479 7 q 361 -16 435 -16 q 160 207 160 -16 l 160 640 l 31 640 l 31 750 l 160 750 l 160 930 l 292 972 l 292 750 l 479 750 l 479 640 l 292 640 l 292 231 q 317 125 292 157 q 401 93 342 93 q 479 118 446 93 l 479 7 z "},u:{ha:856,x_min:104,x_max:738,o:"m 738 0 l 604 0 l 604 118 l 602 118 q 370 -18 526 -18 q 104 301 104 -18 l 104 750 l 235 750 l 235 321 q 410 92 235 92 q 551 156 497 92 q 604 318 604 220 l 604 750 l 738 750 l 738 0 z "},v:{ha:729,x_min:9,x_max:723,o:"m 723 750 l 426 0 l 292 0 l 9 750 l 155 750 l 338 214 q 364 106 360 150 l 368 106 q 391 212 374 163 l 583 750 l 723 750 z "},w:{ha:1097,x_min:17,x_max:1080,o:"m 1080 750 l 856 0 l 718 0 l 568 526 q 556 598 559 560 l 553 598 q 538 528 551 570 l 376 0 l 242 0 l 17 750 l 155 750 l 305 194 q 315 125 312 169 l 321 125 q 334 196 323 163 l 495 750 l 618 750 l 775 193 q 786 124 782 169 l 792 124 q 804 193 793 154 l 951 750 l 1080 750 z "},x:{ha:704,x_min:18,x_max:686,o:"m 686 750 l 435 372 l 683 0 l 528 0 l 385 239 q 353 297 374 258 l 350 297 q 316 239 349 293 l 170 0 l 18 0 l 273 368 l 29 750 l 184 750 l 324 499 q 355 439 337 476 l 358 439 l 541 750 l 686 750 z "},y:{ha:735,x_min:9,x_max:729,o:"m 729 750 l 389 -113 q 121 -353 294 -353 q 36 -342 71 -353 l 36 -226 q 111 -241 75 -241 q 245 -135 201 -241 l 303 1 l 9 750 l 156 750 l 352 186 l 368 125 l 372 125 q 388 185 376 146 l 593 750 l 729 750 z "},z:{ha:683,x_min:24,x_max:649,o:"m 646 0 l 24 0 l 24 44 l 460 640 l 64 640 l 64 750 l 649 750 l 649 707 l 216 110 l 646 110 l 646 0 z "},"{":{ha:464,x_min:68,x_max:416,o:"m 416 -239 q 182 -7 182 -237 l 182 208 q 68 361 182 355 l 68 451 q 182 607 182 458 l 182 816 q 416 1050 182 1048 l 416 951 q 300 809 300 949 l 300 601 q 190 408 300 444 l 190 405 q 300 214 300 372 l 300 9 q 327 -108 300 -75 q 416 -142 355 -141 l 416 -239 z "},"|":{ha:374,x_min:130,x_max:246,o:"m 246 -353 l 130 -353 l 130 1147 l 246 1147 l 246 -353 z "},"}":{ha:464,x_min:50,x_max:397,o:"m 397 361 q 283 208 283 355 l 283 -7 q 50 -239 283 -237 l 50 -142 q 139 -107 111 -141 q 167 9 167 -73 l 167 214 q 277 405 167 372 l 277 408 q 167 601 167 444 l 167 809 q 50 951 167 948 l 50 1050 q 283 816 283 1048 l 283 607 q 397 451 283 458 l 397 361 z "},"~":{ha:1030,x_min:152,x_max:880,o:"m 880 551 q 819 380 873 440 q 671 319 764 319 q 478 398 591 319 q 362 446 406 446 q 257 319 261 446 l 152 319 q 213 490 157 430 q 361 551 269 551 q 533 487 437 551 q 676 422 629 422 q 747 458 721 422 q 775 551 774 493 l 880 551 z "},"标":{ha:1389,x_min:16,x_max:1382,o:"m 16 306 q 222 791 167 538 l 26 791 l 26 884 l 232 884 l 232 1149 l 327 1149 l 327 884 l 511 884 l 511 791 l 327 791 l 327 551 l 385 612 q 538 469 472 538 l 467 394 q 327 543 401 468 l 327 -173 l 232 -173 l 232 562 q 61 186 160 328 q 16 306 42 245 m 510 672 l 1356 672 l 1356 577 l 982 577 l 982 10 q 826 -159 982 -159 q 646 -158 753 -161 q 627 -45 639 -109 q 798 -56 720 -56 q 879 44 879 -56 l 879 577 l 510 577 l 510 672 m 572 1069 l 1294 1069 l 1294 975 l 572 975 l 572 1069 m 1072 402 l 1168 448 q 1382 16 1297 201 l 1274 -32 q 1072 402 1185 178 m 636 448 l 738 408 q 517 -33 627 159 q 418 14 475 -9 q 636 448 526 189 z "},"离":{ha:1389,x_min:43,x_max:1345,o:"m 517 100 q 842 113 674 105 q 770 191 806 152 l 838 243 q 1038 32 944 138 l 966 -31 q 914 31 940 0 q 532 9 741 22 q 404 -6 472 5 l 366 90 q 463 178 423 125 q 526 277 494 222 l 229 277 l 229 -178 l 127 -178 l 127 367 l 575 367 q 633 489 604 423 l 179 489 l 179 882 l 278 882 l 278 576 l 1109 576 l 1109 884 l 1208 884 l 1208 440 l 1109 440 l 1109 489 l 753 489 q 688 367 721 426 l 1259 367 l 1259 -26 q 1123 -172 1259 -172 q 981 -169 1058 -172 q 962 -64 975 -121 q 1099 -73 1042 -73 q 1157 -12 1157 -73 l 1157 277 l 635 277 q 517 100 577 182 m 43 1027 l 633 1027 q 579 1118 605 1078 l 684 1166 q 768 1027 718 1116 l 1345 1027 l 1345 935 l 43 935 l 43 1027 m 350 843 l 387 915 q 715 803 543 865 q 977 922 854 859 l 1017 852 q 828 762 926 805 q 1036 684 929 725 l 1000 607 q 722 717 854 667 q 376 596 557 651 q 327 673 351 640 q 602 760 471 713 q 350 843 469 807 z "},"网":{ha:1389,x_min:115,x_max:1271,o:"m 233 790 l 313 832 q 474 570 394 704 q 587 852 540 712 l 680 819 q 532 472 612 636 q 686 200 610 339 l 594 151 q 478 367 538 258 q 298 71 395 210 l 217 118 l 217 -165 l 115 -165 l 115 1075 l 1271 1075 l 1271 -13 q 1115 -158 1271 -158 q 907 -155 1028 -158 q 888 -50 901 -112 q 1082 -59 1002 -59 q 1169 16 1169 -59 l 1169 977 l 217 977 l 217 124 q 422 467 334 296 q 233 790 332 627 m 685 725 l 764 771 q 904 538 831 661 q 1036 844 982 694 l 1128 809 q 961 440 1052 616 q 1138 130 1046 294 l 1047 78 q 906 338 979 207 q 727 52 822 188 l 644 105 q 850 437 761 274 q 685 725 771 580 z "},"距":{ha:1389,x_min:15,x_max:1367,o:"m 648 1075 l 1351 1075 l 1351 977 l 751 977 l 751 722 l 1283 722 l 1283 215 l 1183 215 l 1183 267 l 751 267 l 751 -28 l 1367 -28 l 1367 -125 l 648 -125 l 648 1075 m 15 -7 l 92 5 l 92 538 l 180 538 l 180 20 q 312 44 246 31 l 312 677 l 203 677 l 203 633 l 114 633 l 114 1082 l 530 1082 l 530 677 l 403 677 l 403 439 l 562 439 l 562 353 l 403 353 l 403 62 q 571 97 486 79 q 576 -2 572 39 q 47 -112 264 -59 l 15 -7 m 1183 627 l 751 627 l 751 361 l 1183 361 l 1183 627 m 439 756 l 439 1003 l 203 1003 l 203 756 l 439 756 z "},"轴":{ha:1389,x_min:18,x_max:1302,o:"m 602 885 l 903 885 l 903 1140 l 1001 1140 l 1001 885 l 1302 885 l 1302 -170 l 1202 -170 l 1202 -83 l 703 -83 l 703 -170 l 602 -170 l 602 885 m 153 546 l 297 546 l 297 786 l 395 786 l 395 546 l 521 546 l 521 454 l 395 454 l 395 217 q 540 237 465 227 q 530 140 533 184 q 395 123 465 133 l 395 -182 l 297 -182 l 297 111 q 28 73 170 94 l 18 174 q 297 205 150 187 l 297 454 l 53 454 l 53 546 q 167 855 117 711 l 34 855 l 34 947 l 198 947 q 263 1160 235 1061 l 366 1139 q 302 947 336 1044 l 540 947 l 540 855 l 270 855 q 153 546 215 702 m 1001 12 l 1202 12 l 1202 359 l 1001 359 l 1001 12 m 703 12 l 903 12 l 903 359 l 703 359 l 703 12 m 1202 790 l 1001 790 l 1001 451 l 1202 451 l 1202 790 m 703 451 l 903 451 l 903 790 l 703 790 l 703 451 z "},"高":{ha:1389,x_min:27,x_max:1362,o:"m 259 851 l 1139 851 l 1139 520 l 1036 520 l 1036 564 l 362 564 l 362 522 l 259 522 l 259 851 m 210 -170 l 107 -170 l 107 466 l 1293 466 l 1293 5 q 1135 -162 1293 -162 q 937 -159 1047 -162 q 916 -52 929 -113 q 1107 -62 1040 -62 q 1190 21 1190 -62 l 1190 379 l 210 379 l 210 -170 m 393 290 l 1006 290 l 1006 6 l 491 6 l 491 -52 l 393 -52 l 393 290 m 27 1030 l 648 1030 q 591 1132 618 1088 l 693 1173 q 768 1030 732 1105 l 1362 1030 l 1362 941 l 27 941 l 27 1030 m 1036 767 l 362 767 l 362 648 l 1036 648 l 1036 767 m 909 90 l 909 205 l 491 205 l 491 90 l 909 90 z "}},familyName:"Microsoft YaHei",ascender:1470,descender:-363,underlinePosition:-121,underlineThickness:81,boundingBox:{yMin:-355,xMin:-220,yMax:1439,xMax:1763},resolution:1e3,original_font_information:{format:0,copyright:"© 2006 Microsoft Corporation. All rights reserved.",fontFamily:"Microsoft YaHei",fontSubfamily:"Regular",uniqueID:"Microsoft YaHei-Regular",fullName:"Microsoft YaHei",version:"Version 5.00",postScriptName:"MicrosoftYaHei",trademark:"Microsoft YaHei is either a registered trademark or a trademark of Microsoft Corporation in the United States and/or other countries.",manufacturer:"Microsoft Corporation",designer:"Founder",description:"Microsoft YaHei is a Simplified Chinese font developed by taking advantage of ClearType technology, and it provides excellent reading experience particularly onscreen. The font is very legible at small sizes.",manufacturerURL:"http://www.microsoft.com/typography",designerURL:"http://www.founder.com.cn/cn",licence:"\r\nNOTIFICATION OF LICENSE AGREEMENT \r\n\r\nYou may use this font to display and print content as permitted by the license terms for the product in which this font is included. You may only (i) embed this font in content as permitted by the embedding restrictions included in this font; and (ii) temporarily download this font to a printer or other output device to help print content.",licenceURL:"http://www.microsoft.com/typography/fonts"},
cssFontWeight:"normal",cssFontStyle:"normal"};e.getMicroYaHeiFont=function(){var r=null;var n=false;var o=false;function a(){}function i(t){e.logger.error("FontLoad error!",t);o=true}function s(){var e=new THREE.FontLoader;e.loadFromVar(t,function(e){r=e},a,i)}return function(){if(r==null&&!n){s();n=true}if(o===false){return r}else{return false}}}()})(Neon||(Neon={}));var Neon;(function(e){e.marine_anims_core={}})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function e(e){this.data=null;this.next=null;this.front=null;this.data=e}return e}();var r=function(){function e(){this.front=null;this.back=null}e.prototype.push=function(e){var r=new t(e);if(this.front===null){this.front=r;this.back=r}else{this.back.next=r;r.front=this.back;this.back=r}};e.prototype.shift=function(){if(!this.empty()){var e=this.front;this.front=this.front.next;if(this.front)this.front.front=null;return e.data}else{this.back=null;return null}};e.prototype.empty=function(){return this.front===null};return e}();e.Queue=r})(Neon||(Neon={}));var Neon;(function(e){function t(e){if(Array.isArray){return Array.isArray(e)}if(e&&typeof e.length==="number"&&e.constructor===Array){return true}return false}e.isArray=t;function r(e){if(typeof e==="string"||e instanceof String){return true}return false}e.isString=r;function n(e){return e===true||e===false}e.isBoolean=n;function o(e){if((typeof e==="number"||e instanceof Number)&&!isNaN(e)){return true}return false}e.isNumber=o;function a(e){return typeof e==="function"}e.isFunction=a;function i(e){return typeof e==="undefined"}e.isUndefined=i;function s(e){return i(e)||e===null}e.isUndefinedOrNull=s;function l(e){return typeof e==="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}e.isObject=l;var c=Object.prototype.hasOwnProperty;function u(e){if(!l(e)){return false}for(var t in e){if(c.call(e,t)){return false}}return true}e.isEmptyObject=u})(Neon||(Neon={}));var Neon;(function(e){e.kNAME="Neon";e.kVERSION="v0.1.0";e.STATIC_URL=null;e.CURRENT_MODEL_DIRECTORY=null;e.ISLOADOVER=false;var t=false;function r(){return t}e.isDebug=r})(Neon||(Neon={}));var Neon;(function(e){function t(e){if(e[0]===31&&e[1]===139)return pako.ungzip(e);else return e}e.unzip=t;var r=typeof navigator!=="undefined";var n=r&&!!navigator.userAgent.match(/Trident\/7\./);var o=r&&!!navigator.userAgent.match(/Edge/);var a=r?navigator.userAgent.toLowerCase():"";var i=typeof self!=="undefined"&&typeof window==="undefined";function s(e){return a.indexOf(e)!==-1}function l(){return typeof window!=="undefined"&&"ontouchstart"in window}e.isTouchDevice=l;function c(){if(!r)return false;return/ip(ad|hone|od)/.test(a)}e.isIOS=c;function u(){if(!r)return false;return s("android")}e.isAndroid=u;function f(){if(!r)return false;return s("safari")&&!s("chrome")}e.isSafari=f;function d(){if(!r)return false;return s("firefox")}e.isFireFox=d;function v(){if(!r)return false;return u()||c()}e.isMobile=v;function m(){if(!r)return false;return s("mac os")}e.isMac=m;function h(){if(!r)return false;return s("win32")||s("windows")}e.isWindows=h;function p(){return i}e.isInWorker=p;function g(){return n||o}e.isIE=g;function y(){}e.noop=y;var x=Object.create;var A=Object.prototype.hasOwnProperty;function b(e){var t=x(null);t["__"]=undefined;delete t["__"];for(var r in e)if(A.call(e,r)){t[r]=e[r]}return t}e.createDictionary=b;function E(){if(!!WebGLRenderingContext){var t=document.createElement("canvas"),r=["webgl","experimental-webgl","moz-webgl","webkit-3d"],n=null;for(var o=0;o!=4;++o){try{n=t.getContext(r[o]);if(n&&e.isFunction(n.getParameter)){return 1}}catch(e){}}return 0}return-1}e.detectWebGL=E})(Neon||(Neon={}));var Neon;(function(e){})(Neon||(Neon={}));var Neon;(function(e){var t=function(){};var r=function(){function e(){this.log=t;this.info=t;this.warn=t;this.debug=t;this.error=t}Object.defineProperty(e.prototype,"level",{set:function(e){this.debug=e>=5?console.debug.bind(console):t;this.log=e>=4?console.log.bind(console):t;this.info=e>=3?console.info.bind(console):t;this.warn=e>=2?console.warn.bind(console):t;this.error=e>=1?console.error.bind(console):t},enumerable:true,configurable:true});return e}();e.logger=new r;e.logger.level=4})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(){}t.prototype.on=function(t,r){if(!t)return;if(this.listeners===undefined){this.listeners=e.createDictionary()}if(typeof this.listeners[t]==="undefined"){this.listeners[t]=[]}this.listeners[t].push(r)};t.prototype.has=function(e,t){if(!e)return false;if(this.listeners===undefined)return false;if(this.listeners[e]!==undefined&&this.listeners[e].indexOf(t)!==-1){return true}return false};t.prototype.off=function(t,r){if(!t)return;if(this.listeners===undefined){this.listeners=e.createDictionary()}if(this.listeners[t]instanceof Array){var n=this.listeners[t];for(var o=0,a=n.length;o<a;o++){if(n[o]===r){n.splice(o,1);break}}}};t.prototype.reSet=function(){this.listeners=undefined};t.prototype.emit=function(t){var r=this;if(this.listeners===undefined){this.listeners=e.createDictionary()}if(typeof t==="string"){t={type:t}}if(!t.target){try{t.target=this}catch(e){}}if(!t.type){throw new Error("事件类型未知.")}setTimeout(function(){if(r.listeners[t.type]instanceof Array){var e=r.listeners[t.type].slice();for(var n=0;n<e.length;n++){e[n].call(r,t)}}},1)};return t}();e.EventEmitter=t})(Neon||(Neon={}));var Neon;(function(e){var t=THREE;e.ShaderPass=t.ShaderPass;e.SSAOSahder=t.SSAOShader;e.BufferGeometry=t.BufferGeometry;e.BufferAttribute=t.BufferAttribute;e.InterleavedBuffer=t.InterleavedBuffer;e.InterleavedBufferAttribute=t.InterleavedBufferAttribute;e.Mesh=t.Mesh;e.Scene=t.Scene;e.Camera=t.Camera;e.Vector3=t.Vector3;e.Euler=t.Euler;e.Quaternion=t.Quaternion;e.Box2=t.Box2;e.Box3=t.Box3;e.BoxHelper=t.BoxHelper;e.CylinderBufferGeometry=t.CylinderBufferGeometry;e.Color=t.Color;e.Frustum=t.Frustum;e.Line3=t.Line3;e._Math=t.Math;e.Matrix3=t.Matrix3;e.Matrix4=t.Matrix4;e.Plane=t.Plane;e.Ray=t.Ray;e.Sphere=t.Sphere;e.Spherical=t.Spherical;e.Spline=t.Spline;e.Triangle=t.Triangle;e.Vector2=t.Vector2;e.Vector4=t.Vector4;e.Material=t.Material;e.MeshBasicMaterial=t.MeshBasicMaterial;e.DirectionalLight=t.DirectionalLight;e.AmbientLight=t.AmbientLight;e.WebGLUniforms=t.WebGLUniforms;e.ShaderLib=t.ShaderLib;e.UniformsLib=t.UniformsLib;e.UniformsUtils=t.UniformsUtils;e.LensFlarePlugin=t.LensFlarePlugin;e.SpritePlugin=t.SpritePlugin;e.WebGLShadowMap=t.WebGLShadowMap;e.ShaderMaterial=t.ShaderMaterial;e.Geometry=t.Geometry;e.BoxBufferGeometry=t.BoxBufferGeometry;e.PlaneBufferGeometry=t.PlaneBufferGeometry;e.PerspectiveCamera=t.PerspectiveCamera;e.OrthographicCamera=t.OrthographicCamera;e.WebGLIndexedBufferRenderer=t.WebGLIndexedBufferRenderer;e.WebGLBufferRenderer=t.WebGLBufferRenderer;e.WebGLLights=t.WebGLLights;e.WebGLPrograms=t.WebGLPrograms;e.WebGLObjects=t.WebGLObjects;e.WebGLTextures=t.WebGLTextures;e.WebGLProperties=t.WebGLProperties;e.WebGLState=t.WebGLState;e.WebGLCapabilities=t.WebGLCapabilities;e.WebGLExtensions=t.WebGLExtensions;e.WebGLClipping=t.WebGLClipping;e.WebGLRenderTarget=t.WebGLRenderTarget;e.WebGLRenderTargetCube=t.WebGLRenderTargetCube;e.TextureLoader=t.TextureLoader;e.Raycaster=t.Raycaster;var r=function(e){__extends(t,e);function t(t){var r=e.call(this,t)||this;r.transform=null;return r}return t}(t.MeshPhongMaterial);e.MeshPhongMaterial=r})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function e(){}return e}();e.ModelParamer=t;var r=function(){function r(){this.modelsMap_id=new Map;this.modelsMap_url=new Map;this.modelId=0;this.rayCaster=new THREE.Raycaster;this.count=0;this.projectId=null;this.raycast=function(){var t;var r;var n=[];var o;var a=0;var i=new THREE.Mesh(undefined,undefined);var s=new e.Matrix4;var l=new e.Ray;var c=new e.Vector3;var u=new e.Vector3;var f=new e.Vector3;var d=new e.Vector3;var v=new e.Vector3;var m=new e.Vector3;var h=new e.Vector2;var p=new e.Vector2;var g=new e.Vector2;var y=new e.Vector3;var x=new e.Vector3;var A=new e.Vector3;var b=[];var E=new THREE.Raycaster;function w(t,r,n,o,a,i,s){e.Triangle.barycoordFromPoint(t,r,n,o,y);a.multiplyScalar(y.x);i.multiplyScalar(y.y);s.multiplyScalar(y.z);a.add(i).add(s);return a.clone()}function M(e,t,r,n,o,a,i,s,l,c){var u;var f=e.material;if(f.side===1){u=r.intersectTriangle(n,o,a,true,i)}else{u=r.intersectTriangle(n,o,a,f.side!==2,i)}if(u===null)return null;A.copy(i);A.applyMatrix4(e.matrixWorld);var d=t.ray.origin.distanceTo(A);if(d<t.near||d>t.far)return null;return{distance:d,point:A.clone(),vA:n.clone().applyMatrix4(e.matrixWorld),vB:o.clone().applyMatrix4(e.matrixWorld),vC:a.clone().applyMatrix4(e.matrixWorld)}}function C(e,t,r,n,o,a,i,s){c.set(n[o*8],n[o*8+1],n[o*8+2]);u.set(n[a*8],n[a*8+1],n[a*8+2]);f.set(n[i*8],n[i*8+1],n[i*8+2]);d.set(s[o*8+3],s[o*8+4],s[o*8+5]);v.set(s[a*8+3],s[a*8+4],s[a*8+5]);m.set(s[i*8+3],s[i*8+4],s[i*8+5]);var l=M(e,t,r,c,u,f,x,d,v,m);if(l){h.set(n[o*8+6],n[o*8+7]);p.set(n[a*8+6],n[a*8+7]);g.set(n[i*8+6],n[i*8+7]);l.uv=w(x,c,u,f,h,p,g);l.faceIndex=o}return l}function S(e,t,r){var n=e.geometry;if(!n)return;var o=e.matrixWorld;s.getInverse(o);l.copy(t.ray).applyMatrix4(s);var a,i,c;var u=n.indices;var f=n.vb;var d=n.vb;if(!u||!f)return;var v;for(var m=0,h=u.length;m<h;m+=3){a=u[m];i=u[m+1];c=u[m+2];v=C(e,t,l,f,a,i,c,d);if(v){v.faceIndex=Math.floor(m/3);v.fragId=e.fragId;r.push(v)}}}function R(s){var l=e.gloableParames.clipBox;n.length=0;for(var c=0,u=s.fragSet.getCount();c<u;++c){a=c;t=s.fragSet.getBoundingBox(a);r=s.fragSet.getState(a);if(E.ray.intersectBox(t)){n.push(a)}}if(n.length<=0)return;var f=[];var d=[];var v=null;for(var m=0;m<n.length;m++){a=n[m];if(s.fragSet.getState(a)===1)continue;i.geometry=s.fragSet.getMesh(a).geometry;i.material=s.fragSet.getMaterial(a);i.uuid=s.fragSet.getUUID(a);i.fragId=a;i.state=s.fragSet.getState(a);if(i.geometry.maxInstancedCount!==1){s.fragSet.getMatrix(a,i.matrixWorld);s.fragSet.getMatrix(a,i.matrix)}else{i.matrix.copy(new e.Matrix4);i.matrixWorld.copy(new e.Matrix4)}S(i,E,d);if(d.length>0){f.push(d[0])}d.length=0}if(f.length===0)return;f.sort(function(e,t){if(e.distance>t.distance)return 1;if(e.distance<t.distance)return-1;return 0});if(e.zmax!=null&&e.zmin!=null&&e.enableFloor){var h=0;var p=false;for(;h<f.length;++h){a=f[h].fragId;v=f[h];var g=s.fragSet.getBoundingBox(a);if(g.max.z>=e.zmax&&g.min.z<e.zmin||g.max.z>e.zmin&&g.min.z<=e.zmin||g.max.z<=e.zmax&&g.min.z>=e.zmin){if(l.intersectsBox(g)){p=true;break}}}if(p===false)return}else{for(var c=0;c<f.length;++c){if(l.intersectsBox(s.fragSet.getBoundingBox(f[c].fragId))){a=f[c].fragId;v=f[c];break}}}if(v===null)return;a=s.fragSet.frag2idx[a];var y=s.fragSet.uuids[a];var x={uuid:y};e._selector.emit({type:"OnPropertyChanged",target:x});e._selector.add(y);o=s.fragSet.idx2frag[a];v.modelId=s.id;v.fragId=o;v.uuid=y;b.push(v)}return function(e,t){b.length=0;E.setFromCamera(e,t);this.enumModel(R);return b}}()}r.prototype.createModel=function(e){var r=new t;r.modelUrl=e;r.modelId=this.modelId++;this.modelsMap_id.set(r.modelId,r);this.modelsMap_url.set(e,r);this.count++;return r};r.prototype.getModelNumber=function(){return this.count};r.prototype.getModelParamerFromId=function(e){return this.modelsMap_id.get(e)};r.prototype.getModelParamerFromUrl=function(e){return this.modelsMap_url.get(e)};r.prototype.getGloabalModelId=function(){return this.modelId};r.prototype.enumModel=function(e){this.modelsMap_id.forEach(function(t){e(t.model)})};r.prototype.getBoundingBoxFromUUid=function(e){var t=0;if(e.length>36){t=parseInt(e[e.length-1])}var r=this.modelsMap_id.get(t);if(r){return r.model.getFragmentSet().getBoundingBoxFromUuid(e)}};r.prototype.getModelFromUuid=function(e){var t=parseInt(e[e.length-1]);var r=this.modelsMap_id.get(t);if(r){return r.model}};r.prototype.reset=function(){e.enableUp=true;e.enableNav=true;e.enableModel=true};r.prototype.disposeAll=function(){this.modelsMap_id.forEach(function(e){if(e.model)e.model.dispose()});this.modelsMap_id.clear();this.modelsMap_url.clear();e.modelsControl.dispose()};return r}();var n=function(){function t(){this.clipBox=new THREE.Box3;this.modelManager=new r;this.eleArrayBuffer=null;this.arrayBuffer=null;this.bufferMemorySize=0;this.MaxBufferMemorySize=e.isMobile()?375*1024*1024:750*1024*1024;this.vaoExt=null;this.memorySize=0}return t}();e.gloableParames=new n;var o=function(){function t(){this.__data={};this.data=null}t.prototype.add=function(e,t,r){this.__data[e]={value:t,info:r,count:0};this.__add(e)};t.prototype.__add=function(t){var r=this;Object.defineProperty(this,t,{get:function(){r.data=r.__data[t];r.data.count++;return r.data.value},set:function(n){r.data=r.__data[t];e.logger.debug("你正在修改常量参数"+t+", 信息为："+r.data.info+"，已经使用次数为 "+r.data.count);r.data.value=n}})};t.prototype.disPose=function(){this.__data=null;this.data=null};return t}();e.ConstantParamers=o;function a(){var e=[];for(var t=0;t<arguments.length;t++){e[t]=arguments[t]}var r=new o;var n=null;for(var a=0;a<arguments.length;a++){n=arguments[a];r.add(n.name,n.value,n.info)}return r}e.renderParamers=new o;e.renderParamers.add("_gl",null,"下层canvas渲染上下文");e.renderParamers.add("oldClippingPlanes",[],"下层canvas切割面");e.renderParamers.add("_glup",null,"上层canvas渲染上下文");e.renderParamers.add("_glnav",null,"控制canvas渲染上下文");e.renderParamers.add("defaultClearColor",(new THREE.Color).setHex(15592941),"默认背景颜色");e.renderParamers.add("pixeRatio",null,"像素比例");e.renderParamers.add("container",null,"webgl运行外部容器")})(Neon||(Neon={}));var Neon;(function(e){function t(t){e.loadParamers.animateUrl=t}e.setAnimateUrl=t;e.loadParamers=new e.ConstantParamers;e.loadParamers.add("WORKER_CACHE_URL",null,"worker 代码(nevm.min.js)所在url");e.loadParamers.add("MODEL_UP_URL",null,"模型文件上层目录");e.loadParamers.add("downloadUrl",null,"文件下载地址");e.loadParamers.add("CURRENT_MODEL_DIRECTORY",null,"当前模型文件目录url");e.loadParamers.add("vmUrl",null,"worker代码路径，默认为空");e.loadParamers.add("hasWorkerSrc",false,"是否已经使用ajax加载过worker源码");e.loadParamers.add("xhrVmUrl",function(t,r,n){var o=new XMLHttpRequest;o.open("GET",t,true);o.withCredentials=false;o.onload=function(){var a;try{a=new Blob([o.responseText],{type:"application/javascript"})}catch(r){e.logger.error("can't get resource: [ "+t+" ]");n.cb.apply(n.target)}r.cb.apply(r.target,[a])};o.send()},"woker加载函数");e.loadParamers.add("processer",false,"进度条");e.loadParamers.add("container",false,"webgl运行外部容器");var r=function(t){__extends(r,t);function r(){var r=t.call(this)||this;r.MAX_WORKER_COUNT=e.isMobile()?5:10;r.VMSCRIPT=e.isDebug()?"nevm.js":"nevm.min.js";r.subWorkers=[];r.masterWorker=null;r.taskQuene=[];r.mp=null;r.takeTask=function(t){var n;var o;for(var a=0;a<r.subWorkers.length;++a){n=r.subWorkers[a];o=a;if(n.workerId===t){break}}if(r.taskQuene.length===0){n.terminate();n=null;r.subWorkers.splice(o,1)[0]=null;if(r.subWorkers.length===0){e.loadParamers.processer.style.display="none";r.mp.model.loadOver();if(r.loadCB)r.loadCB()}return}var i=r.taskQuene.shift();i.workerId=t;n.postMessage(i);e.loadParamers.processer.setAttribute("value",String(parseInt(e.loadParamers.processer.getAttribute("max"))-r.taskQuene.length))};r.createGeometry=function(e){var t=e.data;if(t.error!==undefined){console.error(t.error);if(r.errorCB)r.errorCB(t.error)}if(t.objectDef===2&&t.packageType===32){if(r.innerCB)r.innerCB(t)}r.takeTask(t.workerId);if(r.progressCB)r.progressCB()};r.createSubWorker=function(){var t=Math.min(r.MAX_WORKER_COUNT,r.taskQuene.length);if(t>0){for(var n=0;n<t;++n){var o=new Worker(e.loadParamers.WORKER_CACHE_URL);o.workerId=n;o.addEventListener("message",r.createGeometry,false);r.subWorkers.push(o);r.takeTask(o.workerId)}}else{e.loadParamers.processer.style.display="none";r.mp.model.loadOver();if(r.loadCB)r.loadCB()}};r.LoadGeometries=function(t,n){r.taskQuene.length=0;r.innerCB=n;t.map(function(t){r.taskQuene.push({action:1,workerId:-1,url:e.loadParamers.downloadUrl+t,package:t,packageType:32,options:{responseType:2}})});var o=e.loadParamers.processer;o.setAttribute("max",String(r.taskQuene.length));o.style.display="block";r.createSubWorker()};r.createEnvironment=function(t){if(t.data["error"]){e.logger.error(t.data);return}var n=t.data.packages;r.LoadGeometries(n,function(t){var r=e.getModel();if(!r)return;var n=parseInt(t.package);for(var o=0;o<t.vbo.length;++o){r.addGeometry(t.vbo[o],n+":"+o)}});delete t.data.packages;delete t.data.packageType;r.mp.model=e.createModel(t.data,r.mp);if(r.createEnvCB&&typeof r.createEnvCB==="function")r.createEnvCB();e.treeFilter.addModel(r.mp.model);e.ISLOADOVER=true;e.gloableParames.modelManager.reset();r.masterWorker.terminate();r.masterWorker=null;if(!e.modelsControl.isActive())e.modelsControl.run();r.dispatchEvent({type:"envLoadOver"})};r.createMasterWorker=function(t){if(!r.masterWorker){if(!e.loadParamers.WORKER_CACHE_URL)e.loadParamers.WORKER_CACHE_URL=URL.createObjectURL(t);r.masterWorker=new Worker(e.loadParamers.WORKER_CACHE_URL);r.masterWorker.workerId=0;r.masterWorker.addEventListener("message",r.createEnvironment,false);e.loadParamers.hasWorkerSrc=true}r.masterWorker.postMessage({action:1,url:e.loadParamers.downloadUrl,package:"project.jdx",packageType:2147483648,options:{responseType:2}})};r.xhrVmUrlLoadCB={cb:r.createMasterWorker,target:r};return r}r.prototype.load=function(t,r,n,o,a){var i=t.modelUrl;this.createEnvCB=r;this.loadCB=n;this.progressCB=o;this.errorCB=a;if(this.mp!==null&&this.mp!==t)e.logger.error("modelParamer error!");if(this.mp===null)this.mp=t;if(e.loadParamers.CURRENT_MODEL_DIRECTORY!==null){}e.loadParamers.CURRENT_MODEL_DIRECTORY=i;this.getModelUpUrl();this.getDownLoadUrl(i);if(!e.loadParamers.vmUrl)e.loadParamers.vmUrl=this.getResourceUrl(this.VMSCRIPT);if(!e.loadParamers.hasWorkerSrc)e.loadParamers.xhrVmUrl(e.loadParamers.vmUrl,this.xhrVmUrlLoadCB);else this.createMasterWorker()};r.prototype.disPosePreModel=function(t){var r=t.loader;t.model.dispose();t.model=undefined;e.inCallBack.clear();r.subWorkers.map(function(e){e.terminate()});r.subWorkers.length=0;r.taskQuene.length=0;if(r.masterWorker)r.masterWorker.terminate();e.renderParamers._gl=null;e.renderParamers._glup=null;e.renderParamers._glnav=null;r.masterWorker=null};r.prototype.getModelUpUrl=function(){if(e.loadParamers.CURRENT_MODEL_DIRECTORY!=null){var t=e.loadParamers.CURRENT_MODEL_DIRECTORY.split("/");e.logger.debug("temp",t);var r=t.pop();if(r!=""){t.push(r)}e.loadParamers.MODEL_UP_URL="";for(var n=0;n<t.length-1;++n){e.loadParamers.MODEL_UP_URL+=t[n]+"/"}}};r.prototype.getDownLoadUrl=function(t){e.loadParamers.downloadUrl=t};r.prototype.getResourceUrl=function(t){if(e.STATIC_URL)return e.STATIC_URL+t;var r=this.getScript(e.kNAME);if(r){var n=r.src.toLowerCase();var o=n.indexOf("neon");e.STATIC_URL=n.substr(0,o)}return e.STATIC_URL+t};r.prototype.getScript=function(e){e=e.toLowerCase();var t=document.getElementsByTagName("script");if(t&&t.length>0){for(var r=0;r<t.length;++r){if(t[r].src&&t[r].src.toLowerCase().indexOf(e)!==-1){return t[r]}}}return null};return r}(THREE.EventDispatcher);e.ModelLoader=r;function n(t,n,o,a,i){var s=e.gloableParames.modelManager;s.projectId=a;var l=s.getModelParamerFromUrl(t);l=s.createModel(t);l.loader=new r;var c=l.loader;c.load(l,n,o)}e.load=n})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(e){this._fragSet=e;this.FragIdToFileDes=new Map;this._loader=e.model.loader;this._fragid2Geom=new Map;this.Init(e)}t.prototype.Init=function(t){var r=this;var n=t.geometries;if(n){for(var o in n){this.FragIdToFileDes.set(n[o],{fileName:o.split(":")[0]+".gdx",offset:parseInt(o.split(":")[1]),pkgName:parseInt(o.split(":")[0])})}}else{console.error("dynamic loader init error")}var a=t.mesh2frag;if(a){var i=function(t){var n=a[t];var o=parseInt(t);if(e.isNumber(n)){s._fragid2Geom.set(n,o)}else{n.map(function(e){r._fragid2Geom.set(e,o)})}};var s=this;for(var l in a){i(l)}}};t.prototype.ClearGeometries=function(){this._fragSet.model.iterator.geomScenes.length=0;this._fragSet.clear()};t.prototype.LoadGeometry=function(t){var r=this;this.ClearGeometries();var n=[];var o=new Set;var a=new Set;var i=new Map;t.map(function(t){var s=r._fragid2Geom.get(t);var l=r.FragIdToFileDes.get(s);if(l){var c=l.pkgName+":"+l.offset;if(!o.has(l.fileName))n.push(l.fileName),o.add(l.fileName);a.add(c);if(!i.has(c))i.set(c,[]);i.get(c).push(t)}else{e.logger.error("Fragid "+t+" error!")}});this._loader.LoadGeometries(n,function(t){var n=e.getModel();if(!n)return;var o=parseInt(t.package);for(var s=0;s<t.vbo.length;++s){if(a.has(o+":"+s)){n.addGeometry(t.vbo[s],o+":"+s);i.get(o+":"+s).map(function(e){r._fragSet.setState(e,2)})}}})};return t}();e.DynamicLoader=t})(Neon||(Neon={}));var Neon;(function(e){e.envInitialize=function(){function t(e){var t=document.createElement("PROGRESS");t.style.top=String(200)+"px";t.style.left=String((e.clientWidth-450)/2)+"px";t.style.width="450px";t.style.height="25px";t.style.position="absolute";t.style.zIndex="3";t.textContent="模型加载进度";t.style.display="none";t.setAttribute("max","0");return t}function r(e,t,r,n){e.width=t;e.height=r;e.style.zIndex=n;e.style.position="absolute";return e}function n(n){n=n||{};if(e.renderParamers.container&&e.renderParamers.container.hasChildNodes)o();e.renderParamers.container=n.container||document.body;if(!e.loadParamers.vmUrl)e.loadParamers.vmUrl=n.url?n.url:undefined;if(e.isMobile()){var a=document.createElement("meta");a.name="viewport";a.content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0";document.getElementsByTagName("head")[0].appendChild(a)}if(!e.renderParamers._gl||n.enforcement===true){if(e.renderParamers._gl!==null)e.gloableParames.modelManager.disposeAll();e.renderParamers.pixeRatio=window.devicePixelRatio||1;e.logger.debug("start init");var i=r(document.createElement("canvas"),e.renderParamers.container.clientWidth,e.renderParamers.container.clientHeight,"0");var s=r(document.createElement("canvas"),e.renderParamers.container.clientWidth,e.renderParamers.container.clientHeight,"1");var l=r(document.createElement("canvas"),200/1.5,200/1.5,"2");l.style.top="20px";l.style.right="0px";l.style.border="none";if(e.renderParamers.pixeRatio!==1){l.width/=e.renderParamers.pixeRatio/1.5;l.height/=e.renderParamers.pixeRatio/1.5}e.renderParamers._gl=e.createRender({canvas:i});e.renderParamers._glup=e.createRender({canvas:s,alpha:true});e.renderParamers._glnav=e.createRender({canvas:l,alpha:true});e.renderParamers._gl.clear(true,true,true);e.renderParamers._glup.clear(true,true,true);e.renderParamers._glnav.clear(true,true,true);e.renderParamers._gl.setClearColor(e.renderParamers.defaultClearColor,1);e.renderParamers._glnav.setClearColor(e.renderParamers.defaultClearColor,0);e.renderParamers._glup.setClearColor(e.renderParamers.defaultClearColor,0);e.modelsControl.init();e.loadParamers.processer=e.loadParamers.processer||n.processer||t(e.renderParamers.container);e.renderParamers.container.appendChild(e.loadParamers.processer);e.controlManager.initControls();e.logger.debug("end init")}e.renderParamers.container.appendChild(e.renderParamers._gl.domElement);e.renderParamers.container.appendChild(e.renderParamers._glup.domElement);e.renderParamers.container.appendChild(e.renderParamers._glnav.domElement)}function o(){e.renderParamers.container.removeChild(e.renderParamers._gl.domElement);e.renderParamers.container.removeChild(e.renderParamers._glup.domElement);e.renderParamers.container.removeChild(e.renderParamers._glnav.domElement)}return{initialize:n,dispose:o}}();function t(t){e.envInitialize.initialize(t)}e.initialize=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=[];r.add=function(t){if(e.isString(t)){n.push(t)}else if(e.isArray(t)){for(var r=0,o=t.length;r<o;++r)n.push(t[r])}else{return}};r.pressKey=function(e){if(e.key=="Escape"){this.emit({type:"onPressEsc",target:null})}};r.clear=function(){n.length=0;e.gloableParames.modelManager.enumModel(function(e){e.getHighIterator().reverse()})};r.select=function(t,o){if(e.isString(t)){n.push(t)}else if(e.isArray(t)){n.push.apply(n,t)}else{return}r.emit({type:"OnSelectorSel",target:{uuids:n.slice(),isLag:o}})};r.text=function(e){r.emit({type:"OnText",target:{enable:e}})};r.selectFloorAndMajorAndClass=function(e,t){if(e==undefined)r.selectAll(true);else if(String(e)=="none")r.selectAll(false);else r.emit({type:"OnSelectFloorN",target:{names:e,treeName:t}})};r.selectAll=function(e){this.emit({type:"OnSelectAll",target:{enable:e}})};r.get=function(){return n.slice()};r.setMethod=function(t,r){var n=e.gloableParames.clipBox;if(t=="home"){e.gloableParames.modelManager.enumModel(function(e){e.show(-2)});e.renderParamers._gl.clippingPlanes=e.renderParamers.oldClippingPlanes;e.modelsControl.backInitial();e.controlManager.controls.disableAllControls()}else if(t=="back"){e.controlManager.controls.backUp()}else{t=t[0].toUpperCase()+t.slice(1)+"Control";e.controlManager.controls.setContrlFromName(t,r)}};r.selectFloorAndMajorAndClassByGuid=function(e,t){r.emit({type:"OnSelectByGuid",target:{uuids:e,floorSet:t}})};return r}return r}(e.EventEmitter);e.Selector=t;e._selector=new t;function r(){return e._selector}e.getSelector=r})(Neon||(Neon={}));var Neon;(function(e){e.zmax=null;e.zmin=null;e.enableFloor=false;e.enableAxisNet=false;e.enableLevel=true;e.firstCreat=true;e.isPartitioned=false;e.gloableTran=new e.Vector3;e.objectIdCount=1e7;var t=function(t){__extends(r,t);function r(e,r){var n=t.call(this,e)||this;n.shininess=0;n.specular=null;n.hasUvMatrix=false;if(r!=undefined){n.hasUvMatrix=true;n.uvMatrix=r}n.side=THREE.DoubleSide;n.transparent=true;n.opacity=1;n.isInstanced=1;n.defines={};n.defines["INSTANCED"]=1;n.color=new THREE.Color(8421504);return n}r.prototype.setUvMatrix=function(t){this.hasUvMatrix=true;this.uvMatrix=t;e.logger.debug(t)};r.prototype.getUvMatrix=function(){return this.uvMatrix};return r}(THREE.MeshLambertMaterial);e.NeonPhongMaterial=t;function r(t,r,n){return __awaiter(this,void 0,void 0,function(){var o;return __generator(this,function(a){switch(a.label){case 0:o=new Promise(function(t,n){var o=new e.TextureLoader;var a=function(t){e.logger.error("load texture error: "+r);n(null)};var i=function(e){t(e)};var s=e.noop;var l=e.loadParamers.CURRENT_MODEL_DIRECTORY+"/Texc/"+r;e.logger.debug(r);o.load(l,i,s,a)});return[4,o.then(function(e){e.name=r;e.wrapS=1e3;e.wrapT=1e3;t[n]=e})];case 1:a.sent();return[2]}})})}function n(t,n,o){o.name=t.name;o.color=(new e.Color).setRGB((t.color>>16&255)/255,(t.color>>8&255)/255,(t.color&255)/255);o.shininess=t.shininess*.8;if(t.transparency===true){o.opacity=t.opacity;o.transparent=t.transparency}o.reflectivity=t.reflectivity;o.needsUpdate=true;o.id=n;if(t.map!==undefined){r(o,t.map.path,"map");o.setUvMatrix(t.map.transform)}if(t.bumpMap!==undefined){r(o,t.bumpMap.path,"bumpMap");o.setUvMatrix(t.bumpMap.transform)}if(t.alphaMap!==undefined){r(o,t.alphaMap.path,"alphaMap");o.setUvMatrix(t.alphaMap.transform)}if(t.normalMap!==undefined){r(o,t.normalMap.path,"normalMap");o.setUvMatrix(t.normalMap.transform)}if(t.aoMap!==undefined){r(o,t.aoMap.path,"aoMap");o.setUvMatrix(t.aoMap.transform)}if(t.displacementMap!==undefined){r(o,t.displacementMap.path,"displacementMap");o.setUvMatrix(t.displacementMap.transform)}if(t.emissiveMap!==undefined){r(o,t.emissiveMap.path,"emissiveMap");o.setUvMatrix(t.emissiveMap.transform)}if(t.envMap!==undefined){r(o,t.aoMap.path,"aoMap");o.setUvMatrix(t.aoMap.transform)}if(t.lightMap!==undefined){r(o,t.lightMap.path,"lightMap");o.setUvMatrix(t.lightMap.transform)}if(t.specularMap!==undefined){r(o,t.specularMap.path,"specularMap");o.setUvMatrix(t.specularMap.transform)}t=null}var o=function(){function t(t,r,n,o){this.uuid="N2_"+o+"_"+e.objectIdCount++;this.array=t;this.itemSize=r;this.count=t!==undefined?t.length/r:0;this.normalized=n===true;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=e.noop;this.version=0}return t}();e.RenderBufferAttribute=o;o.prototype=Object.create(e.BufferAttribute.prototype);var a=function(){function t(t,r,n){this.uuid="N2_"+n+"_"+e.objectIdCount++;this.array=t;this.stride=r;this.count=t!==undefined?t.length/r:0;this.dynamic=false;this.updateRange={offset:0,count:-1};this.onUploadCallback=e.noop;this.version=0}return t}();e.RenderInterleavedBuffer=a;a.prototype=Object.create(e.InterleavedBuffer.prototype);var i=function(){function e(e,t,r,n){this.uuid=null;this.data=e;this.itemSize=t;this.offset=r;this.normalized=n===true}return e}();e.RenderInterleavedBufferAttribute=i;i.prototype=Object.create(e.InterleavedBufferAttribute.prototype);var s=function(){function t(t,r){this.fragSet=r;this.instancedMvp=[];this.modelId=t;this.geoms=new Map;this.geomDeses=[];this.geomFragIds=new Map;this.instanceGeomtryFrag2Rb=new Map;this.instanceGeomtryRb2Frag=new Map;this.instanceFragIdSortIndex=new Map;this.instanceGeomFragIds=new Map;this.mvp=new e.Matrix4}t.prototype.add=function(e,t){var r=this.geoms.get(e);if(!r){r=[];this.geoms.set(e,r)}r.push(t);return r.length-1};t.prototype.addIrenderGeometry=function(t,r,n){var o=this.geoms.get(t),a;var i=new e.RenderBufferGeometryDes;i.materialId=t;if(!o){o=[];this.geoms.set(t,o);a=new e.RenderBufferGeometry;o.push(a)}else if(o[o.length-1].isAlloc===true){a=new e.RenderBufferGeometry;o.push(a)}else{a=o[o.length-1]}var s=new e.Matrix4;this.fragSet.getMatrix(r,s);if(n.vb&&n.vb.length/8+a.dataArray.length/8>65535&&a.dataArray.length!==0){this.geomAlloc(a);a=new e.RenderBufferGeometry;o.push(a)}i.dataOffset=a.dataArray.length;i.indexOffset=a.indexArray.length;for(var l=0;l<n.indices.length;++l){a.indexArray.push(n.indices[l]+a.dataArray.length/8)}var c=new e.Vector3;var u=new e.Vector3;var f=0,d=0,v=0;for(var l=0;l<n.vb.length;l+=8){f=n.attributes.position.offset;d=n.attributes.normal.offset;v=n.attributes.uv.offset;c.set(n.vb[f+l],n.vb[f+l+1],n.vb[f+l+2]).applyMatrix4(s);u.set(n.vb[d+l],n.vb[d+l+1],n.vb[d+l+2]).applyMatrix4(s);a.dataArray.push(c.x,c.y,c.z);a.dataArray.push(u.x,u.y,u.z);a.dataArray.push(n.vb[v+l],n.vb[v+1+l]);var m=this.fragSet.model.boundingBox.getCenter();var h=this.fragSet.model.boundingBox.getSize();var p=c.distanceTo(m);if(p>h.x&&p>h.y&&p>h.z){console.log(1)}}a.fragIds.push(r);i.dataCount=a.dataArray.length-i.dataOffset;i.indexCount=a.indexArray.length-i.indexOffset;i.geoId=o.length-1;this.addDes(r,i);n.vb=null;n.indices=null;n=null;return i.geoId};t.prototype.addInstanceGeometry=function(t,r){var n=e.createRenderBufferGeometry(t,this.modelId);n.isInstancedBufferGeometry=true;this.instancedMvp.length=0;this.instanceGeomtryRb2Frag.set(n,r.slice());var o={idNumber:0,hiddenNumber:0};for(var a=0;a<r.length;++a){this.fragSet.getMatrix(r[a],this.mvp);this.instancedMvp.push(this.mvp.elements[0],this.mvp.elements[1],this.mvp.elements[2],this.mvp.elements[3],this.mvp.elements[4],this.mvp.elements[5],this.mvp.elements[6],this.mvp.elements[7],this.mvp.elements[8],this.mvp.elements[9],this.mvp.elements[10],this.mvp.elements[11],this.mvp.elements[12],this.mvp.elements[13],this.mvp.elements[14],this.mvp.elements[15]);this.instanceGeomtryFrag2Rb.set(r[a],n);this.instanceFragIdSortIndex.set(r[a],a);this.instanceGeomFragIds.set(r[a],o);o.idNumber++}var i=new THREE.InstancedInterleavedBuffer(new Float32Array(this.instancedMvp),16,1);n.addAttribute("mvp1",new THREE.InterleavedBufferAttribute(i,4,0,false));n.addAttribute("mvp2",new THREE.InterleavedBufferAttribute(i,4,4,false));n.addAttribute("mvp3",new THREE.InterleavedBufferAttribute(i,4,8,false));n.addAttribute("mvp4",new THREE.InterleavedBufferAttribute(i,4,12,false));n.maxInstancedCount=o.idNumber};t.prototype.geomsAlloc=function(){var e=this;this.geoms.forEach(function(t){t.map(function(t){if(!t.isAlloc){e.geomAlloc(t)}})})};t.prototype.geomAlloc=function(t){t.isAlloc=true;var r={type:"",id:0,drawRange:{start:0,count:0},strides:8};r.vb=new Float32Array(t.dataArray);r.attributes={position:{offset:0,itemSize:3},normal:{offset:3,itemSize:3},uv:{offset:6,itemSize:2}}
;r.indices=new(t.dataArray.length/8>65535?Uint32Array:Uint16Array)(t.indexArray);t.dataArray.length=0;t.dataArray=null;t.indexArray.length=0;t.indexArray=null;t.isInstancedBufferGeometry=true;t.maxInstancedCount=1;e.createRenderBufferGeometry(r,this.modelId,t);var n=new THREE.InstancedInterleavedBuffer((new e.Matrix4).elements,16,1);t.addAttribute("mvp1",new THREE.InterleavedBufferAttribute(n,4,0,false));t.addAttribute("mvp2",new THREE.InterleavedBufferAttribute(n,4,4,false));t.addAttribute("mvp3",new THREE.InterleavedBufferAttribute(n,4,8,false));t.addAttribute("mvp4",new THREE.InterleavedBufferAttribute(n,4,12,false));t.computeBoundingBox()};t.prototype.addDes=function(e,t){this.geomDeses[e]=t;var r=this.geomFragIds.get(t.materialId+"_"+t.geoId);if(!r){r={idNumber:0,hiddenNumber:0};this.geomFragIds.set(t.materialId+"_"+t.geoId,r)}r.idNumber++};t.prototype.changeStateDate=function(e,t){var r=this.geoms.get(e.materialId)[e.geoId].attributes.state;var n=e.dataOffset/8;var o=(e.dataOffset+e.dataCount)/8;if(r){for(var a=n,i=o;a<i;++a)r.array[a]=t;r.version++}};t.prototype.changeInstancedState=function(e,t){var r=this.instanceGeomtryFrag2Rb.get(e);var n=this.instanceFragIdSortIndex.get(e);if(r&&n>=0){var o=r.attributes.mvp1;if(o){o.data.array[16*n+3]=t;o.data.version++}}};t.prototype.updateState=function(e,t,r){var n=this.geomDeses[e];if(n){var o=this.geomFragIds.get(n.materialId+"_"+n.geoId);if(t===4){if(!r)r=0;r=r/100;if(this.fragSet.getState(e)===1)o.hiddenNumber--;this.changeStateDate(n,2+r)}else if(t===1){this.changeStateDate(n,1);o.hiddenNumber++}else if(t===8){if(!r)r=.3;if(this.fragSet.getState(e)===1)o.hiddenNumber--;this.changeStateDate(n,1+r)}else if(t===2){if(this.fragSet.getState(e)===1)o.hiddenNumber--;this.changeStateDate(n,0)}if(o.hiddenNumber===o.idNumber)this.geoms.get(n.materialId)[n.geoId].hidden=true;else this.geoms.get(n.materialId)[n.geoId].hidden=false}else{var o=this.instanceGeomFragIds.get(e);if(!o)return;if(t===4){if(this.fragSet.getState(e)===1)o.hiddenNumber--;this.changeInstancedState(e,2+r)}else if(t===1){this.changeInstancedState(e,1);o.hiddenNumber++}else if(t===8){if(!r)r=.3;if(this.fragSet.getState(e)===1)o.hiddenNumber--;this.changeInstancedState(e,1+r)}else if(t===2){if(this.fragSet.getState(e)===1)o.hiddenNumber--;this.changeInstancedState(e,0)}if(o.hiddenNumber===o.idNumber)this.instanceGeomtryFrag2Rb.get(e).hidden=true;else this.instanceGeomtryFrag2Rb.get(e).hidden=false}};t.prototype.getGeometry=function(e){var t={type:"",id:0,drawRange:{start:0,count:0}};var r=this.geomDeses[e];if(r){var n=this.geoms.get(r.materialId)[r.geoId].attributes.position.data.array;var o=this.geoms.get(r.materialId)[r.geoId].index.array;t.vb=n.slice(r.dataOffset,r.dataOffset+r.dataCount);t.indices=o.slice(r.indexOffset,r.indexOffset+r.indexCount).map(function(e){return e-r.dataOffset/8});t.maxInstancedCount=1}else{var a=this.instanceGeomtryFrag2Rb.get(e);if(a){t.vb=a.attributes.position.data.array;t.indices=a.index.array;t.maxInstancedCount=a.maxInstancedCount}}return t};t.prototype.getTHREEGeometry=function(t){var r=this.getGeometry(t);return e.createRenderBufferGeometry(r,0)};t.prototype.disPose=function(){this.geoms.forEach(function(e){e&&e.map(function(e){e&&e.dispatchEvent({type:"dispose"})})});this.geoms.clear();this.geomFragIds.clear();this.geomDeses.length=0;this.instanceGeomtryFrag2Rb.forEach(function(e){e&&e.dispatchEvent({type:"dispose"})});this.instanceGeomtryFrag2Rb.clear();this.instancedMvp.length=0;this.instanceGeomtryRb2Frag.clear();this.instanceGeomFragIds.clear();this.instanceFragIdSortIndex.clear()};return t}();var l=function(){function t(t){var r=[];var n=0;var o=0;var a=0;var i=0;var s=t;var l=0;function c(t,l,c){if(n>=536870912){t.drawMode=2|4}else{var u=t.byteLength*(l||1);if(u<1e5){t.drawMode=2|4}}if(!((t.drawMode&2)===2)){n+=t.byteLength;o+=1}a++;if(e.isUndefined(c)||c<0){c=r.length}i+=t.byteLength;r[c]=e.createRenderBufferGeometry(t,s);return c}function u(e){var t=this.get(e);if(!t){return 0}r[e]=null;return t.byteLength}function f(e){return r[e]}function d(){return r.length}this.clear=function(){for(var e=0,t=r.length;e<t;++e){r[e]&&r[e].dispatchEvent({type:"dispose"});r[e]&&(r[e].lineIndex=[])}r.length=0};this.add=c;this.remove=u;this.get=f;this.getCount=d}return t}();var c=function(){function r(r){var o=[];var a=r;function i(e){for(var t=0;t<e.length;++t){s(e[t],t)}e=null}function s(r,a){if(e.isUndefined(a))a=o.length;var i=null;if(o[a]!==undefined){i=o[a]}else{i=new t({})}n(r,a,i);o[a]=i;return a}function l(e){o[e]=null;return e}function c(e){return o[e]}var u=function(){var e={name:"",color:0,shininess:0,opacity:0,transparency:false};return function(t){var r=o[t];if(r){e.name=r.name;e.color=r.color.getHex();e.shininess=r.shininess;e.opacity=r.opacity;e.transparency=r.transparent}return e}}();function f(){return o.length}this.clear=function(){for(var e=0,t=o.length;e<t;++e){o[e]&&o[e].dispose()}o.length=0};this.initialize=i;this.add=s;this.remove=l;this.get=c;this.getOriginal=u;this.getCount=f}return r}();var u;(function(e){e[e["XMODE"]=0]="XMODE";e[e["YMODE"]=1]="YMODE";e[e["ARC"]=2]="ARC"})(u=e.AXISMODE||(e.AXISMODE={}));var f=function(){function e(){}return e}();e.Axis=f;var d;(function(e){e[e["BUILDING"]=0]="BUILDING";e[e["STRUCTURE"]=1]="STRUCTURE"})(d=e.LEVELMODE||(e.LEVELMODE={}));var v=function(){function e(){}return e}();e.Level=v;e.cadPicture=new Map;function m(){function t(t,r){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){switch(o.label){case 0:n=new Promise(function(r,n){var o=new e.TextureLoader;var a=function(r){e.logger.error("load image error: "+t);n(null)};var i=function(e){r(e)};var s=e.noop;var l=e.CURRENT_MODEL_DIRECTORY+"/image/"+t;o.load(l,i,s,a)});return[4,n.then(function(e){e.name=t;e.magFilter=THREE.NearestFilter;e.minFilter=THREE.NearestFilter;r.map=e})];case 1:o.sent();return[2]}})})}var r=1;var n=String(r)+".jpg"}var h=function(){function e(){this.intersectAxis=[];this.adjoinAxis={xpos:null,xneg:null,ypos:null,yneg:null};this.isSelected=false;this.selectedBox=[];this.isTaskSelected=false}return e}();e.floorsMap=new Map;var p=function(){function t(t,r,n,o,a,i){this.model=null;var s=new Map;var l=new e.Vector3;var c=new e.Quaternion;var f=new e.Vector3;var d;var v=this;n.decompose(l,c,f);function m(e,t){var r=e.startPoint;var n=e.endPoint;if(e.mode==u.XMODE){if(r.x<t.max.x&&r.x>t.min.x){if(r.y>t.max.y&&n.y<t.min.y||r.y<t.min.y&&n.y>t.max.x)return{flag:true,dis:0,mode:u.XMODE,axis:e};else return{flag:true,dis:null,mode:u.XMODE,axis:e}}else{if(r.y>t.max.y&&n.y<t.min.y||r.y<t.min.y&&n.y>t.max.x)return{flag:false,dis:t.getCenter().x-r.x,mode:u.XMODE,axis:e};else return{flag:false,dis:null,mode:u.XMODE,axis:e}}}else if(e.mode==u.YMODE){if(r.y<t.max.y&&r.y>t.min.y){if(r.x>t.max.x&&n.x<t.min.x||r.x<t.min.x&&n.x>t.max.x)return{flag:true,dis:0,mode:u.YMODE,axis:e};else return{flag:true,dis:null,mode:u.YMODE,axis:e}}else{if(r.x>t.max.x&&n.x<t.min.x||r.x<t.min.x&&n.x>t.max.x)return{flag:false,dis:t.getCenter().y-r.y,mode:u.YMODE,axis:e};else return{flag:false,dis:null,mode:u.YMODE,axis:e}}}}function p(e,t){var r=t.indices[e];if(r!==undefined){var n=t.pairs;var o=t.keys;var a=t.values;var i=t.category;var s=t.names;var l=t.types;var c=s[n[r]];var u=l[n[++r]];var f=n[++r];var d={};d["name"]=c;d["type"]=u;for(var v=0;v<f;v++){var m=d[i[n[++r]]]={};var h=n[++r];for(var p=0;p<h;p++){m[o[n[++r]]]=a[n[++r]]}}return d}return null}var g=function(){var t=new e.Box3;var n=0;return function(e){n=e*6;t.min.x=r[n];t.min.y=r[n+1];t.min.z=r[n+2];t.max.x=r[n+3];t.max.y=r[n+4];t.max.z=r[n+5];return t}}();function y(e,t){for(var r in e)for(var n in e[r]){if(n==t)return e[r][n]}return undefined}function x(e,t){for(var r in e)for(var n in e[r]){var o=e[r][n];if(o.indexOf(t)>=0)return true}return false}function A(e,t){var r;var n;d=e;for(var o=0;o<t;++o){r=p(o,e);n=a.get(i[o]);var s=undefined;var l=true;s=y(r,"工作集");if(s!="毕节站-幕墙"&&s!=undefined&&s!=""&&s!="7-幕墙")w(s,n,r,o);else{s=y(r,"注释");if(s==undefined||s=="")w(null,n,r,o);else w(s,n,r,o)}}}function b(e,t){if(t.x>=0&&t.y>0)return Math.acos(t.x/e);else if(t.x>0&&t.y<=0)return Math.PI-Math.acos(t.x/e);else if(t.x<=0&&t.y<0)return Math.PI+Math.acos(-t.x/e);else if(t.x<0&&t.y>=0)return 2*Math.PI-Math.acos(-t.x/e)}function E(e){var t=null,r=null,n=null,o=null;for(var a=0;a<e.length;++a){var i=e[a];if(i.mode==u.XMODE){if(i.dis>0){if(t==null||e[t].dis>i.dis)t=a}else if(i.dis<0){if(r==null||e[r].dis<i.dis)r=a}}if(i.mode==u.YMODE){if(i.dis>0){if(n==null||e[n].dis>i.dis)n=a}else if(i.dis<0){if(o==null||e[o].dis<i.dis)o=a}}}return{xpos:t,xneg:r,ypos:n,yneg:o}}function w(t,r,n,o,a){var l=new h;if(t==null||t==""){l.floorNum=1e3;l.floorName="未知";l.major="未知";l.category="未知"}else if(a==true){var c=t.split("-");if(c.length>=3){if(c[0]==""){c[0]=c[1];c[0]="-"+c[0];c[1]=c[2];c[2]=c[3];if(c.length==5)c[3]=c[4];c.pop()}var u=c[0].split("（");l.floorNum=parseInt(u[0]);l.floorName=u[1].slice(0,u[1].length-1);if(l.floorName=="大屋面"||l.floorName=="小屋面"||l.floorName=="大屋面层"||l.floorName=="水箱间")l.floorName="未知";l.major=c[1];l.category=c[2];l.categoryName=c[3]}}else{var c=t.split("-");if(c.length>=4){if(c[0]==""&&c.length==5){if(c[0]==""){c[0]=c[1];c[0]="-"+c[0];c[1]=c[2];c[2]=c[3];c.pop()}}if(c[0]==""&&c.length>=6){c[0]="-"+c[1];c[1]="-"+c[3];c[2]=c[4];c[3]=c[5];c[4]=c[6];c.pop();c.pop()}l.floorNum=parseInt(c[0]);l.floorName=c[1];l.major=c[2];l.category=c[3];l.categoryName=c[4]}else if(c.length==2||c.length==3&&c[0]==""){if(c.length==3){if(c[0]==""){c[0]=c[1];c[0]="-"+c[0];c[1]=c[2];c.pop()}}var u=c[0].split("（");if(u.length==1){l.floorNum=1e3;l.floorName="未知";l.major=c[1]}else{l.floorNum=parseInt(u[0]);l.floorName=u[1].slice(0,u[1].length-1);if(l.floorName[l.floorName.length-1]=="）"||l.floorName[l.floorName.length-1]==")")l.floorName=u[1].slice(0,u[1].length-2);l.major=c[1]}l.sysName=y(n,"系统名称");if(l.sysName!=undefined){l.category=l.sysName.slice(0,l.sysName.length);while(l.category.length>0){var f=l.category.length;if(e.isNumber(parseInt(l.category[f-1])))l.category=l.category.slice(0,f-1);else break}}}else if(c.length==3&&c[0]!=""){l.floorNum=parseInt(c[0]);l.floorName=c[1];l.major=c[2];l.category=undefined}else if(c.length==2&&c[0]!=""){l.floorNum=0;l.floorName=c[1];l.major=c[2];l.category=undefined}if(l.floorName==undefined){l.floorNum=1e3;l.floorName="未知";l.major="未知";l.category="未知"}e.floorsMap.set(l.floorName,l.floorNum)}l.location=r.getCenter();l.upLevel=r.max.z;l.downLevel=r.min.z;var d=v.model.axisNets.get(l.floorNum);if(d==undefined)d=v.model.axisNets.get(0);if(d!=undefined){var p=[];for(var g=0;g<d.length;++g){var A=void 0;A=m(d[g],r);if(!A||A===undefined)continue;if(A.flag==true&&A.dis==0)l.intersectAxis.push(d[g]);else if(A.flag==false&&A.dis!=null)p.push(A)}var b=E(p);if(b.xpos!=null)l.adjoinAxis["xpos"]=p[b.xpos].axis;if(b.xneg!=null)l.adjoinAxis["xneg"]=p[b.xneg].axis;if(b.ypos!=null)l.adjoinAxis["ypos"]=p[b.ypos].axis;if(b.yneg!=null)l.adjoinAxis["yneg"]=p[b.yneg].axis;l.name=n.name;l.type=n.type;l.volume=y(n,"体积");l.length=y(n,"长度");l.width=y(n,"宽度");l.height=y(n,"高度");l.inner=y(n,"内径");l.area=y(n,"面积");l.comments=y(n,"注释");l.workSet=y(n,"工作集");if(x(n,"混凝土")){l.material="混凝土"}if(x(n,"C30")){l.specification="C30"}if(x(n,"C45")){l.specification="C45"}var w=y(n,"结构材质");if(w){var M=w.split("-");M=e.filterSpace(M);l.material=M[0]==undefined?undefined:M[0];l.cNames=M[1]==undefined?undefined:M[1];l.specification=M[2]==undefined?undefined:M[2];var C=n.name;if(C&&l.cNames=="桩"){if(C.indexOf("直径")>0){l.pileCate="圆桩";l.pileSize=C.split(" ")[0];l.pileDepth=y(n,"h");l.pileBlockLevel=y(n,"顶部高程")}else{l.pileCate="方桩";l.pileSize=C.split(" ")[0];l.pileDepth=y(n,"h");l.pileBlockLevel=y(n,"顶部高程")}}}if(l.inner==undefined&&l.width!=undefined&&l.height!=undefined)l.inner=l.width+"x"+l.height;if(l.category=="梁"){l.sectionLength=y(n,"剪切长度");if(l.volume!=null&&l.length!=null){l.sectionalArea=String((parseFloat(l.volume)/(parseFloat(l.length)/1e3)).toFixed(2))}}else if(l.category=="板"){l.mm=y(n,"厚度")}if(l.major=="结构")l.value="体积";else if(l.major=="建筑")if(l.category=="门窗")l.value="个数";else if(l.category=="板")l.value="面积";else l.value="体积";else if(l.major=="装饰"){if(l.category=="内装"){if(l.categoryName=="地面"||l.categoryName=="天花")l.value="个数";if(l.categoryName=="墙面")l.value="面积"}else if(l.category=="外装"){if(l.categoryName=="幕墙")l.value="面积"}}else{l.value=="长度"}}s.set(i[o],l)}function M(e){if(e<i.length)return s.get(i[e])}this.clear=function(){s.clear()};this.getValue=function(e,t){var r=p(e,d);return y(r,t)};this.has=function(e){return s.has(i[e])};this.addAttribute=function(e,t){d=t;var r=p(e,t);var n=a.get(i[e]);var o=y(r,"工作集");if(o!="毕节站幕墙"&&o!=undefined&&o!=""&&o!="7-幕墙"&&o!="Workset1"&&o.indexOf("建筑墙")<0)w(o,n,r,e);else{o=y(r,"注释");if(o==undefined||o==""){var s=true;for(var l in r){if(l=="文字"){for(var c in r[l]){if(c=="信息")o=r["文字"][c]}if(o!=undefined){w(o,n,r,e,true);s=false}}}if(s){w(null,n,r,e)}}else w(o,n,r,e)}};this.getFromUUid=function(e){return s.get(e)};this.getProper=function(e){return p(e,d)};this.add=w;this.get=M;this.init=A}return t}();var g=function(){function e(){}return e}();e.DynamicLoadGeometries=g;var y=function(){function t(t,r,n,o){this.model=n;this.geomId2FragId=[];var a=this;a.geometries=t.geometries;var i=t.fragments;var u=i.bbox;var f=i.facets;var d=i.frag2idx;var v=i.frag2mesh;var m=i.idx2frag;var h=i.length;var g=i.loaded;var y=i.materialIdx;a.mesh2frag=i.mesh2frag;var x=i.transform;var A=t.uuids;var b=r;var E=new Uint8Array(h);var w=new s(r,a);this.geometryMap=w;this.materialIdx=y;this.dynamicLoader=new e.DynamicLoader(a);var M=new l(r);var C=new c(r);var S=t.worldMatrix.elements;var R=new Map;var B=new Map;var T=new p(r,u,(new e.Matrix4).fromArray(S),m,B,A);T.model=n;if(t.materials){C.initialize(t.materials)}e.logger.debug("axisNets",n.axisNets);function P(t,r){t.drawMode=1;var n=a.mesh2frag[r];if(n===undefined){e.logger.warn("Add geometry failed in [ "+r+" ]");return}var o=0;if(e.isNumber(n)||n.length===1){var i=e.isNumber(n)?n:n[0];o=1;w.addIrenderGeometry(y[i],i,t);t.vb=null;t.indices=null;t=null}else{o=n.length;var s=[];for(var l=0;l<n.length;++l){s.push(n[l]);if(s.length===50){w.addInstanceGeometry(t,s);s.length=0}}if(s.length>1)w.addInstanceGeometry(t,s);else if(s.length===1)w.addIrenderGeometry(y[s[0]],s[0],t);s.length=0;t=null}F(n,2)}var D=function(){var e;return function(t){e=v[t];return M.get(e)}}();var I=function(){var e;return function(t){e=y[t];return C.get(e)}}();function k(e,t){var r=e*16;for(var n=0;n<16;++n){t.elements[n]=x[r+n]}}var N=function(){var t=new e.Box3;var r=0;return function(e){r=e*6;t.min.x=u[r];t.min.y=u[r+1];t.min.z=u[r+2];t.max.x=u[r+3];t.max.y=u[r+4];t.max.z=u[r+5];return t}}();function U(){return h}function _(){return true}var q=function(){var e;return function(t){e=d[t];return A[e]}}();function H(e){var t=d[e];return m[t]}function L(e){return E[e]}function F(t,r,n){if(e.isArray(t)){for(var o=0,a=t;o<a.length;o++){var i=a[o];if(L(i)!==r){w.updateState(i,r,n);E[i]=r;e.gloableParames.modelManager.reset()}}}else{if(L(t)!==r){w.updateState(t,r,n);E[t]=r;e.gloableParames.modelManager.reset()}}}function O(e){return f[e]}function z(){return M}function V(){return C}var j=function(){var t;return function(r){if(e.isUndefined(t))t=new e.Mesh(undefined,undefined);t.geometry=w.getGeometry(r);t.material=I(r);t.uuid=q(r);t.modelId=b;t.receiveShadow=true;t.castShadow=true;t.fragId=r;t.state=L(r);k(r,t.matrixWorld);k(r,t.matrix);return t}}();function G(e){return T.get(d[e])}this.getAttributeUUID=function(e){var t=R.get(e);return T.get(d[t[0]])};this.dispose=function(){M.clear();C.clear();T.clear();w.disPose();A=null;d=null;m=null;M=null;C=null;T=null;w=undefined};this.getWorldMatrix=function(){return(new e.Matrix4).fromArray(S)};var W=function(){var t,r,n;var o=new e.Vector3,i=new e.Vector3,s=new e.Vector3;var l=new e.Matrix4;return function(c){var u=a.getAttributeUUID(c);if(u.volume!=undefined)return parseFloat(u.volume);var f=R.get(c);var d=0;for(var v=0;v<f.length;++v){var m=f[v];var h=j(m).geometry;if(h==undefined||h.attributes==undefined||h.attributes.position==undefined)return undefined;var p=h.attributes.position.array;var g=h.index;var y=new e.Vector3;k(m,l);for(var x=0,A=g.count;x<A;x+=3){t=g.getX(x);r=g.getX(x+1);n=g.getX(x+2);o.set(p[t*8]/e.meter2foot,p[t*8+1]/e.meter2foot,p[t*8+2]/e.meter2foot).applyMatrix4(l);i.set(p[r*8]/e.meter2foot,p[r*8+1]/e.meter2foot,p[r*8+2]/e.meter2foot).applyMatrix4(l);s.set(p[n*8]/e.meter2foot,p[n*8+1]/e.meter2foot,p[n*8+2]/e.meter2foot).applyMatrix4(l);d+=y.crossVectors(o,i).dot(s)/6}}return d}}();this.getValue=function(e,t){var r=T.getFromUUid(e);if(r.value=="体积"){return String(W(e))}else if(r.value=="个数"){return"1件"}else if(r.value=="面积"){return r.area+"平方米"}else if(r.value=="长度"){return r.length+"米"}};var Y=function(){var t=new e.Box3;var r;var n;var o=new e.Vector3;var a=new e.Vector3;var i=new e.Vector3;var s;var l=new e.Vector3,c=new e.Vector3,u=new e.Vector3;var f,d,v;var m=new e.Matrix4;function h(e,t){var r=.001;return e.x>=t.min.x-r&&e.y>=t.min.y-r&&e.z>=t.min.z-r&&e.x<=t.max.x+r&&e.y<=t.max.y+r&&e.z<=t.max.z+r?true:false}function p(t,r,n){var o=[];var a=(new e.Vector3).copy(r).sub(t).normalize();if(r.x>n.max.x){var i=(n.max.x-t.x)/a.x;o.push((new e.Vector3).set(t.x+a.x*i,t.y+a.y*i,t.z+a.z*i))}else if(r.x<n.min.x){var i=(n.min.x-t.x)/a.x;o.push((new e.Vector3).set(t.x+a.x*i,t.y+a.y*i,t.z+a.z*i))}if(r.y>n.max.y){var i=(n.max.y-t.y)/a.y;o.push((new e.Vector3).set(t.x+a.x*i,t.y+a.y*i,t.z+a.z*i))}else if(r.y<n.min.y){var i=(n.min.y-t.y)/a.y;o.push((new e.Vector3).set(t.x+a.x*i,t.y+a.y*i,t.z+a.z*i))}if(r.z>n.max.z){var i=(n.max.z-t.z)/a.z;o.push((new e.Vector3).set(t.x+a.x*i,t.y+a.y*i,t.z+a.z*i))}else if(r.z<n.min.z){var i=(n.min.z-t.z)/a.z;o.push((new e.Vector3).set(t.x+a.x*i,t.y+a.y*i,t.z+a.z*i))}for(var s=0;s<o.length;++s){if(h(o[s],n)){return o[s]}}}function g(t,r){if(t.max.z>r.max.z){return new e.Vector3(0,0,r.max.z)}else if(t.min.z<r.min.z){return new e.Vector3(0,0,r.min.z)}else if(t.max.x>r.max.x){return new e.Vector3(r.max.x,0,0)}else if(t.min.x<r.min.x){return new e.Vector3(r.min.x,0,0)}else if(t.max.y>r.max.y){return new e.Vector3(0,r.max.y,0)}else if(t.min.y<r.min.y){return new e.Vector3(0,r.min.y,0)}return new e.Vector3(0,0,0)}return function(t,r){var n=j(t).geometry;var o=n.attributes.position.array;var a=n.index;var i=new e.Vector3;var s=new e.Vector3;var y=new THREE.Raycaster;var x=g(N(t),r);k(t,m);var A=0;for(var b=0,E=a.count;b<E;b+=3){f=a.getX(b);d=a.getX(b+1);v=a.getX(b+2);l.set(o[f*8],o[f*8+1],o[f*8+2]).applyMatrix4(m);c.set(o[d*8],o[d*8+1],o[d*8+2]).applyMatrix4(m);u.set(o[v*8],o[v*8+1],o[v*8+2]).applyMatrix4(m);if(h(l,r)&&h(c,r)&&h(u,r)){var w=(new e.Vector3).copy(l).sub(x);var M=(new e.Vector3).copy(c).sub(x);var C=(new e.Vector3).copy(u).sub(x);A+=i.crossVectors(w,M).dot(C)/6}else if(h(l,r)&&!h(c,r)&&!h(u,r)){var w=(new e.Vector3).copy(l).sub(x);var M=p(l,c,r).sub(x);var C=p(l,u,r).sub(x);A+=i.crossVectors(w,M).dot(C)/6}else if(!h(l,r)&&h(c,r)&&!h(u,r)){var w=p(c,l,r).sub(x);var M=(new e.Vector3).copy(c).sub(x);var C=p(c,u,r).sub(x);A+=i.crossVectors(w,M).dot(C)/6}else if(!h(l,r)&&!h(c,r)&&h(u,r)){var w=p(u,l,r).sub(x);var M=p(u,c,r).sub(x);var C=(new e.Vector3).copy(u).sub(x);A+=i.crossVectors(w,M).dot(C)/6}else if(!h(l,r)&&!h(c,r)&&!h(u,r)){A+=0}else{var S=(new e.Vector3).copy(l).sub(x);var R=(new e.Vector3).copy(c).sub(x);var B=(new e.Vector3).copy(u).sub(x);A+=i.crossVectors(S,R).dot(B)/6;if(h(l,r)&&h(c,r)&&!h(u,r)){var w=p(l,u,r).sub(x);var M=p(c,u,r).sub(x);var C=(new e.Vector3).copy(u).sub(x);A-=i.crossVectors(w,M).dot(C)/6}else if(h(l,r)&&!h(c,r)&&h(u,r)){var w=p(l,c,r).sub(x);var M=(new e.Vector3).copy(c).sub(x);var C=p(u,c,r).sub(x);A-=i.crossVectors(w,M).dot(C)/6}else if(!h(l,r)&&h(c,r)&&h(u,r)){var w=(new e.Vector3).copy(l).sub(x);var M=p(c,l,r).sub(x);var C=p(u,l,r).sub(x);A-=i.crossVectors(w,M).dot(C)/6}else{e.logger.debug(8)}}}return A/Math.pow(e.meter2foot,3)}}();this.getInsectValue=function(e,t,r){switch(r){case"体积":return Y(e,t)}};this.InitAttribute=function(){for(var t=0,r=A.length;t<r;++t){var n=[];var o=m[t];var a=new e.Box3;if(e.isNumber(o)){n.push(o);a.copy(N(o))}else if(e.isArray(o))for(var i=0;i<o.length;++i){n.push(o[i]);if(i==0)a.copy(N(o[i]));else a.union(N(o[i]))}R.set(A[t],n);B.set(A[t],a)}};this.getBoundingBoxFromUuid=function(e){return B.get(e)};this.getProper=function(e){var t=R.get(e);if(t){var r=d[t[0]];return T.getProper(r)}};this.uuid2Id=function(e){var t=R.get(e);if(t&&t.length>0){return d[t[0]]}};this.clear=function(){for(var e=0,t=U();e<t;++e)F(e,0);w.disPose()};this.getMesh=j;this.addGeometry=P;this.getGeometry=D;this.getMaterial=I;this.getMatrix=k;this.getBoundingBox=N;this.getUUID=q;this.getFragId=H;this.getFacet=O;this.getState=L;this.setState=F;this.getGeometrySet=z;this.getMaterialSet=V;this.getCount=U;this.hasLoadedComplete=_;this.idx2frag=m;this.frag2idx=d;this.getAttribute=G;this.uuids=A;this.uuid2fragid=R;this.uuidBox=B;this.calcVolume=W}return t}();e.FragmentSet=y})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(t){this.boundingSphere=new e.Sphere;this.boundingBox=new e.Box3;this.lineIndex=null;this.vboMap=new Map;this.vaoMap=new Map;this.OESvao=null;this.indexArray=[];this.dataArray=[];this.fragIds=[];this.id=e.objectIdCount++;this.uuid=null;this.name=null;this.type=null;this.index=null;this.dynamicMode=1;this.classType=1245488;this.attributes={};this.morphAttributes={};this.groups=[];this.drawRange={start:0,count:Infinity};this.hidden=false;this.isAlloc=false;this.isInstancedBufferGeometry=true;this.computeBoundingBox()}return t}();e.RenderBufferGeometry=t;t.prototype=Object.create(e.BufferGeometry.prototype);function r(t,r,n){var o=t.attributes;var a=o.position;var i=a instanceof e.BufferAttribute?3:a.data.stride;var s=a instanceof e.BufferAttribute?0:a.offset;var l=a.count;var c=a.array;var u=new e.Vector3;for(var f=0;f<l;f++){u.set(c[f*i+s],c[f*i+s+1],c[f*i+s+2]);if(n)u.applyMatrix4(n);r(u,f)}}function n(t){var n=[];var o={};var a=1;t.computeBoundingBox();if(t.boundingBox){var i=(new e.Box3).copy(t.boundingBox);var s=i.getSize();a=Math.max(s.x,Math.max(s.y,s.z))}var l=(1<<16)/a;function c(e,t){var r=0|e.x*l;var n=0|e.y*l;var a=0|e.z*l;var i=o[r];if(!i){o[r]=i={}}var s=i[n];if(!s){i[n]=s={}}var c=s[a];if(c===undefined){s[a]=c=t}return c}function u(e,t){var r=c(e,t);n[t]=r}r(t,u);return n}function o(e){if(e&&e.attributes&&e.attributes.position)return e.attributes.position.count;else return 0}function a(e,t){var n=new Float32Array(3*o(e));function a(e,t){n[3*t]=e.x;n[3*t+1]=e.y;n[3*t+2]=e.z}r(e,a,t);return n}function i(t,r,o){var i=n(t);if(!o)o=new e.Matrix4;var s=a(t,o);var l={};var c=[];var u=new e.Vector3;var f=new e.Vector3;var d=new e.Vector3;var v=new e.Vector3;var m=new e.Vector3;function h(e,t){t.x=s[3*e];t.y=s[3*e+1];t.z=s[3*e+2]}function p(e,t,r,n){h(e,u);h(t,f);h(r,d);f.sub(u);d.sub(u);f.cross(d);n.copy(f).normalize()}function g(e,t,n){var o=i[e];var a=i[t];var s=i[n];if(o===a||o===s||a===s)return;var u=false;if(o>a){var f=o;o=a;a=f;u=true}var d=l[o];if(d){var h=d[a];if(h===undefined){d[a]=u?-n-1:n}else{if(!r){p(e,t,n,v);if(h<0){p(a,o,i[-h-1],m)}else{p(o,a,i[h],m)}var g=v.dot(m);if(Math.abs(g)<.25){c.push(e);c.push(t)}}else{c.push(e);c.push(t)}delete d[a]}}else{l[o]={};l[o][a]=n}}function y(e,t,r){g(e,t,r);g(t,r,e);g(r,e,t)}var x=t.index;if(x){var A=x.array;for(var b=0,E=A.length;b<E;b+=3){y(A[b],A[b+1],A[b+2])}}t.lineIndex=c}var s=function(){var t=null,r;function n(r,n){var o,a=e.gloableParames.bufferMemorySize,i=e.gloableParames.MaxBufferMemorySize,s;var l={};if(a<i){s=t.createBuffer();o=t.STATIC_DRAW;l.needUpdate=false}else{if(n===t.ELEMENT_ARRAY_BUFFER){if(!e.gloableParames.eleArrayBuffer)e.gloableParames.eleArrayBuffer=t.createBuffer();s=e.gloableParames.eleArrayBuffer}else{if(!e.gloableParames.arrayBuffer)e.gloableParames.arrayBuffer=t.createBuffer();s=e.gloableParames.arrayBuffer}o=t.DYNAMIC_DRAW}t.bindBuffer(n,s);t.bufferData(n,r,o);var c=t.FLOAT;var u=r;if(u instanceof Float32Array){c=t.FLOAT}else if(u instanceof Float64Array){console.warn("Unsupported data buffer format: Float64Array")}else if(u instanceof Uint16Array){c=t.UNSIGNED_SHORT}else if(u instanceof Int16Array){c=t.SHORT}else if(u instanceof Uint32Array){c=t.UNSIGNED_INT}else if(u instanceof Int32Array){c=t.INT}else if(u instanceof Int8Array){c=t.BYTE}else if(u instanceof Uint8Array){c=t.UNSIGNED_BYTE}l.bytesPerElement=u.BYTES_PER_ELEMENT;l.type=c;l.__webglBuffer=s;return l}return function(o){var a=e.renderParamers._gl;if(a){r=o;t=a.context;var i=o.index;if(i!==null){o.vboMap.set("index",n(i.array,t.ELEMENT_ARRAY_BUFFER))}if(o.lineIndex!==null){o.vboMap.set("lineIndex",n(o.lineIndex,t.ELEMENT_ARRAY_BUFFER))}for(var s in o.attributes){o.vaoMap.set(s,n(o.attributes[s].data.array,t.ARRAY_BUFFER))}}}}();function l(e){if(e.OESvao){e.vaoMap.set("index",e.OESvao.createVertexArrayOES());e.vaoMap.set("lineIndex",e.OESvao.createVertexArrayOES())}}function c(r,n,o){if(!o)o=new t;var a=new e.RenderInterleavedBuffer(r.vb,r.strides,n);var s=r.attributes.position;var l=e.renderParamers._gl;o.addAttribute("position",new e.RenderInterleavedBufferAttribute(a,s.itemSize,s.offset,false));s=r.attributes.normal;o.addAttribute("normal",new e.RenderInterleavedBufferAttribute(a,s.itemSize,s.offset,false));s=r.attributes.uv;o.addAttribute("uv",new e.RenderInterleavedBufferAttribute(a,s.itemSize,s.offset,false));o.setIndex(new e.RenderBufferAttribute(r.indices,1,false,n));o.dynamicMode=r.drawMode;var c=new Float32Array(r.vb.length/8);o.addAttribute("state",new e.RenderBufferAttribute(c,1,false,0));r=null;i(o,false);if(l){var u=l.context;o.OESvao=u.getExtension("OES_vertex_array_object")}return o}e.createRenderBufferGeometry=c;var u=function(){function e(){}return e}();e.RenderBufferGeometryDes=u})(Neon||(Neon={}));var Neon;(function(e){var t=function(e){__extends(t,e);function t(t,r){var n=e.call(this,t,r)||this;var o=n;n.addEventListener("removed",function(){o.geometry.dispatchEvent({type:"dispose"});o.material.dispatchEvent({type:"dispose"})});return n}return t}(THREE.Mesh);e.NeonMesh=t})(Neon||(Neon={}));var Neon;(function(e){e.modelsControl=function(){var t=false;var r=0;var n=null;var o=null;var a=null;var i=null;var s=null;var l;var c=new THREE.Box3;var u=new THREE.AmbientLight;var f=new THREE.PointLight;var d=new THREE.Vector3;var v=new THREE.Vector3;var m=1;var h=null;var p;var g=new THREE.Scene;var y=new e.Scene;var x=new e.Scene;var A=new e.Scene;var b=new THREE.Scene;var E=new THREE.Scene;var w=new THREE.Scene;var M=new THREE.AxisHelper(20);function C(e){switch(e){case"main":return g;case"tri":return y;case"circle":return x;case"home":return A}}function S(){if(e.enableNav){var t=Math.PI;var r=Math.abs;var n=.01;var o=e.renderParamers._glnav;var a=h.getSpherical();var c=i.rotation;c.x=l.rotation.x;c.y=l.rotation.y;c.z=l.rotation.z;o.clear(true,true,true);o.render(g,i,null,true,null);if((r(a.phi%(t/2))<n||r(a.phi%(t/2))>t/2-n)&&(r(a.theta%(t/2))<n||r(a.theta%(t/2))>t/2-n)){o.render(y,s,null,true,null);e.isTriPlan=true}else{e.isTriPlan=false}if(r(a.phi-t)<n||r(a.phi)<n){o.render(x,s,null,true,null);e.isCircle=true}else{e.isCircle=false}e.enableNav=false}}function R(){return p}function B(){t=true;p=new e.Control;var n=performance;var o=300,i=0,s=0,c=0;setTimeout(function(){(function t(){s=s*.75+o*.25;i=n.now();S();e.modelsControl.getNavControl().animateRotate(.25,l,h);e._moveAnimate.animate(l);if(e.enableModel){e.enableModel=false;e.renderParamers._gl.clear(true,true,false);e.renderParamers._gl.render(w,l,null,false,[u,f]);e.gloableParames.modelManager.enumModel(function(e){if(e)e.iterator.reset()})}if(e.enableUp){e.enableUp=false;e.renderParamers._glup.clear(true,true,true);e.renderParamers._glup.render(b,a,null,false,[u,f]);e.renderParamers._glup.render(E,l,null,false,[u,f]);e.gloableParames.modelManager.enumModel(function(e){if(e)e.renderUp(l)})}s-=n.now()-i;c=s/e.gloableParames.modelManager.count;i=n.now();e.gloableParames.modelManager.enumModel(function(e){if(e){e.renderModel(l,c)}});s-=n.now()-i;r=requestAnimationFrame(t)})()},1)}function T(){return t}function P(){cancelAnimationFrame(r);t=false;c.copy(new e.Box3)}function D(){I();j();w.add(M)}function I(){if(e.renderParamers._glup){var t=e.renderParamers._glup.domElement;var r=e.renderParamers._glnav.domElement;n=new e.OrthographicCamera(t.width/-2,t.width/2,t.height/2,t.height/-2,-5e4,5e4);o=new THREE.PerspectiveCamera(75,t.width/t.height,.1,5e4);l=n;a=new e.OrthographicCamera(t.width/5/-2,t.width/5/2,t.height/5/2,t.height/5/-2,-1,1);i=new e.OrthographicCamera(r.width/-2,r.width/2,r.height/2,r.height/-2,-1e3,5e4);s=i.clone();k(new e.Vector3(0,0,1));window.addEventListener("resize",q)}}function k(e){o.up.copy(e);n.up.copy(e);a.up.copy(e);i.up.copy(e);s.up.copy(e)}function N(){return l}function U(t){if(t==="ortho"){l=n}else if(t==="pres"){l=o}else{e.logger.warn("摄像机名称只支持， ortho 和 pres，分别对应正交摄像头和透视摄像头")}return l}function _(t,r){e.renderParamers._glup.setSize(t,r,true);e.renderParamers._gl.setSize(t,r,true);n.left=t/-2;n.right=t/2;n.top=r/2;n.bottom=r/-2;n.updateMatrixWorld();n.updateProjectionMatrix();o.aspect=window.innerWidth/window.innerHeight;o.updateProjectionMatrix();a.left=t/-10;a.right=t/10;a.top=r/10;a.bottom=r/-10;a.updateMatrixWorld();a.updateProjectionMatrix();e.loadParamers.processer.style.left=String((t-450)/2)+"px"}function q(t){_(e.renderParamers.container.clientWidth,e.renderParamers.container.clientHeight);e.gloableParames.modelManager.reset()}function H(){return a}function L(){return i}function F(){return s}function O(t){c.union(t);M.position.copy(c.min);var r=(new e.Vector3).copy(c.max);var n=(new e.Vector3).copy(c.min);var o=Math.abs;r.project(l);n.project(l);var a=o(r.x-n.x);var i=o(r.y-n.y);var s=a>i?i:a;l.zoom=1.2/s;l.updateMatrix();l.updateProjectionMatrix();e.gloableParames.clipBox.copy(c);h.target.copy(c.getCenter());h.update(.95,-.78);return m=1.2/s}function z(){var t=c.clone();var r=t.max.distanceTo(t.min);v.copy(new e.Vector3(1,1,1).normalize().multiplyScalar(r));d.copy(new e.Vector3);t.getCenter(d);var n=d.clone();v.add(d);l.position.copy(v);l.lookAt(d)}function V(){h.target.copy(c.getCenter());h.update(.95,-.78);l.zoom=m;l.updateMatrixWorld();l.updateProjectionMatrix();e.gloableParames.clipBox.max.copy(c.max);e.gloableParames.clipBox.min.copy(c.min)}function j(){h=new THREE.OrbitControls(l,e.renderParamers._glup.domElement);h.target.copy(c.getCenter());h.update(.95,-.78);h.addEventListener("change",e.gloableParames.modelManager.reset)}function G(){return h}function W(){var t=(new e.Color).setRGB(1,1,1);var r=(new e.Color).setRGB(.8,.8,.8);var n=1;u.color=r;u.position.copy(d);u.intensity=1;f.position.copy(v);f.intensity=1;f.color=r;f.updateMatrix();f.updateMatrixWorld()}function Y(){return u}function Q(){return f}function X(){return E}function K(){return w}function J(){return b}function Z(){return d}function $(){return m}function ee(){return c}return{run:B,isActive:T,dispose:P,init:D,checkCamera:U,getMainCamera:N,initLights:W,resize:_,getHubCamera:H,getNavCamera:L,getNavtriCamera:F,setZoom:O,setHome:z,getAmbLight:Y,getPointLight:Q,getControl:G,getNavScene:C,getNavControl:R,getOverlayScene:X,getHubScene:J,getScene:K,getHomeTarget:Z,getInitalZoom:$,getGlobalBox:ee,backInitial:V}}()})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(r){var n=t.call(this)||this;n.rmVariable=new e.RenderModelVariable;n.enableHotKey=true;n.controls={};n.model=null;var o=n;n.controls={};o.controlsMap=r.controlsMap;n.handMouseDown=function(){var e;return function(e){if(e.button==0){r.enumeControls(function(t){if(t.isActive===true){t.leftButtonDown(e)}})}else if(e.button==1){r.enumeControls(function(t){if(t.isActive===true){t.rightButtonDown(e)}})}a.addEventListener("mouseup",o.handMouseUp,false)}}();n.handMouseMove=function(){var e;return function(e){r.enumeControls(function(t){if(t.isActive===true){t.mouseMove(e)}})}}()
;n.handMouseUp=function(){var e;return function(t){if(t.button===0){e=r.controlsMap.get("ClickControl");if(e.isActive===true){e.leftButtonUp(t)}r.enumeControls(function(e){if(e.isActive===true&&e.getName()!="ClickControl"){e.leftButtonUp(t)}})}else if(t.button===1){e=r.controlsMap.get("ClickControl");if(e.isActive===true){e.rightButtonUp(t)}r.enumeControls(function(e){if(e.isActive===true&&e.getName()!="ClickControl"){e.rightButtonUp(t)}})}a.removeEventListener("mouseup",o.handMouseUp,false);e=null}}();n.handMouseClick=function(){var e;return function(t){if(t.button===0){e=r.controlsMap.get("ClickControl");if(e.isActive===true){e.leftButtonClick(t)}r.enumeControls(function(e){if(e.isActive===true&&e.getName()!="ClickControl"){e.leftButtonClick(t)}})}else if(t.button===1){e=r.controlsMap.get("ClickControl");if(e.isActive===true){e.rightButtonClick(t)}r.enumeControls(function(e){if(e.isActive===true&&e.getName()!="ClickControl"){e.rightButtonClick(t)}})}}}();n.handKeyDown=function(){var t;var n;return function(t){n=o.getHotKey(t);for(var a in r.hotKeys)if(n==a)if(r.hotKeys[a].isActive==true)r.hotKeys[a].deActive();else r.hotKeys[a].active();for(var a in r.hotKeysNeedLP)if(n==a)if(r.hotKeysNeedLP[a].isActive==false)r.hotKeysNeedLP[a].active();if(n=="ctr+z")o.backUp();r.enumeControls(function(e){if(e.isActive===true){e.keyDown(t)}});if(t.key=="Escape"){r.enumeControls(function(e){if(e.getName()!="ClickControl"&&e.isActive===true&&e.getName()!="ConstructionSectionControl"){e.deActive()}});e._selector.pressKey(t)}}}();n.handKeyUp=function(){var e;return function(e){r.enumeControls(function(t){if(t.isActive===true){t.keyUp(e)}})}}();n.backUp=function(){r.enumeControls(function(e){if(e.isActive===true){e.backUp()}})};n.handMouseOut=function(e){r.enumeControls(function(t){if(t.isActive===true){t.mouseOut(e)}})};n.handMouseOver=function(e){r.enumeControls(function(t){if(t.isActive===true){t.mouseOver(e)}})};n.handTouchStart=function(e){r.enumeControls(function(t){if(t.isActive===true){t.onTouchStart(e)}})};n.handTouchEnd=function(e){r.enumeControls(function(t){if(t.isActive===true){t.onTouchEnd(e)}})};n.handTouchMove=function(e){r.enumeControls(function(t){if(t.isActive===true){t.onTouchMove(e)}})};var a=e.renderParamers._glup.domElement;a.addEventListener("mousedown",n.handMouseDown,false);a.addEventListener("click",n.handMouseClick,false);a.addEventListener("dblclick",n.handMouseClick,false);a.addEventListener("mousemove",o.handMouseMove,false);a.addEventListener("mouseout",o.handMouseOut,false);a.addEventListener("mouseover",o.handMouseOver,false);a.addEventListener("touchstart",o.handTouchStart,false);a.addEventListener("touchend",o.handTouchEnd,false);a.addEventListener("touchmove",o.handTouchMove,false);if(n.enableHotKey){document.addEventListener("keydown",n.handKeyDown,false);document.addEventListener("keyup",n.handKeyUp,false)}n.dispose=function(){a.removeEventListener("mousedown",this.handMouseDown,false);a.removeEventListener("click",this.handMouseClick,false);a.removeEventListener("dblclick",this.handMouseClick,false);a.removeEventListener("mousemove",o.handMouseMove,false);a.removeEventListener("mouseout",o.handMouseOut,false);a.removeEventListener("mouseover",o.handMouseOver,false);a.removeEventListener("touchstart",o.handTouchStart,false);a.removeEventListener("touchend",o.handTouchEnd,false);a.removeEventListener("touchmove",o.handTouchMove,false);if(this.enableHotKey){document.removeEventListener("keydown",this.handKeyDown,false);document.removeEventListener("keyup",this.handKeyUp,false)}this.rmVariable=null;for(var e in o.controls){o.controls[e]=null}o.controls={};o.controls=null};n.disableAllControls=function(){e.logger.debug("disableAllControls");r.enumeControls(function(e){if(e.isActive===true){e.deActive()}});this.getControl("ClickControl").active()};n.setContrlFromName=function(e,t){var n=r.controlsMap.get(e);if(t===true&&n&&n.isActive===false)n.active();else if(t==false&&n&&n.isActive==true)n.deActive()};n.getControl=function(e){return r.controlsMap.get(e)};return n}r.prototype.getHotKey=function(e){var t;if(e.ctrlKey==true)t="ctr";if(e.shiftKey==true)t+="+shift";else if(e.altKey==true)t+="+alt";else if(e.metaKey==true)t+="meta";else t+="+"+e.key.toLowerCase();return t};return r}(THREE.EventDispatcher);e.Controls=t;function r(t){var r=new t;e.controlManager.controlsMap.set(r.getName(),r);if(r.getName()==="ClickControl")r.active();if(r.getHotKey().hotkey!="a")if(r.getHotKey().needLongPress==false)e.controlManager.hotKeys[r.getHotKey().hotkey]=r;else e.controlManager.hotKeysNeedLP[r.getHotKey().hotkey]=r}e.PushControl=r;var n=function(e){__extends(r,e);function r(){var t=e.call(this)||this;t.controlsMap=null;t.constructorMap=null;t.controls=null;t.hotKeys={};t.hotKeysNeedLP={};var r=t;r.controlsMap=new Map;r.constructorMap=new Map;return t}r.prototype.setCallBack=function(e,t){};r.prototype.getCallBack=function(e){};r.prototype.removeCallBack=function(e){};r.prototype.disPose=function(){if(this.controls){this.controls.dispose()}this.controlsMap.clear();this.constructorMap.clear()};r.prototype.initControls=function(){if(this.controls)this.controls.dispose();this.controls=new t(this)};r.prototype.enumeControls=function(e){this.controlsMap.forEach(e)};return r}(THREE.EventDispatcher);e.ControlsManager=n;e.controlManager=new n})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function e(e){this.data=e;var t=this;if(!e)t.data=null;t.children=[];t.cMap=new Map;t.isSelected=true}e.prototype.add=function(e){if(!this.cMap.has(e.data)){this.children.push(e);this.cMap.set(e.data,e)}};e.prototype.has=function(e){return this.cMap.has(e)};e.prototype.sort=function(e){this.sortFunction=e;this.children.sort(e)};e.prototype.get=function(e){return this.cMap.get(e)};return e}();var r=function(r){__extends(n,r);function n(){var e=r.call(this)||this;var t=e;t.areaTree=new Map;t.professionTree=new Map;t.placeTree=new Map;return e}n.prototype.addModel=function(r){var n=new t(r.name);this.areaTree.set(r.id,n);var o=r.getFragmentSet();var a,i,s,l;for(var c=0,u=o.uuids.length;c<u;++c){var f=o.uuids[c];var d=o.getAttributeUUID(f);if(d){a=d.floorName;i=d.major;s=d.category;l=d.categoryName;if(!a)continue;if(!n.has(a)){var v=new t(a);n.add(v)}var m=n.get(a);if(!i)continue;if(!m.has(i)){var h=new t(i);m.add(h)}var p=m.get(i);if(!s)continue;if(!p.has(s)){var g=new t(s);p.add(g)}var y=p.get(s);if(!l)continue;if(!y.has(l)){var x=new t(l);y.add(x)}}}e.logger.debug(n,this.areaTree)};n.prototype.update=function(){this.areaTree.forEach(function(t,r){var n=e.gloableParames.modelManager.getModelParamerFromId(r)})};return n}(THREE.EventDispatcher);e.TreeFilter=r;e.treeFilter=new r})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function e(e){this.bytes4node=36;this.length=e.length;this.capacity=e.capacity;this.raw=e.raw;this.stride=e.stride;this.sstride=e.sstride;this.Fn=e.Fn;this.In=e.In;this.Sn=e.Sn;e=null}e.prototype.setLeftLeaf=function(e,t){this.In[e*this.stride+6]=t};e.prototype.getLeftLeaf=function(e){return this.In[e*this.stride+6]};e.prototype.setFragStart=function(e,t){this.In[e*this.stride+8]=t};e.prototype.getFragStart=function(e){return this.In[e*this.stride+8]};e.prototype.setFragCount=function(e,t){this.Sn[e*this.sstride+14]=t};e.prototype.getFragCount=function(e){return this.Sn[e*this.sstride+14]};e.prototype.setFlags=function(e,t,r,n){this.Sn[e*this.sstride+15]=n<<3|r<<2|t&3};e.prototype.getFlags=function(e){return this.Sn[e*this.sstride+15]};e.prototype.setBox=function(e,t){var r=e*this.stride;var n=this.Fn;if(t instanceof Float32Array){n[r]=t[0];n[r+1]=t[1];n[r+2]=t[2];n[r+3]=t[3];n[r+4]=t[4];n[r+5]=t[5]}else{n[r]=t.min.x;n[r+1]=t.min.y;n[r+2]=t.min.z;n[r+3]=t.max.x;n[r+4]=t.max.y;n[r+5]=t.max.z}};e.prototype.getBox=function(e,t){var r=e*this.stride;var n=this.Fn;t.min.x=n[r];t.min.y=n[r+1];t.min.z=n[r+2];t.max.x=n[r+3];t.max.y=n[r+4];t.max.z=n[r+5]};e.prototype.makeEmpty=function(e){var t=e*this.stride;var r=this.In;r[t+6]=-1;r[t+7]=0;r[t+8]=-1};e.prototype.realloc=function(e){if(this.length+e>this.capacity){var t=0|this.capacity*3/2;if(t<this.length+e)t=this.length+e;var r=new ArrayBuffer(t*this.bytes4node);var n=new Int32Array(r);n.set(this.In);this.capacity=t;this.raw=r;this.Fn=new Float32Array(r);this.In=n;this.Sn=new Uint16Array(r)}};e.prototype.nextNodes=function(e){this.realloc(e);var t=this.length;this.length+=e;for(var r=0;r<e;++r){this.makeEmpty(t+r)}return t};e.prototype.getRaw=function(){return this.raw.slice(0,this.length*this.bytes4node)};return e}();e.BVHNode=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(t,r,n,o){this.LIMIT=.00125;this.boundingBox=new e.Box3;this.overMaterial=new e.NeonPhongMaterial({color:14737632,wireframe:true});this.MAX_U_SHORT=Math.pow(2,16)-1;this.MAX_U_INT=Math.pow(2,32)-1;this.instancedNum=1;this.getProjectArea=function(){var t=new e.Vector3,r=new e.Vector3,n=new e.Vector3,o=new e.Vector3,a=new e.Vector3,i=new e.Vector3,s=new e.Vector3,l=new e.Vector3;var c=[t,r,n,o,a,i,s,l];var u=[[0,1,2,3],[2,3,6,7],[1,2,5,6],[0,1,4,5],[0,2,7,3],[2,5,6,7]];var f,d;var v=new e.Vector2,m=new e.Vector2;function h(e,c){f=e.max;d=e.min;t.copy(f).project(c);s.copy(d).project(c);r.set(f.x,d.y,f.z).project(c);n.set(d.x,d.y,f.z).project(c);o.set(d.x,f.y,f.z).project(c);a.set(f.x,f.y,d.z).project(c);i.set(f.x,d.y,d.z).project(c);l.set(d.x,f.y,d.z).project(c)}function p(e,t,r,n){return Math.abs(v.set(e.x-t.x,e.y-t.y).dot(m.set(e.x-n.x,e.y-n.y)))}function g(){var e=0;for(var t=0;t<u.length;++t){var r=u[t];e+=p(c[r[0]],c[r[1]],c[r[2]],c[r[3]])}return e}return function(e,t){h(e,t);return g()}}();this.frags=t;this.orders=r;this.begin=n;this.end=o;this.count=o-n;this.classType=8455969;this.sortObjects=false;this.sortDone=false;this.renderImmediate=true;this.isRenderScene=true;this.autoUpdate=false;this.overrideMaterial=null}t.prototype.raycast=function(e,t,r){};t.prototype.foreach=function(e,t,r,n){if(this.mesh&&!this.mesh.geometry.hidden){for(var o=0;o<this.fragIds.length;++o)if(t.intersectsBox(this.frags.getBoundingBox(this.fragIds[o]))){e(this.mesh,0);this.mesh.material.wireframe=true;e(this.mesh,0);this.mesh.material.wireframe=false;return}}};return t}();e.RenderBatch=t;var r=function(){function r(r,n,o){var a=o;var i=a.getCount();var s=r;var l=n;var c=0;var u=s.length;var f=new Array(u);function d(e){return s.In[e*9+8]}function v(e){return s.Sn[e*18+14]}function m(t){var r=new e.Box3;var n=t*9;var o=s.Fn;r.min.x=o[n];r.min.y=o[n+1];r.min.z=o[n+2];r.max.x=o[n+3];r.max.y=o[n+4];r.max.z=o[n+5];return r}for(var h=0;h<u;++h){var p=d(h);var g=p+v(h);var y=m(h);f[h]=new t(a,l,p,g)}this.reset=function(){c=0};this.next=function(e){if(!a.hasLoadedComplete()&&c===f.length){c=0}if(c===f.length)return null;while(true){if(++c===f.length){return null}if(e.intersectsBox(m(c))){return f[c]}}};this.done=function(){return c===f.length};this.getCount=function(){return f.length};this.needClear=function(){return c===0}}return r}();e.BVHIterator=r;var n=function(){function r(t){this.frags=null;this.orders=null;this.geomScenes=[];this.sceneMap=null;this.fragsPerScene=333;this.materialIdNo=[];var r=t;var n=r.getCount();var o=0;var a=[];var i=[];var s=[];var l=[];this.frags=r;for(var c=0;c<n;++c){if(t.getMaterial(c).opacity<1){if(e.isNumber(t.mesh2frag[c]))i.push(c);else l.push(c)}else{if(e.isNumber(t.mesh2frag[c]))a.push(c);else s.push(c)}}var u=new Int32Array(i.length+a.length);this.orders=u;function f(e,t){var n=r.getBoundingBox(e);var o=r.getBoundingBox(t);return r.getMaterial(e).id-r.getMaterial(t).id}function d(e){return(e.max.x-e.min.x)*(e.max.y-e.min.y)*(e.max.z-e.min.z)}i.sort(f);a.sort(f);s.sort(f);l.sort(f);for(var c=0;c<a.length;++c)u[c]=a[c];for(var c=0;c<i.length;++c)u[c+a.length]=i[c];a.length=0;i.length=0;this.reset=function(){o=0};this.next=function(){if(!r.hasLoadedComplete()&&o===this.geomScenes.length){o=0}if(o===this.geomScenes.length)return null;var e=this.geomScenes[o++];return e};this.raycast=function(e,t,r){for(var n=0,o=this.geomScenes;n<o.length;n++){var a=o[n];a.raycast(e,t,r)}};this.done=function(){return r.hasLoadedComplete()&&o===this.geomScenes.length};this.getCount=function(){return this.geomScenes.length};this.needClear=function(){return o===0};this.setGeomScenes()}r.prototype.getRenderBach=function(r,n,o){var a=r;var i=0;var s=null;var l=null;var c=20;var u=this.frags.getMaterial(this.orders[r]).id;for(var f=r;f<n;++f){a++;if(this.frags.getState(this.orders[f])!==2)continue;l=this.frags.getGeometry(this.orders[f]);if(l)i+=l.index.count;if(i>65535){if(a-r>1)a--;break}if(a<n&&this.frags.getMaterial(this.orders[a]).id!==this.frags.getMaterial(this.orders[r]).id){break}}e.logger.log(r,a,i,n,o);if(this.materialIdNo[u]===undefined)this.materialIdNo[u]=0;this.materialIdNo[u]++;return{renderBatch:new t(this.frags,this.orders,r,a),lastIndex:a,materialId:this.materialIdNo[u]}};r.prototype.setGeomScenes=function(){this.geomScenes.length=0;var r=this;this.frags.geometryMap.geomsAlloc();this.frags.geometryMap.geoms.forEach(function(n,o){n.map(function(n){var a=new t(r.frags);a.mesh=new e.Mesh;a.mesh.geometry=n;a.mesh.material=r.frags.getMaterialSet().get(o);a.fragIds=n.fragIds;a.boundingBox.copy(n.boundingBox);r.geomScenes.push(a)})});this.frags.geometryMap.instanceGeomtryRb2Frag.forEach(function(n,o){var a=new t(r.frags);a.fragIds=n;a.mesh=new e.Mesh;a.mesh.geometry=o;a.mesh.material=(new e.NeonPhongMaterial).copy(r.frags.getMaterial(n[0]));a.mesh.material.defines["INSTANCED"]=n.length;a.instancedNum=n.length;n.map(function(e){a.boundingBox.union(r.frags.getBoundingBox(e))});r.geomScenes.push(a)})};r.prototype.setVertexsPerScene=function(e){this.fragsPerScene=e};r.prototype.getVertexsPerScene=function(){return this.fragsPerScene};return r}();e.LinearIterator=n;var o;(function(e){e[e["RED"]=1]="RED";e[e["BLUE"]=2]="BLUE";e[e["GREEN"]=3]="GREEN";e[e["YELLOW"]=4]="YELLOW";e[e["OPICATY"]=5]="OPICATY";e[e["CUSTOM"]=6]="CUSTOM"})(o=e.HMATERIAL||(e.HMATERIAL={}));e.colorFactory=function(){function t(t,r,n){var a=0;if(t>6){e.logger.error("Color Error! The colorType's value must be 0 ~ 6.");return undefined}switch(t){case o.RED:{a=2;break};case o.BLUE:{a=0;break};case o.GREEN:{a=1;break};case o.YELLOW:{a=3;break};case o.OPICATY:{a=n;break}case o.CUSTOM:{if(e.isNumber(r))a=e._highLightCM.createHighLightColor(r,n);else e.logger.error("自定义颜色模式需输入颜色数值，颜色数值为RGB三通道值，比如说红色为0xff0000");break}}return a}return{getColorIndex:t}}();var a=function(){function t(e){this.fragSet=e;this.highLightMap=null;this.highLightMap=new Map}t.prototype.push=function(t,r,n,a,i){if(!this.highLightMap.has(t)){r=r===undefined?o.BLUE:r;if(r!==o.OPICATY){this.highLightMap.set(t,{fid:t,color:r,colorValue:a,opicaty:i,needClear:n});this.fragSet.setState(t,4,e.colorFactory.getColorIndex(r,a,i))}else{this.highLightMap.set(t,{fid:t,color:r,colorValue:a,opicaty:i,needClear:true});this.fragSet.setState(t,8,i)}}};t.prototype.clear=function(){this.highLightMap.clear()};t.prototype.reverse=function(e){var t=this;this.highLightMap.forEach(function(r,n){if(e){if(r.needClear){t.fragSet.setState(n,2);t.highLightMap.delete(n)}}else if(!r.needClear){t.fragSet.setState(n,2);t.highLightMap.delete(n)}})};t.prototype.dispose=function(){this.highLightMap=null};t.prototype.getFragIds=function(){var e=[];this.highLightMap.forEach(function(t){e.push(t.fid)});return e};t.prototype.splice=function(t){var r=this;if(e.isNumber(t)){r.__splice(t)}else if(e.isArray(t)){t.map(function(e){r.__splice(e)})}};t.prototype.__splice=function(e){this.highLightMap.delete(e);this.fragSet.setState(e,2)};t.prototype.length=function(){return this.highLightMap.size};t.prototype.enumeHigltMesh=function(e){var t=this;this.highLightMap.forEach(function(r){e(r.fid,t.fragSet)})};return t}();e.HighLightIterator=a})(Neon||(Neon={}));var Neon;(function(e){var t;(function(e){e[e["MOVEFORWARD"]=0]="MOVEFORWARD";e[e["MOVEBACK"]=1]="MOVEBACK";e[e["MOVELEFT"]=2]="MOVELEFT";e[e["MOVERIGHT"]=3]="MOVERIGHT";e[e["UP"]=4]="UP";e[e["DOWN"]=5]="DOWN"})(t=e.MOVESTATE||(e.MOVESTATE={}));var r=function(){function t(t,r,n,o){this._flag=true;var a=this;if(t!=undefined){a._startPoint=(new e.Vector3).copy(t);a._currentPos=(new e.Vector3).copy(t)}if(r!=undefined){a._endPoint=(new e.Vector3).copy(r)}if(n!=undefined&&e.isNumber(n)){a._velocity=n}if(o!=undefined&&e.isNumber(o)){a._accelerated=o}else{o=0}}t.prototype.setStartPoint=function(t){this._startPoint=(new e.Vector3).copy(t);this._currentPos=(new e.Vector3).copy(t)};t.prototype.setEndPoint=function(t){this._endPoint=(new e.Vector3).copy(t)};t.prototype.setVelocity=function(e){this._velocity=e};t.prototype.setAccelerated=function(e){this._accelerated=e};t.prototype.swapPint=function(t,r){var n=(new e.Vector3).copy(t);t.copy(r);r.copy(n)};t.prototype.run=function(t){var r=new e.Vector3;if(this._direction==undefined){r.copy(this._endPoint).sub(this._startPoint).normalize();this._direction=(new e.Vector3).copy(r)}else{r.copy(this._direction)}this._currentPos.add(r.multiplyScalar(this._velocity*t));if(this._currentPos.distanceTo(this._startPoint)>=this._endPoint.distanceTo(this._startPoint)){this.swapPint(this._startPoint,this._endPoint);this._currentPos.copy(this._startPoint);this._direction=(new e.Vector3).copy(this._endPoint).sub(this._startPoint).normalize();if(this._flag==true){this._flag=false}else{this._flag=true}}if(this._flag==true)return this._currentPos.z-this._startPoint.z;else return this._currentPos.z-this._endPoint.z};t.prototype.getPos=function(){return this._currentPos};t.prototype.getHeightDifferce=function(){};t.prototype.setFlag=function(t){this._flag=t;this._direction=(new e.Vector3).copy(this._endPoint).sub(this._startPoint).normalize()};return t}();e.Formula=r;var n=function(){function t(e){this._object=undefined;this._heigth=0;var t=this;if(e!=undefined)t._object=e}t.prototype.run=function(t){if(this._transform_formula!=undefined){this._object.position.z=this._heigth+this._transform_formula.run(t);e.enableUp=true}};t.prototype.setTransformFormula=function(e){this._transform_formula=e};t.prototype.setRotationFormula=function(e){};t.prototype.setScaleFormula=function(e){};t.prototype.setHeight=function(e){this._heigth=e};return t}();e.ObjectAnimate=n;var o=function(){function t(){var t=false;var r=new THREE.Spherical;var n=new THREE.Spherical;var o;var a;var i;var s;var l;var c;function u(u,f,d){if(t){o=f.zoom;var v=false;var m=false;var h=false;if(i==true&&r.phi<n.phi||i==false&&r.phi>n.phi){v=true}else if(s==false&&r.theta>n.theta||s==true&&r.theta<n.theta){m=true}else if(l==true&&o<a||l==false&&o>a){h=true}if(!v&&!m&&!h){t=false;return}if(c){if(i==true&&v){r.phi+=u;if(r.phi>n.phi){r.phi=n.phi}}else if(i==false&&v){r.phi-=u;if(r.phi<n.phi){r.phi=n.phi}}}if(c){if(s==true&&m){r.theta+=u;if(r.theta>n.theta){r.theta=n.theta}}else if(s==false&&m){r.theta-=u;if(r.theta<n.theta){r.theta=n.theta}}}if(l!==undefined){if(l==true&&h){o+=2;if(o>a){o=a}}else if(l==false&&h){o-=2;if(o<a){o=a}}}d.update(r.phi,r.theta);f.zoom=o;f.updateMatrixWorld();f.updateProjectionMatrix();e.enableModel=true}}function f(e,u,f,d){t=true;n.phi=e;n.theta=u;a=f;o=d.zoom;if(n.phi>r.phi){i=true}else if(n.phi<r.phi){i=false}if(n.theta>r.theta){s=true}else if(n.theta<r.theta){s=false}if(a>o){l=true}else if(a<o){l=false}c=true;if(n==r&&o==a){t=false}if(n==r)c=false}function d(e){t=e}this.setAnimateFlag=d;this.setAnimateParas=f;this.animateRotate=u;this.getSpherical=function(){return r}}return t}();e.Animate=o;var a=function(){function r(){var r;var n=0;var o=false;var a=0;var i=0;var s=Math.sin;var l=Math.cos;var c=.01;var u=0;var f;this.getMove=function(){var t=e.controlManager.controls.getControl("WanderControl");r=t.getMoveState();n=t.getYaw();o=t.getKeyDown()};function d(t,r,n){var o=new e.Box3}this.animate=function(u){var f=u.position;var d=e.blendMesh.position;var v=performance.now();var m=(v-a)/1e3;this.getMove();i-=i*10*m;for(var h=0,p=e._objectAnimate.length;h<p;++h)e._objectAnimate[h].run(m);if(o==true){i+=e.params.speed*m*m}if(i>=c){e.enableModel=true;if(e.params.blendLoad==true){e.blendMesh.update(.03);e.blendMesh.play("run",i);e.blendMesh.play("idle",1-i)}}else{if(e.params.blendLoad==true){e.blendMesh.play("idle",1)}a=v;return}if(e.params.persion==false){if(r==t.MOVEFORWARD){f.add(new e.Vector3(-i*s(n),i*l(n)))}else if(r==t.MOVEBACK){f.add(new e.Vector3(i*s(n),-i*l(n)))}else if(r==t.MOVELEFT){f.add(new e.Vector3(-i*l(n),-i*s(n)))}else if(r==t.MOVERIGHT){f.add(new e.Vector3(i*l(n),i*s(n)))}else if(r==t.UP){e.params.initHeight+=i}else if(r==t.DOWN){e.params.initHeight-=i}f.z=e.params.initHeight+e.params.height*e.meter2foot}else{if(r==t.MOVEFORWARD){d.add(new e.Vector3(-i*s(n),i*l(n)))}else if(r==t.MOVEBACK){d.add(new e.Vector3(i*s(n),-i*l(n)))}else if(r==t.MOVELEFT){d.add(new e.Vector3(-i*l(n),-i*s(n)))}else if(r==t.MOVERIGHT){d.add(new e.Vector3(i*l(n),i*s(n)))}else if(r==t.UP){e.params.initHeight+=i}else if(r==t.DOWN){e.params.initHeight-=i}d.z=e.params.initHeight;f.copy(d).add(new e.Vector3(2*Math.sin(n),-2*Math.cos(n),e.params.height*e.meter2foot))}a=v;u.updateMatrix();u.updateMatrixWorld()}}return r}();e.MoveAnimate=a;e._moveAnimate=new a;e._objectAnimate=[];var i=function(t){__extends(r,t);function r(r,n,o,a,i){var s=t.call(this,r,n)||this;s.maxScale=0;s.minScale=0;s.__s=new e.Vector3;s.__e=new e.Vector3;s.p1=new e.Vector2;s.p2=new e.Vector2;s.p3=new e.Vector2;s.p4=new e.Vector2;if(o)s.adaptionMethod=o;else s.adaptionMethod=s.adaptionFromCamera;if(a)s.maxScale=a;else s.maxScale=100;if(i)s.minScale=i;else s.minScale=0;s.maxVec=new e.Vector3;s.minVec=new e.Vector3;return s}r.prototype.adaptionFromCamera=function(t){var r=4/t.zoom;if(!this.prep)this.prep=this.position.clone();if(r>3)r=3;this.scale.set(r,r,r);this.__s.copy(this.axis.startPoint).project(t);this.__e.copy(this.axis.endPoint).project(t);var n=(this.__s.y-this.__e.y)/(this.__s.x-this.__e.x);if(n!==Infinity&&n!==-Infinity){var o=this.__s.y-n*this.__s.x;this.p1.set(-1,-n+o);this.p2.set(1,n+o);this.p3.set((-1-o)/n,-1);this.p4.set((1-o)/n,1)}else{var a=this.__s.x;this.p1.set(-1,-n+a);this.p2.set(1,n+a);this.p3.set(a,-1);this.p4.set(a,1)}var i,s,l=0;if(this.pointInLine(this.p1)){i=this.p1;l++}if(this.pointInLine(this.p2)){if(!i)i=this.p2;else s=this.p2;l++}if(this.pointInLine(this.p3)){if(!i)i=this.p3;else s=this.p3;l++}if(this.pointInLine(this.p4)){if(!i)i=this.p4;else s=this.p4;l++}if(i&&s){this.__s.set(i.x,i.y,this.prep.z).add(this.__e.set(s.x,s.y,this.prep.z)).multiplyScalar(1/2).unproject(t);this.position.copy(this.__s);e.enableUp=true}else{this.position.copy(this.prep)}};r.prototype.pointInLine=function(e){return(e.x>=this.__s.x&&e.x<=this.__e.x&&e.y>=this.__s.y&&e.y<=this.__e.y||e.x>=this.__e.x&&e.x<=this.__s.x&&e.y>=this.__e.y&&e.y<=this.__s.y||e.x>=this.__s.x&&e.x<=this.__e.x&&e.y>=this.__e.y&&e.y<=this.__s.y||e.x>=this.__e.x&&e.x<=this.__s.x&&e.y>=this.__s.y&&e.y<=this.__e.y)&&(e.x>=-1&&e.x<=1)&&(e.y>=-1&&e.y<=1)};return r}(THREE.Mesh);e.SelfAdaptionObject=i})(Neon||(Neon={}));var Neon;(function(e){function t(e,t){return e.max.x>=t.max.x&&e.max.y>=t.max.y&&e.max.z>=t.max.z&&e.min.x<=t.min.x&&e.min.y<=t.min.y&&e.min.z<=t.min.z}e.insectBox=t;function r(e,t){for(var r=0,n=e.length;r<n;++r){if(t==e[r])return true}return false}e.isInArray=r;function n(e,t,r){for(var o=0;o<t.length;++o){var a=r.slice();var i=t[o];if(i.isChecked==true||i.isHalfChecked)a+=i.title;else continue;if(i.children==undefined||i.children.length==0){e.add(a)}else{n(e,i.children,a)}}}e.getNames=n;function o(e){var t=[];e.map(function(e){if(e.length!=0){var r="";for(var n=0;n<e.length;++n){if(e[n]!=" ")r+=e[n]}t.push(r)}});return t}e.filterSpace=o;function a(e,t){var r=Math.abs;if(t.max.x<=e.max.x&&t.min.x>=e.min.x&&t.max.y<=e.max.y&&t.min.y>=e.min.y)return true;else return false}e.inBoxLinking=a;var i=function(){function e(e){this.instance=null;return this.instance||(this.instance=new e)}return e}();e.Single=i;var s={calcVolume:function(){var t=new Map;var r=0;return function(n){if(t.has(n)){return t.get(n)}r=e.coreModel[0].getFragmentSet().calcVolume(n);t.set(n,r);return r}}(),calcLength:function(){var t=new Map;var r=0;function n(t){var r=e.coreModel[0].getFragmentSet();var n=r.getBoundingBoxFromUuid(t);var o=n.max.x-n.min.x;var a=n.max.y-n.min.y;var i=n.max.z-n.min.z;return o>a?o>i?o:i:a>i?a:i}return function(e){if(t.has(e))return t.get(e);r=n(e);t.set(e,r);return r}}(),calcArea:function(){var t=new Map;var r=0;var n,o,a;var i=new e.Vector3,s=new e.Vector3,l=new e.Vector3;var c=Math.abs;function u(t){var r=e.coreModel[0].getFragmentSet();var u=r.uuid2fragid.get(t);var f=0;u&&u.map(function(t){var u=r.getMesh(t);if(!u||!u.geometry||!u.matrix)return;var d=u.geometry;var v=u.matrix;if(!d.attributes||!d.attributes.position)return;var m=d.attributes.position.array;var h=d.index;var p=new e.Vector3;for(var g=0,y=h.count;g<y;g+=3){n=h.getX(g);o=h.getX(g+1);a=h.getX(g+2);i.set(m[n*8]/e.meter2foot,m[n*8+1]/e.meter2foot,m[n*8+2]/e.meter2foot).applyMatrix4(v);s.set(m[o*8]/e.meter2foot,m[o*8+1]/e.meter2foot,m[o*8+2]/e.meter2foot).applyMatrix4(v);l.set(m[a*8]/e.meter2foot,m[a*8+1]/e.meter2foot,m[a*8+2]/e.meter2foot).applyMatrix4(v);f+=c(i.sub(s).dot(l.sub(s)))}});return f}return function(e){if(t.has(e))return t.get(e);r=u(e);t.set(e,r);return r}}(),calcSurfaceArea:function(){var t=new Map;var r=0;function n(t){var r=e.coreModel[0].getFragmentSet();var n=r.getBoundingBoxFromUuid(t);if(!n)return null;return(n.max.x-n.min.x)*(n.max.y-n.min.y)}return function(e){if(t.has(e))return t.get(e);r=n(e);t.set(e,r);return r}}(),calcWallArea:function(){var t=new Map;var r=0;function n(t){var r=e.coreModel[0].getFragmentSet();var n=r.getBoundingBoxFromUuid(t);if(!n)return 0;var o=r.getAttributeUUID(t);var a=parseFloat(o.length)/1e3;return a*(n.max.z-n.min.z)}return function(e){if(t.has(e))return t.get(e);r=n(e);t.set(e,r);return r}}(),calcFloorsArea:function(){var t=new Map;var n=["地下室","一层","二层"];function o(e){var t=new THREE.Mesh(new THREE.PlaneGeometry(e.max.x-e.min.x,e.max.y-e.min.y),new THREE.MeshBasicMaterial({color:255}));t.position.set(e.getCenter().x,e.getCenter().y,-100);return t}function a(a){if(t.size===0){for(var s=0;s<a.getCount();++s){var l=a.getAttribute(s);var c=l.workSet.split("-")[0];if(r(n,c)){var u=t.get(c);var f=a.getBoundingBox(s);if(!u){u=[]}i(u,new e.Box2(new e.Vector2(f.min.x,f.min.y),new e.Vector2(f.max.x,f.max.y)));t.set(c,u)}}}var d=0;t.forEach(function(t,r){for(var n=0;n<t.length;++n){d+=(t[n].max.x-t[n].min.x)*(t[n].max.y-t[n].min.y);if(r==="阁楼"){e.modelsControl.getOverlayScene().add(o(t[n]))}}});console.log(t);return d}var i=function(){var t=new e.Vector2,r=new e.Vector2,n=new e.Vector2,o=new e.Vector2,a=new e.Vector2;var i=[];function l(c,u,f,d){t.set(u.min.x,u.min.y);r.set(u.max.x,u.min.y);n.set(u.max.x,u.max.y);o.set(u.min.x,u.max.y);i.length=0;if(s(t,c))i.push(t);if(s(r,c))i.push(r);if(s(n,c))i.push(n);if(s(o,c))i.push(o);if(i.length===1){var v=i[0];a.set(c.min.x,c.min.y);if(!s(a,c)){f.push((new e.Box2).setFromPoints([a,v]))}a.set(c.max.x,c.min.y);if(!s(a,c)){f.push((new e.Box2).setFromPoints([a,v]))}a.set(c.max.x,c.max.y);if(!s(a,c)){f.push((new e.Box2).setFromPoints([a,v]))}a.set(c.min.x,c.max.y);if(!s(a,c)){f.push((new e.Box2).setFromPoints([a,v]))}return u}else if(i.length===2){var m=i[0],h=i[1];if(m.x===h.x){if(c.max.x>c.max.x){return(new e.Box2).setFromPoints([m.set(c.max.x,m.y),r,n])}else{return(new e.Box2).setFromPoints([m.set(c.min.x,m.y),t,o])}}else if(m.y===h.y){if(c.max.y>c.max.y){return(new e.Box2).setFromPoints([m.set(m.x,c.max.y),n,o])}else{return(new e.Box2).setFromPoints([m.set(m.x,c.min.y),t,r])}}}else if(i.length===4){if(d){f.push(c);return null}else{return c}}else if(i.length===0){if(d){return l(u,c,f,false)}else{f.push(u);return c}}}return function(e,a){var i=e.slice();e.length=0;t.set(a.min.x,a.min.y);r.set(a.max.x,a.min.y);n.set(a.max.x,a.max.y);o.set(a.min.x,a.max.y);for(var s=0,c=i.length;s<c;++s){a=l(i[s],a,e,true);if(a===null)return}e.push(a)}}();function s(e,t){return e.x<t.max.x&&e.x>t.min.x&&e.y>t.min.y&&e.y<t.max.y}return function(){var t=e.coreModel[0].getFragmentSet();return a(t)}}(),calcScore:function(e,t,r,n,o){if(e<n)return 0;if(e>o)return r;var a=Math.abs((r-t)/(o-n));return(e-n)*a+t},calcScore_min:function(e,t,r){if(e>=t)return r;else return 0}};e.assemblyRateStrategis={majorStructure:{vertical:{getScale:function(){var t=0;var r=0;var n=0;var o="";function a(n,a,i){var l=a.getAttributeUUID(n);if(l.comments==="")return;var c=l.comments.split("-");if(c.length===3){if(c[0]==="主体结构"&&c[1].indexOf("竖向")>=0&&c[1].indexOf("非竖向")<0){if(c[2]===o){t+=s.calcVolume(n)/(e.meter2foot*e.meter2foot*e.meter2foot)}r+=s.calcVolume(n)/(e.meter2foot*e.meter2foot*e.meter2foot)}}}return function(i){var s=e.coreModel[0].getFragmentSet();var l=s.uuids;t=0,n=0,r=0;if(i)o="预制";else o="高精度模板施工工艺";for(var c=0,u=l.length;c<u;++c){var f=l[c];a(f,s,i)}if(r===0){e.logger.warn("主体结构-竖向构件的总体积为0");return 0}console.log(t/r,n/r,t,r);return t/r+n/r}}(),getScore:function(t){return s.calcScore(e.assemblyRateStrategis.majorStructure.vertical.getScale(t),20,30,.35,.8)}},nonVertical:{getScale:function(){var t=0;var r=0;function n(r,n){var o=n.getAttributeUUID(r);if(o.comments==="")return;var a=o.comments.split("-");if(a.length===3){if(a[0]==="主体结构"&&a[1].indexOf("非竖向")>=0){if(a[2]==="预制"){t+=s.calcSurfaceArea(r)/(e.meter2foot*e.meter2foot)}}}}return function(){var o=e.coreModel[0].getFragmentSet();var a=o.uuids;t=0,r=0;for(var i=0,s=a.length;i<s;++i){var l=a[i];n(l,o)}r=41.1*25.2*3;if(r===0){e.logger.warn("主体结构-非竖向构件的总体投影面积为0");return 0}console.log("areas",r,t,t/r);return t/r}}(),getScore:function(){return s.calcScore(e.assemblyRateStrategis.majorStructure.nonVertical.getScale(),10,20,.7,.8)}},getTotalScore:function(t){return e.assemblyRateStrategis.majorStructure.vertical.getScore(t)+e.assemblyRateStrategis.majorStructure.nonVertical.getScore()}},wall:{retainingWall:{preRate:function(){var t=0;var r=0;function n(n,o){var a=o.getAttributeUUID(n);var i=a.comments;if(i=="")return;var l=i.split("-");if(l[0]==="围护墙"){if(l[1]==="预制"){t+=s.calcWallArea(n)/(e.meter2foot*e.meter2foot)}r+=s.calcWallArea(n)/(e.meter2foot*e.meter2foot)}}return function(){var o=e.coreModel[0].getFragmentSet();var a=o.uuids;t=0,r=0;for(var i=0,s=a.length;i<s;++i){var l=a[i];n(l,o)}if(r===0){e.logger.warn("围护墙的总体外表面积为0");return 0}return t/r}}(),integration:function(){var t=0;var r=0;var n="";function o(o,a){var i=a.getAttributeUUID(o);var l=i.comments;if(l=="")return;var c=l.split("-");if(c[0]==="围护墙"){if(c[1]==="预制"){if(c[2]===n)t+=s.calcWallArea(o)/(e.meter2foot*e.meter2foot)}r+=s.calcWallArea(o)/(e.meter2foot*e.meter2foot)}}return function(a){var i=e.coreModel[0].getFragmentSet();var s=i.uuids;t=0,r=0;if(a)n="保温、隔热、装饰";else n="保温、隔热";for(var l=0,c=s.length;l<c;++l){var u=s[l];o(u,i)}if(r===0){e.logger.warn("围护墙的总体外表面积为0");return 0}return t/r}}(),getScale:function(){return e.assemblyRateStrategis.wall.retainingWall.preRate()},getScore:function(t){return s.calcScore_min(e.assemblyRateStrategis.wall.retainingWall.preRate(),.8,5)+s.calcScore(e.assemblyRateStrategis.wall.retainingWall.integration(t),2,5,.5,.8)}},brickWall:{preRate:function(){var t=0;var r=0;function n(n,o){var a=o.getAttributeUUID(n);var i=a.comments;if(i=="")return;var l=i.split("-");if(l[0]==="内隔墙"){if(l[1]==="预制"){t+=2*s.calcWallArea(n)/(e.meter2foot*e.meter2foot)}r+=2*s.calcWallArea(n)/(e.meter2foot*e.meter2foot)}}return function(){var o=e.coreModel[0].getFragmentSet();var a=o.uuids;t=0,r=0;for(var i=0,s=a.length;i<s;++i){var l=a[i];n(l,o)}if(r===0){e.logger.warn("围护墙的总体墙面面积为0");return 0}return t/r}}(),integration:function(){var t=0;var r=0;var n="";function o(o,a){var i=a.getAttributeUUID(o);var l=i.comments;if(l=="")return;var c=l.split("-");if(c[0]==="内隔墙"){if(c[1]==="预制"){if(c[2]===n)t+=2*s.calcWallArea(o)/(e.meter2foot*e.meter2foot)}r+=2*s.calcWallArea(o)/(e.meter2foot*e.meter2foot)}}return function(a){var i=e.coreModel[0].getFragmentSet();var s=i.uuids;t=0,r=0;if(a)n="管线、装修";else n="管线";for(var l=0,c=s.length;l<c;++l){
var u=s[l];o(u,i)}if(r===0){e.logger.warn("围护墙的总体墙面面积为0");return 0}return t/r}}(),getScale:function(){return e.assemblyRateStrategis.wall.brickWall.preRate()},getScore:function(t){return s.calcScore_min(e.assemblyRateStrategis.wall.brickWall.preRate(),.5,5)+s.calcScore(e.assemblyRateStrategis.wall.brickWall.integration(t),2,5,.5,.8)}},getTotalScore:function(t,r){return e.assemblyRateStrategis.wall.brickWall.getScore(t)+e.assemblyRateStrategis.wall.retainingWall.getScore(r)}},fitUp:{board:{getScale:function(){var t=0;var r=0;function n(r,n){var o=n.getAttributeUUID(r);var a=o.comments;if(a=="")return;var i=a.split("-");if(i[0]==="楼面"||i[0]==="地面"){if(i[1]==="干式")t+=s.calcSurfaceArea(r)/(e.meter2foot*e.meter2foot)}}return function(){var o=e.coreModel[0].getFragmentSet();var a=o.uuids;t=0,r=0;for(var i=0,s=a.length;i<s;++i){var l=a[i];n(l,o)}r=41.1*25.2*3;if(r===0){e.logger.warn("墙面和地面的总体投影面积为0");return 0}console.log("areas",r,t,t/r);return t/r}}(),getScore:function(){return s.calcScore_min(e.assemblyRateStrategis.fitUp.board.getScale(),.7,6)}},bathroom:{getScale:function(){var t=0;var r=0;function n(n,o){var a=o.getAttributeUUID(n);var i=a.comments;if(i=="")return;var l=i.split("-");if(l[0]==="卫生间"){if(l[1]==="楼面"||l[1]==="地面"){if(l[2]==="干式")t+=s.calcSurfaceArea(n)/(e.meter2foot*e.meter2foot);r+=s.calcSurfaceArea(n)/(e.meter2foot*e.meter2foot)}else if(l[1]==="墙面"){if(l[2]==="干式")t+=s.calcWallArea(n)/(e.meter2foot*e.meter2foot);r+=s.calcWallArea(n)/(e.meter2foot*e.meter2foot)}}}return function(){var o=e.coreModel[0].getFragmentSet();var a=o.uuids;t=0,r=0;for(var i=0,s=a.length;i<s;++i){var l=a[i];n(l,o)}if(r===0){e.logger.warn("卫生间的总体墙面、地面、楼面面积为0");return 0}return t/r}}(),getScore:function(){return s.calcScore(e.assemblyRateStrategis.fitUp.kitchen.getScale(),3,6,.7,.9)}},kitchen:{getScale:function(){var t=0;var r=0;function n(n,o){var a=o.getAttributeUUID(n);var i=a.comments;if(i=="")return;var l=i.split("-");if(l[0]==="厨房"){if(l[1]==="楼面"||l[1]==="地面"){if(l[2]==="干式")t+=s.calcSurfaceArea(n)/(e.meter2foot*e.meter2foot);r+=s.calcSurfaceArea(n)/(e.meter2foot*e.meter2foot)}else if(l[1]==="墙面"){if(l[2]==="干式")t+=s.calcWallArea(n)/(e.meter2foot*e.meter2foot);r+=s.calcWallArea(n)/(e.meter2foot*e.meter2foot)}}}return function(){var o=e.coreModel[0].getFragmentSet();var a=o.uuids;t=0,r=0;for(var i=0,s=a.length;i<s;++i){var l=a[i];n(l,o)}if(r===0){e.logger.warn("厨房的总体墙面、地面、楼面面积为0");return 0}return t/r}}(),getScore:function(){return s.calcScore(e.assemblyRateStrategis.fitUp.bathroom.getScale(),3,6,.7,.9)}},getTotalScore:function(t){var r=0;if(t)r+=6;return r+e.assemblyRateStrategis.fitUp.board.getScore()+e.assemblyRateStrategis.fitUp.kitchen.getScore()+e.assemblyRateStrategis.fitUp.bathroom.getScore()}},calcTotalScore:function(t,r,n,o){return{majorStructureScore:e.assemblyRateStrategis.majorStructure.getTotalScore(o),wallScore:e.assemblyRateStrategis.wall.getTotalScore(r,n),fitUpScore:e.assemblyRateStrategis.fitUp.getTotalScore(t)}}};e.FocusMesh=function(){function t(e,t){var r=new Array;var n=t.getCount();for(var o=0;o<n;++o){var a=t.getUUID(o);if(a==e)r.push(o)}return r}function r(t,r){var n=new THREE.Vector3(t.max.x,t.max.y,t.max.z);var o=new THREE.Vector3(t.min.x,t.min.y,t.min.z);n.project(e.modelsControl.getMainCamera());o.project(e.modelsControl.getMainCamera());var a=Math.abs(n.x-o.x);var i=Math.abs(n.y-o.y);var s=a>i?a:i;var l=r*(1.6/s);l=l>50?50:l;return l}return function(n){e.gloableParames.modelManager.enumModel(function(o){var a=o.getFragmentSet();var i=e.modelsControl.getControl();var s=e.modelsControl.getMainCamera();var l=e.modelsControl.getNavControl();if(a.uuid2fragid.has(n)){var c=t(n,a);var u=a.frag2idx[c[0]];e._selector.emit({type:"_OnPropertyChanged",target:{id:u,isQuick:true,uuid:n}});if(c.length===0||c.length>=a.getCount()){console.log("UUID error, please try again!");return false}var f=a.getBoundingBox(c[0]).clone();i.target.copy(new THREE.Vector3((f.max.x+f.min.x)/2,(f.max.y+f.min.y)/2,(f.max.z+f.min.z)/2));s.updateMatrixWorld();l.getAnimate().getSpherical().copy(i.getSpherical());l.getAnimate().setAnimateParas(i.getSpherical().phi,i.getSpherical().theta,r(f,s.zoom),s);s.updateProjectionMatrix();o.getHighIterator().reverse();i.update();for(var d=0;d<c.length;++d){var v=c[d];o.getHighIterator().push(v,e.HMATERIAL.BLUE)}e.gloableParames.modelManager.reset()}})}}();function l(){var t=e.modelsControl.getControl();var r=e.modelsControl.getNavControl();var n=e.modelsControl.getMainCamera();t.target.copy(e.modelsControl.getHomeTarget());r.getAnimate().getSpherical().copy(t.getSpherical());r.getAnimate().setAnimateParas(t.getSpherical().phi,t.getSpherical().theta,e.modelsControl.getInitalZoom(),n);n.updateMatrixWorld();n.updateProjectionMatrix();e.gloableParames.modelManager.reset()}e.FocusBack=l})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(){var t;var r,n,o,a;var i,s,l,c;var u,f;var d;this.setNavModels=function(){function v(r,n){var o=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAN4SURBVHhe7ZuhTitBFIbPvQqHIMEgEBUEA1g0CkGw7QOUpAgUFoWluqEvAAIEAQuy1JCABAeCBBICPAF3/8kZaHPbS+92/9kd9nzJZGcm3W3y9fR098z010eCGDR+69EgYYLJmGAyJpiMCSZjgsmYYDImmIwJJmOCyZhgMiaYjAkmY4LJmGAyJpiMCSZjgsmYYDImmExQwc/Pz9orD8EEQ+7GxoaOykMQwV7uycmJzpQHuuAyywVUwWWXC6iCp6enZWFhQUclBVun2Ozs7GB7lmtpub29/Xh6etJRPAQRDLzktKyvr7sWm+Rgm/8eHh5kdnYWhnVmdJrNpmxvb7t+o9GQSqXi+qPy/v4uu7u7Ouqn3W5LvV7XEQEIDsH9/X2qCL68vHTnMdvb25u+W/YEe9BIy/z8vCTpRUccrq6utJc9UaQIcHZ2Jmtra5J8E3QmHY+Pj7K8vNx3nYmJCXfHwyAaweOe78nqOqNS+BQROyaYjAkmY4LJmGAyJpiMCSZjgsmYYDImmEymgm9ubrRneDITfHFxIUtLS+5ofJGZ4KOjI3dcWVmRzc1N6Xa7blx6UE0bl+vra5SmBraDgwNXbE9bcPeMe74nq+uMSiYRfHx8rL2/qdVqrjy4tbXlxqXL0yp6bLDsgpXf09PTvlXkYc1H9qjEGsHUd4JwiGw0Gn1yexs+DKSY7zDB3+Dz9DDZWJI/Pz8fugAZq+BclozQ73Q6Lj8PIol6WV1dlcnJSZ0Rubu7k7m5OUk+BJ1JB7Zz4X39daampmRxcdH1KUBwCIZFDqJ2WFQjvSCi0RDhg16TRWMu2+cu2IMUMkz0v3J4Fg0fMovCrSrjNm5/f19arZbOfLG3t6e9bJmZmZFqtaqjjIHgEPzvj8ugiE4EU7/ODAor2IOvb2/+RR/XioXCC/a02+1PyWjYsxYD0QgGeHDpjWbcZRSdqAR7eqMZT4JFJkrBoHdba5ElRysYYLe7TxlFlRy1YI+v3hVR8o8QDPCDV0TJP0YwQC26aJKDC8aRiS+L4qmvCATfF/H6+qo9Dig9JpLdv5IODw91Nj+CC355edEeDy8Zdd/c1wA1kukgNYTOjT5d5PnnxWCC86qC+apcXgSrB5eV4Dm4bJhgMiaYjAkmY4LJmGAyJpiMCSZjgsmYYDImmIwJJmOCyZhgMiaYjAmmIvIHamDOJ4L5oOIAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANwSURBVHhe7ZoxT/pAGMaP/8hiiImDAw4Mjn4RElc2NhN246YxuPIJ9APoaiRszDq6OiKJCUy6uWGf5i458xcU7p6Wts8vedP2aI/ez5e3V9vaIsEIGv/sUpCQYDISTEaCyUgwGQkmI8FkJJiMBJORYDISTEaCyUgwGQkmQxE8HA7N3d2d3ao2FMHtdjtd3tzcpMsqQysRnU7HTKdTc3FxYT4+PmxrPuT5/dQa3O/302W32zWvr6/petbk/gfGIyM25+fneCy1eHx8tC3ZMB6P0++dTCa2JXsyEQyc5MFgYFv4PD8/V0cwuL29TQd8fHy8eHl5sa08ILZSgoH72SKur68X7+/v9hMOpROMn+VvA0L2IotdNjNrc6kEr1PzkLmuLiN6vR5FRKkEb3LV9ksGAhfBmEJKJRgD2WRAs9nsWzbHFF0qwRAVMiDUYlebfdEoPZtSKsEgxoDcdM4P1GiUk3VnHTHOJ4StFAwgEtM4X7ILlJO/ZjX2l+AVoC+UCV+wH/gMpWVZZmMfCV4BygX6g8CHh4f/arQfKCPYx79LRLsEL2HZvBrty8qHHy7zIT0vydFfwK7VaiYZjGk2m7Zlc/AvzoODg5X9PT09mdFoZK6urmzLapIsN61WyxweHpp6vW52d3dNo9Gwn5oo5/2NVHNE0GXMbFmnP5fZq8rIqkDGx6ZUgn1wjLtL/KvwmOftKK1gh3+8k44sxwXRiUUwshdUSvBPuFv0mOfsU/n3IvDcMJllxL+4WSovGLjXDBhIMBnKPDi5dTX7+/u2JYzf5sG/EXNevgkUwbEpsmCVCDKUDE6mPmZnZ8e2hHF6eqoS4RN7QKH9qUSUHAkmI8FkJJiMBJMphODPz0+7VjwKIfjs7MzM53O7VSwKIfj+/t6cnJwUUnJhajAkX15e2q31eHt7s2s5gDu5mKDLmG+voz8Enqvh3bd1cceHvN8WAkXwpjJ+IrQ/JzgvyRTBoVJ8QvvxBSOylkwTjIghOfR4/3wQWQve+ovc3t6eXQsnkWuOjo7sVkZY0dFAl4iYdTgEdz66yJHIUy6ILnib5II85YLoTzRwtxWzbhad6ILFdwpzq1xUJJiMBJORYDISTEaCyUgwGQkmI8FkJJiMBJORYDISTEaCyUgwGQkmI8FkJJiMBJORYDISTEaCyUgwFWO+AIAxxqgCcXoBAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQaSURBVHhe7ZyxLzRPGMef+/0BNEKCkCA6QSMi0dAR0foDkNBSaChoFNQS9CdRCdHRKCip5BISJCSECAU6734ns7KRu/fuvdvv7P12nk+ymWeHO3xudnZmnlmZ7wBRaPxnS4WECiajgsmoYDIqmIwKJqOCyahgMiqYjAomo4LJqGAyKpiMCiajgsmoYDIqmIwKLsD6+rqNKkMF52FpaUlqamrsWWWkTvDb25vs7OzI2dmZrfk3IPf5+VmmpqZsTYUg6emax8fH72w2a8o42dzcRALXHEdHR7a2dPA74bW3t7e2pnKcC15cXPyREOcfAsL3Lee98YHgdeV8MH9D++CAu7s7GR4elpmZGRkaGrK18eBccG1trY2qh9XVVVMuLCyYMk4SbcGtra2SyWRiO8rh4OBANjY2ZG1tTVpaWmxtfDjf2YPx5fz8vIlPT0+lsbHRxHGADywk6IOLCnt6epKGhgYTl/L9ZWF6YocELaXsG1Exwvct9b3D3wUli9Te5Iq1RtzYwitpbGzMlAy8HUXs7u6aEiOHzs5OEzPwUjBme2HrHRkZMSULLwWfnJzYSKitF3gp+PDw0EYqOHbQPWDcC4JpuymZeCf45ubGRiJ9fX024uGd4MvLSxuJ1NXV2YhHagWjK8jH/f29jSTWWWQhvBMcDs8AZWr8C++6CNc4FYzpaXQM6hr8/BDM4FzgTDAuWax27e3t2Zpklyvb29ttxMXpcuXFxYX09PTYM5FsNisDAwP2rDK+vr5kf3//p4/Nt/x4fHxsMhcA679zc3MmpmLW1Bxyfn5ulgiRYGSQy+W+g8s/73JlmHfDgQSpCxLJKse9DlwqUcFxJzcLkcgowsXwqFrwaph2fX1tI3d4Jfj9/d1G7vBKcBKoYDIqmI0dTcROON6t1sPVMI06k/s9cwPIIkxOTtozt2xvb8vKyoqJA8Gx70PLi9FMJNqSsbMySaKbXlIz0eju7jZrDmi5y8vLttYfnNzkJiYmvJQLdBRBRgWTUcFkVDAZFUwmlYKxcx0JThyY7CBVhCOJ5cr/1T8HReIUx+vrq7y8vMjHx4fkcjnzNWSrownVYriayVWd4DC1fnV1ZVoiduKg5YUb9vIxPj4ug4OD5vHXMFvc0dFhSjzVFD7ZhA8H02UkRlMlOLofATw8PJjWF22B0R03hUAmuKmpSerr638ElpN+Qrfx+fkp/f39toaHE8FbW1syPT1tz0oDMnt7e6W5udk8CVSNz9eVgrMuYnZ2tuBljkt8dHRUurq6pK2tzbTQtOBMMLqJ6HNs2LqE5yOwRzdNQn/j9CaHoRJuXLi5pFlqFKeCfURncmRUMBkVTEYFk1HBZFQwGRVMRgWTUcFkVDAZFUxGBZNRwWRUMBkVTEYFk1HBZFQwGRVMReQPYnL6M8+mhQAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAQpSURBVHhe7Zy/LzRBGMefeysURKOk00pUFCoSkUgoqVQktBQa/4CcRlRqCa0QKhqJE4mgFc1dRyRIFLp79zvvM7Hu3bN7a5+dubvnk0xuZvZ++ZibfWbvmStUA0gR4w/fKkKoYGFUsDAqWBgVLIwKFkYFC6OChVHBwqhgYVSwMCpYGBUsjAoWRgULo4KFUcHCOBd8dXXFtWzA852fn3PLPc4Fv7y80OzsbGaiT05OaHx8nLa2tuj9/Z17HYLv5FyzvLyM7wWrxWKx+vb2xr2NUy6XzfPYMjMzUy2VSnzUDV7Mwevr6+Z2bW2NFhYW6OHhwbQb5fLykmtfdHZ2cs0RLNo5+/v730bf3d0dH0kGRn748RsbG3zELd4IrhWE8vT0xEfjCf+DUPcFbwSD2lF8dnbGR34m/M/xSS7wKg4eHh7mWmOcnp6a20Auzc3NmXpS7u/vuSYEi/YGnPnxtlCSRBQ2ckgzcu0nRnLUeycY0wL+6KQnOYR2aU5oVq4tUpIzzU17fn6mz89PbqXn9fWVent7uVWfx8dH2t7eps3NTero6ODeeBDOzc/Pc+uLQHLDU0wsRnNG4Kwf/og3Y8l6JGeeXYlRfH19TYODg2ZU9ff385H2RNNXhWmby5X4ZLm4yua1YEjJCpx8cZUtyyt3SchF8MrKSqoLODs7O0ZIlqIPDw9pdHTUvCfxRUZALnNwoVAwt7u7uzQ5OWnqcdSGUkFcTENDQ9z6zvHxMY2NjVFPTw/3/E+lUqGBgQFuEQXRjnk/fX193CMEBEuDl/lt+Sl8svcJhJmVXRTha8W4/pwXuQjGasv+cUmxKzqUo6Mj7o2mNvaOkhwWjPeTF00RRXR1dXEtGkwPFkwlPsXeLRem1ZunXdE2cbArVLAwKliY3AUjHk1SslxcuCR3wQj2k5So67XNSO6Cg9AwUQniYH5Ec6NzsDAqWBgVLIwKFkYFC6OChcldcNSiIqroQiMlUYuKqKILjZRELSqiii40PMW3qaXlBGeRG5clLSfYN1pC8MXFBdf8oyUEI5kEFIvFH3MjXNASgpFAUi6XaXV1VQVLsLi4GPtVvauv8tvmJJd2c+Nv8Vbw7e0t1+ITTxD7HhwcmPRUW5BBaZfdSPLb29vjexN1d3dzTZ5ckv+QIWlPRLUvhw3bNzc33PoHhIWXyphf4z7ikIjM+qWlJe6pT6lUopGREW4JA8HS4GVsiQI7ipC4F75fuDS6QRx5bfX2iqA/T7wQbIFIbMkK3z/tppSo50JpdA/0b8lVcNK0UfvzBlls6A6P5LzlglzmYPw4xsTEROLEPJyg8EMd09PT3JMeJGd/fHzQ1NSUkxhZdxkJ0zZxsCtUsDAqWBgVLIwKFkYFC6OChVHBwqhgYVSwMCpYGBUsjAoWRgULo4KFUcHCqGBhVLAoRH8BltYTArFMfvYAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAACkUlEQVR4nO3bMY8pURjG8bM3t9LoFAoKhY5ohF5PyReQSHS0FLTzCfgAo9CptbRaOgoJUUgk2rneuXFjl917s/c8zpzx/JLZjbUxJ/89Tuwc3rwLRTA/TA8g7BgYjIHBGBiMgcEYGIyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBXjLwcDhU+/3+OSfzXozruvI2Ba9cLnu73Q5+vpcKPJlM/LjXo9FowM/5Jl90PBM2m42Oh4HZbreqWCze/bzT6aher4c7sa6/1GKxeDc7bDoukXVluKN1iZDI0+nUW6/XWtY3x3H+RJDHtdFPnc+GbDar8+FC4SVfpj0TA4MxMBgDgzEwGAODMTAYA4MxMJjW/+SQxuOxOp/PKpPJqEQiYXo4/8yaGZzL5dRyuVTJZFJVKhU1Go3UarUyPay/siZwKpVSrVbLjxyPx1WtVlPpdDr4sU1fbfrKV1fT5LbsSqiby45yWy6qH49HQyO+Z21gISFvf+f2GAwG/mVT06xZIh6JRqP+sjGfz9Vl9r67r16v++u1bHCaZHXgq0KhoC4z1t/++UhCd7tdA6P6LRSBRSwW8/fWXNe9u6/f7xubyaEJfFWtVh9GlplsYmM2dIHFZ5Fns9nTxxLKwEIif1yTT6fT08cR2sBC1uTbyPl8/uljsOZaxHc1m03/++FwMLLrHfrA11cXpoR6iQgCBgZjYDAGBmNgMAYGY2AwBgZjYDAGBgt04Ha7bXoI/y3QgcOAgcEYGIyBwRgYzIrA8qaSSCRiehjfEugdDcdxVKlUsvoDjto+DE6PWbFE2IyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBGBiMgcEYGIyBwRgYjIHBGBjsFx3Py0BYdS8rAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABYCAYAAABxlTA0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAIKSURBVHhe7du/riFRAIDxYx9CSalUU6olaoXWA2nEE5CovIAH0Gl1FBI6jejudeTIvbvZ7M2a+WRO8v2SiTkj8eczYTJz1D7ugjC/0q0gBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmBc9k8vl8liOx2O4Xq+h1+ulewqKgct0Op0+BoNB/NCyXubzeXpHxSB78Pl8DuPxOKxWq7Tly/2Fh263m0avi3tap9NJoxD2+31aK0+j0UhrBTwyA/62J5e1V0T3oL89dlWhr+x75DLjRrkExn/k4tfFZrMJ/X4/bSnH4XAIzWYzjR6F01q1ZHsUkUtgj4NhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZg2NsCLxaLUKvVSlu+X/CssrdeVY6Rh8NhGn15ZbbPnzN7KntxPAZ+pzgBJT7tc3l1Qooze/7hGbnIbB9n9vxgu92GdrudRv/PiSc/KBI3Jx6mwQwMMzDMwDADwwwMMzDMwDADw7INfLvd0lq1ZRl4vV6HVquVRtWWXeDdbhcmk0kaVV+2f+OKZ+Nms1mYTqePcVXfRraBn+Jpy+VyGUajUajX62lrdWQfuOo8TIMZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgmIFhBoYZGGZgVAif0gGFG+Cm370AAAAASUVORK5CYII="];var a=n.width/2*.75;var i=(new THREE.CubeTextureLoader).load(o);i.format=THREE.RGBFormat;i.minFilter=THREE.LinearFilter;var s=a*4/10;var l=new THREE.CubeGeometry(a/5,a/5,a/5);var c=new THREE.MeshLambertMaterial({color:11974326,emissive:11974326});var u,f,d;for(var v=0;v<8;++v){var m=new e.NeonMesh(l,new THREE.MeshLambertMaterial({color:11974326,emissive:11974326}));m.name="cube"+String(v);u=v>=4?-1:1;f=v>=4?v>=6?-1:1:v>=2?-1:1;d=v%2==1?-1:1;m.position.set(u*s,f*s,d*s);r.add(m)}for(var v=0;v<12;++v){var h=new e.NeonMesh(l,new THREE.MeshLambertMaterial({color:11974326,emissive:11974326}));h.name="cuboid"+String(v);var p=3;if(v<4){h.scale.set(p,1,1);u=0;f=v>=2?-1:1;d=v%2==1?-1:1}else if(v>=4&&v<8){h.scale.set(1,p,1);f=0;u=v>=6?-1:1;d=v%2==1?-1:1}else if(v>=8){h.scale.set(1,1,p);d=0;u=v>=10?-1:1;f=v%2==1?-1:1}h.position.set(u*s,f*s,d*s);r.add(h)}for(var v=0;v<6;++v){var g=new THREE.MeshLambertMaterial({color:11974326,emissive:11974326});g.envMap=i;var y=new e.NeonMesh(l,g);y.name="block"+String(v);var x=3;if(v<2){y.scale.set(x,1,x);u=0;d=0;f=v%2==1?-1:1}else if(v>=2&&v<4){y.scale.set(x,x,1);f=0;u=0;d=v%2==1?-1:1}else if(v>=4){y.scale.set(1,x,x);f=0;d=0;u=v%2==1?-1:1}y.position.set(u*s,f*s,d*s);y.material;r.add(y)}var A=new THREE.Geometry;var b=new THREE.LineDashedMaterial({color:7368816});var E=a/2;A.vertices.push(new THREE.Vector3(-E,E,E),new THREE.Vector3(E,E,E),new THREE.Vector3(E,-E,E),new THREE.Vector3(-E,-E,E),new THREE.Vector3(-E,E,E),new THREE.Vector3(-E,E,-E),new THREE.Vector3(E,E,-E),new THREE.Vector3(E,E,E),new THREE.Vector3(E,E,-E),new THREE.Vector3(E,-E,-E),new THREE.Vector3(E,-E,E),new THREE.Vector3(E,-E,-E),new THREE.Vector3(-E,-E,-E),new THREE.Vector3(-E,E,-E),new THREE.Vector3(-E,-E,-E),new THREE.Vector3(-E,-E,E));t=new THREE.Line(A,b);t.name="line";r.add(t)}function m(t,u){var f=Math.PI;var d=u.width/2;var v=[new THREE.Vector3(-d/8,-d,0),new THREE.Vector3(d/8,-d,0),new THREE.Vector3(0,-d*7/8,0)];var m=[new THREE.Face3(0,1,2)];var h=new THREE.Geometry;h.vertices=v;h.faces=m;var p=new THREE.MeshBasicMaterial({color:14869218});r=new e.NeonMesh(h,p);var g=new THREE.Geometry;var y=new THREE.LineBasicMaterial({color:7368816});g.vertices.push(v[0],v[1],v[2],v[0]);i=new THREE.Line(g,y);var x=d*7/4;n=r.clone();n.rotateZ(f);n.translateOnAxis(new THREE.Vector3(0,0,1),x);s=i.clone();s.rotateZ(f);s.translateOnAxis(new THREE.Vector3(0,0,1),x);o=r.clone();o.rotateZ(-f/2);o.translateOnAxis(new THREE.Vector3(0,0,1),x);l=i.clone();l.rotateZ(-f/2);l.translateOnAxis(new THREE.Vector3(0,0,1),x);a=r.clone();a.rotateZ(f/2);a.translateOnAxis(new THREE.Vector3(0,0,1),x);c=i.clone();c.rotateZ(f/2);c.translateOnAxis(new THREE.Vector3(0,0,1),x)}function h(t,r){var n=r.width/2;var o=r.width*2/3/2;var a=new THREE.CircleGeometry(n,256);var i=new THREE.MeshBasicMaterial({color:13487565});u=new e.NeonMesh(a,i);u.position.set(0,0,-1001);var s=new THREE.CircleGeometry(o,256);var l=new THREE.MeshBasicMaterial({color:e.renderParamers.defaultClearColor.getHex()});f=new e.NeonMesh(s,l);f.position.set(0,0,-1e3);var c=new THREE.ConeGeometry(10,20);d=new THREE.ArrowHelper(new e.Vector3(0,1,0),new e.Vector3(0,0,0),r.width/2,10,r.width/6,r.width/6);d.position.set(0,0,-1000.5)}return function(e,t,r){v(e,r);m(e,r);h(e,r)}}();this.getLineNav=function(){return t};this.getLines=function(){return[s,l,c,i]};this.getMeshs=function(){return[r,n,o,a]};this.getCircles=function(){return[u,f]};this.getArror=function(){return d}}return t}();e.SetMolde=t;var r=function(){function r(){var r;var n;var o=new THREE.Raycaster;var a;var i;var s;var l;var c;var u;var f;var d;var v;var m=new t;var h;var p;var g;var y=new e.Animate;var x=y.getSpherical();var A=this;function b(){var e=m.getLines();var t=m.getMeshs();var r=m.getCircles();var n=m.getArror();i.remove(t[0]);i.remove(t[1]);i.remove(t[2]);i.remove(t[3]);i.remove(e[0]);i.remove(e[1]);i.remove(e[2]);i.remove(e[3]);s.remove(r[0]);s.remove(r[1]);s.remove(n)}function E(){var e=m.getLines();var t=m.getMeshs();var r=m.getCircles();var n=m.getArror();i.add(t[0]);i.add(t[1]);i.add(t[2]);i.add(t[3]);i.add(e[0]);i.add(e[1]);i.add(e[2]);i.add(e[3]);s.add(r[0]);s.add(r[1]);s.add(n)}this.handNavMouseDownEvent=function(){return function(t){g=e.modelsControl.getControl()}}();this.handNavMouseUpEvent=function(){return function(t){g=e.modelsControl.getControl()}}();this.handNavMouseMoveEvent=function(){return function(t){a=e.modelsControl.getNavScene("main");l=e.renderParamers._glnav.domElement;c=e.modelsControl.getNavCamera();h=m.getLineNav();g=e.modelsControl.getControl();var r=new THREE.Vector2;r.x=t.offsetX/l.offsetWidth*2-1;r.y=-(t.offsetY/l.offsetHeight)*2+1;o.setFromCamera(r,c);o.ray.origin.set(r.x,r.y,-1e3).unproject(c);a.remove(h);var n=o.intersectObjects(a.children);a.add(h);if(n.length>0){if(u!=n[0].object){if(u)d.emissive.setHex(v);u=n[0].object;d=u.material;v=d.emissive.getHex();d.emissive.setHex(11192824)}}else{if(u)d.emissive.setHex(v);u=null}e.enableNav=true}}();this.handNavMouseClickEvent=function(){var t=0;var r=0;var n=Math.PI;var o=n/2;var a=n;var i=1;var s=[-Math.PI/2,-Math.PI/2,Math.PI/2,Math.PI/2];var c=[-1,+1,-1,+1];function f(){x.copy(g.getSpherical());function e(e){e=e>n?e-2*n:e;e=e<-n?e+2*n:e;if(e>=3*n/4&&e<=n||e>=-n&&e<-3*n/4)a=n;else if(e>=-3*n/4&&e<-n/4)a=-n/2;else if(e>=-n/4&&e<n/4)a=0;else if(e>=n/4&&e<3*n/4)a=n/2}if(u){if(u.name==="block0"){o=n/2;if(x.theta>0)a=n;else a=-n}else if(u.name==="block1"){o=n/2;a=0}else if(u.name==="block2"){o=0;e(g.getSpherical().theta)}else if(u.name==="block3"){o=n;e(g.getSpherical().theta)}else if(u.name==="block4"){o=n/2;a=n/2}else if(u.name==="block5"){o=n/2;a=-n/2}else if(u.name==="cube0"){o=n/4;a=3*n/4;if(x.theta<0)x.theta+=2*n}else if(u.name==="cube1"){o=3*n/4;a=3*n/4;if(x.theta<0)x.theta+=2*n}else if(u.name==="cube2"){o=n/4;a=n/4}else if(u.name==="cube3"){o=3*n/4;a=n/4}else if(u.name==="cube4"){o=n/4;a=-3*n/4;if(x.theta>0)x.theta-=2*n}else if(u.name==="cube5"){o=3*n/4;a=-3*n/4;if(x.theta>0)x.theta-=2*n}else if(u.name==="cube6"){o=n/4;a=-n/4}else if(u.name==="cube7"){o=3*n/4;a=-n/4}else if(u.name==="cuboid0"){o=n/4;if(x.theta>0)a=n;else a=-n}else if(u.name==="cuboid1"){o=3*n/4;if(x.theta>0)a=n;else a=-n}else if(u.name==="cuboid2"){o=n/4;a=0}else if(u.name==="cuboid3"){o=3*n/4;a=0}else if(u.name==="cuboid4"){o=n/4;a=n/2}else if(u.name==="cuboid5"){o=3*n/4;a=n/2}else if(u.name==="cuboid6"){o=n/4;a=-n/2}else if(u.name==="cuboid7"){o=3*n/4;a=-n/2}else if(u.name==="cuboid8"){if(x.theta<0)x.theta+=2*n;o=n/2;a=3*n/4}else if(u.name==="cuboid9"){o=n/2;a=n/4}else if(u.name==="cuboid10"){if(x.theta>0)x.theta-=2*n;o=n/2;a=-3*n/4}else if(u.name==="cuboid11"){o=n/2;a=-n/4}else return true;y.setAnimateParas(o,a,p.zoom,p);m.getArror().rotation.set(0,0,Math.PI-a);return true}return false}function d(){if(e.isTriPlan){x.copy(g.getSpherical());e.logger.debug("spherical",x);var s=l.width/2;if(t>=s*.75/i&&t<=s*1.25/i&&r>=t+s*.75/i&&r>=s*2.75/i-t){o+=n/2;if(o>n){o=n/2;a+=n;a=a>=n?a-2*n:a}e.logger.debug("down")}else if(t>=s*.75/i&&t<=s*1.25/i&&r<=t-s*.75/i&&r<=s*1.25/i-t){o-=n/2;if(o<0){o=n/2;a+=n;a=a>n?a-2*n:a}e.logger.debug("up")}else if(t>=0&&t<=s*.25/i&&r>=t+s*.75/i&&r<=s*1.25/i-t){if(Math.abs(x.theta+n)<.001)x.theta=+n;else if(Math.abs(x.theta+3*n/4)<.001)x.theta=5*n/4;o=n/2;a-=n/2;a=a<-n?a+2*n:a;e.logger.debug("left")}else if(t>=s*1.75/i&&t<=s*2/i&&r>-t+s*2.75/i&&r<=t-s*.75/i){if(Math.abs(x.theta-n)<.001)x.theta=-n;else if(Math.abs(x.theta-3*n/4)<.001)x.theta=-5*n/4;o=n/2;a+=n/2;a=a>n?a-2*n:a;e.logger.debug("right")}else{return false}y.setAnimateParas(o,a,p.zoom,p);return true}else return false}function v(){return Math.sqrt((t-l.width/2/i)*(t-l.width/2/i)+(r-l.width/2/i)*(r-l.width/2/i))}function h(){if(e.isCircle){var n=l.width/2;var u=l.width/3;var f=l.width/2;var d=m.getArror();if(v()>n/i||v()<u/i)return false;var h=Math.atan(Math.abs(r-f)/Math.abs(t-f));var x=void 0;if(t>=n/i&&r<=n/i)x=0;else if(t>=n/i&&r>=n/i)x=1;else if(t<=n/i&&r>=n/i)x=2;else x=3;o=g.getSpherical().phi;var A=g.getSpherical().theta;if(Math.abs(o-Math.PI)<.001)a=s[x]+-1*c[x]*h;else a=s[x]+c[x]*h;if(Math.abs(A-a)>Math.PI)if(a>=0){a-=Math.PI*2}else{a+=Math.PI*2}d.rotation.set(0,0,Math.PI-a);e.logger.debug(h);y.setAnimateParas(o,a,p.zoom,p);return true}return false}return function(n){p=e.modelsControl.getMainCamera();g=e.modelsControl.getControl();l=e.renderParamers._glnav.domElement;t=n.offsetX;r=n.offsetY;console.log(t,r);e.logger.debug(t,r);if(!f())if(!d())if(!h()){}}}();this.handNavMouseOver=function(){return function(t){i=e.modelsControl.getNavScene("tri");s=e.modelsControl.getNavScene("circle");e.enableNav=true;E()}}();this.handNavMouseOut=function(){return function(t){i=e.modelsControl.getNavScene("tri");s=e.modelsControl.getNavScene("circle");e.enableNav=true;b()}}();this.getAnimate=function(){return y};l=e.renderParamers._glnav.domElement;var w=function(e){A.handNavMouseOver(e);l.addEventListener("mousedown",A.handNavMouseDownEvent,false);l.addEventListener("mouseup",A.handNavMouseUpEvent,false);l.addEventListener("click",A.handNavMouseClickEvent,false);l.addEventListener("mousemove",A.handNavMouseMoveEvent,false)};l.addEventListener("mouseover",w,false);var M=function(e){A.handNavMouseOut(e);l.removeEventListener("mousedown",A.handNavMouseDownEvent,false);l.removeEventListener("mouseup",A.handNavMouseUpEvent,false);l.removeEventListener("click",A.handNavMouseClickEvent,false);l.removeEventListener("mousemove",A.handNavMouseMoveEvent,false)};l.addEventListener("mouseout",M,false);function C(){var t=e.renderParamers._glnav.domElement;t.removeEventListener("mouseover",w,false);t.removeEventListener("mousedown",A.handNavMouseDownEvent,false);t.removeEventListener("mouseup",A.handNavMouseUpEvent,false);t.removeEventListener("click",A.handNavMouseClickEvent,false);t.removeEventListener("mousemove",A.handNavMouseMoveEvent,false);t.removeEventListener("mouseout",M,false)}this.dispose=function(){y=null;m=null;C()};m.setNavModels(e.modelsControl.getNavScene("main"),e.modelsControl.getNavScene("home"),e.renderParamers._glnav.domElement);this.animateRotate=y.animateRotate}return r}();e.Control=r;var n=function(){function e(){}return e}();e.RenderModelVariable=n;var o;(function(e){e[e["ONETOONE"]=0]="ONETOONE";e[e["GEOTOGEO"]=1]="GEOTOGEO";e[e["ONETOMANY"]=2]="ONETOMANY";e[e["ANGLE"]=3]="ANGLE"})(o=e.MEASURE||(e.MEASURE={}));var a=function(e){__extends(t,e);function t(t){var r=e.call(this)||this;r.isActive=false;r.mainControls=null;r.events=null;r.mainControls=t;r.events={regist:{type:"regist"},unRegist:{type:"unRegist"},leftButtonDown:{type:"leftButtonDown"},rightButtonDown:{type:"rightButtonDown"},mouseMove:{type:"mouseMove"},onTouchStart:{type:"onTouchStart"},onTouchEnd:{type:"onTouchEnd"},onTouchMove:{type:"onTouchMove"},mouseOut:{type:"mouseOut"},mouseOver:{type:"mouseOver"},keyDown:{type:"keyDown"},keyUp:{type:"keyUp"},leftButtonUp:{type:"leftButtonUp"},rightButtonUp:{type:"rightButtonUp"},wheel:{type:"wheel"},leftButtonClick:{type:"leftButtonClick"},rightButtonClick:{type:"rightButtonClick"}};r.dispatchEvent;return r}t.prototype.afterDecorator=function(e,t){return function(r){e(r);t.dispatchEvent(t.events[e.name])}};t.prototype.beforeDecorator=function(e,t){return function(r){t.dispatchEvent(t.events[e.name]);e(r)}};t.prototype.initEvent=function(e){e.regist=e.afterDecorator(e.beforeDecorator(e.regist,e),e);e.unRegist=e.afterDecorator(e.beforeDecorator(e.unRegist,e),e);e.leftButtonDown=e.afterDecorator(e.beforeDecorator(e.leftButtonDown,e),e);e.rightButtonDown=e.afterDecorator(e.beforeDecorator(e.rightButtonDown,e),e);e.mouseMove=e.afterDecorator(e.beforeDecorator(e.mouseMove,e),e);e.onTouchStart=e.afterDecorator(e.beforeDecorator(e.onTouchStart,e),e);e.onTouchStart=e.afterDecorator(e.beforeDecorator(e.onTouchStart,e),e);e.onTouchEnd=e.afterDecorator(e.beforeDecorator(e.onTouchEnd,e),e);e.onTouchMove=e.afterDecorator(e.beforeDecorator(e.onTouchMove,e),e);e.keyDown=e.afterDecorator(e.beforeDecorator(e.keyDown,e),e);e.keyUp=e.afterDecorator(e.beforeDecorator(e.keyUp,e),e);e.leftButtonUp=e.afterDecorator(e.beforeDecorator(e.leftButtonUp,e),e);e.rightButtonUp=e.afterDecorator(e.beforeDecorator(e.rightButtonUp,e),e);e.wheel=e.afterDecorator(e.beforeDecorator(e.wheel,e),e);e.leftButtonClick=e.afterDecorator(e.beforeDecorator(e.leftButtonClick,e),e);e.rightButtonClick=e.afterDecorator(e.beforeDecorator(e.rightButtonClick,e),e);e.unRegist=e.afterDecorator(e.beforeDecorator(e.unRegist,e),e)};t.prototype.active=function(){this.isActive=true;this.regist()};t.prototype.deActive=function(){this.isActive=false;this.unRegist()};t.prototype.leftButtonDown=function(e){};t.prototype.rightButtonDown=function(e){};t.prototype.mouseMove=function(e){};t.prototype.onTouchStart=function(e){};t.prototype.onTouchEnd=function(e){};t.prototype.onTouchMove=function(e){};t.prototype.mouseOut=function(e){};t.prototype.mouseOver=function(e){};t.prototype.keyDown=function(e){};t.prototype.keyUp=function(e){};t.prototype.leftButtonUp=function(e){};t.prototype.rightButtonUp=function(e){};t.prototype.wheel=function(e){};t.prototype.leftButtonClick=function(e){};t.prototype.rightButtonClick=function(e){};t.prototype.getHotKey=function(){return{hotkey:"a",needLongPress:false}};t.prototype.backUp=function(){};return t}(THREE.EventDispatcher);e.BaseControl=a})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;r.hlSet=null;var n=r;var o=null;var a;var i;r.regist=function t(){a=new e.Vector2;i=new e.Vector2;n.hlSet=new Set;e.logger.debug("click control active")};r.unRegist=function t(){a=null;i=null;n.hlSet=null;e.logger.debug("click control deActive")};r.leftButtonDown=function t(r){if(r.button==0){a.x=r.offsetX/e.renderParamers._glup.domElement.offsetWidth*2-1;a.y=-(r.offsetY/e.renderParamers._glup.domElement.offsetHeight)*2+1}};r.leftButtonUp=function t(r){if(r.button==0){i.x=r.offsetX/e.renderParamers._glup.domElement.offsetWidth*2-1;i.y=-(r.offsetY/e.renderParamers._glup.domElement.offsetHeight)*2+1}};r.leftButtonClick=function t(){var r;var s;var l=null;function c(){s=null;l=null}function u(t){if(t.ctrlKey!==true){e.gloableParames.modelManager.enumModel(function(t){t.getHighIterator().reverse();e._selector.clear()});n.hlSet.clear()}r=e.gloableParames.modelManager.raycast(i,e.modelsControl.getMainCamera());if(r.length>0){r.sort(function(e,t){return e.distance-t.distance});n.pushHighLight(s=r[0],false,t.ctrlKey)}if(s){var o={uuid:s.uuid,isSelected:true};e.taskApis.setPropers([o],!t.ctrlKey);e.taskApis.runCallBack();e.tpTestApi.runCallBack()}else{e.taskApis.setPropers([],!t.ctrlKey);e.taskApis.runCallBack()}}function f(t){e.gloableParames.modelManager.enumModel(function(t){t.getHighIterator().reverse();e._selector.clear()});r=e.gloableParames.modelManager.raycast(i,e.modelsControl.getMainCamera());if(r.length>0){r.sort(function(e,t){return e.distance-t.distance});n.pushHighLight(s=r[0],true)}if(s){var o={uuid:s.uuid,isSelected:true};e.taskApis.setPropers([o],!t.ctrlKey);e.taskApis.runCallBack();e.tpTestApi.runCallBack()}else{e.taskApis.setPropers([],!t.ctrlKey);e.taskApis.runCallBack()}}return function e(t){if(a.x==i.x&&a.y==i.y){var r=250;c();switch(t.type){case"click":{clearTimeout(o);o=setTimeout(function(){u(t)},r);break}case"dblclick":{clearTimeout(o);f(t);break}default:}}}}();r.getName=function(){return"ClickControl"};n.initEvent(n);return r}r.prototype.pushHighLight=function(t,r,n){var o=e.gloableParames.modelManager.getModelParamerFromId(t.modelId).model;var a=new e.Box3;var i=e.modelsControl.getControl();if(o){if(e.isNumber(t.fragId)){o.getHighIterator().push(t.fragId,e.HMATERIAL.BLUE);a.union(o.fragSet.getBoundingBox(t.fragId))}else if(e.isArray(t.fragId)){t.fragId.map(function(t){o.getHighIterator().push(t,e.HMATERIAL.BLUE);a.union(o.fragSet.getBoundingBox(t))})}if(r===true){var s=i.getSpherical();i.target.copy(a.getCenter());i.update(s.phi,s.theta);e.gloableParames.modelManager.reset()}if(n===true){if(this.hlSet.has(t.uuid)){o.getHighIterator().splice(t.fragId);this.hlSet.delete(t.uuid)}else this.hlSet.add(t.uuid)}else{this.hlSet.add(t.uuid)}}};r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.ClickControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=r;var o=undefined;var a;var i;var s;var l;var c;var u;var f;var d;var v;var m;a=new e.Vector2;l=new e.Vector2;i=new e.Raycaster;var h=new THREE.LineBasicMaterial({color:16711680});var p=new THREE.Line;p.material=h;var g=[1,2,2,3,3,4,4,1,5,6,6,7,7,8,8,5,1,5,2,6,3,7,4,8];var y=null;var x=null;r.regist=function t(){y=e.modelsControl.getControl();x=e.modelsControl.getOverlayScene()};r.unRegist=function t(){y.enabled=true;x.remove(p);p.geometry=new e.Geometry;if(o!=undefined)w()};function A(e,t){y.enabled=false;a.x=e;a.y=t;o=C(a,i);x.add(p)}r.leftButtonDown=function t(r){var n=r.offsetX/e.renderParamers._gl.domElement.offsetWidth*2-1;var o=-(r.offsetY/e.renderParamers._gl.domElement.offsetHeight)*2+1;A(n,o)};r.onTouchStart=function t(r){var n=e.renderParamers._gl.domElement.getBoundingClientRect();var o=(r.touches[0].pageX-n.left)/n.width*2-1;var a=-((r.touches[0].pageY-n.top)/n.height)*2+1;A(o,a)};function b(){if(o!=undefined){s=C(l,i);c=C(new e.Vector2(a.x,l.y),i);u=C(new e.Vector2(l.x,a.y),i);f=S(o,i.ray.direction);d=S(s,i.ray.direction);m=S(u,i.ray.direction);v=S(c,i.ray.direction);var t=new e.Geometry;t.vertices.push(o,c,s,u,o);p.geometry=t;e.enableUp=true}}r.mouseMove=function t(r){l.x=r.offsetX/e.renderParamers._gl.domElement.offsetWidth*2-1;l.y=-(r.offsetY/e.renderParamers._gl.domElement.offsetHeight)*2+1;b()};r.onTouchMove=function t(r){var n=e.renderParamers._gl.domElement.getBoundingClientRect();l.x=(r.touches[0].pageX-n.left)/n.width*2-1;l.y=-((r.touches[0].pageY-n.top)/n.height)*2+1;b()};r.mouseOut=function e(t){};r.mouseOver=function t(r){y.enabled=true;x.remove(p);p.geometry=new e.Geometry;if(o!=undefined)w(r)};function E(t,r){var n;var i;var h;var y;var x;var A;var b;var E;var w=new Set;var M=r.getFragmentSet();var C=[];var S=[];var R=new Array;R.push(o,c,s,u,f,v,d,m);var B=a.y>l.y?false:true;var T=M.getCount();if(!a.equals(l)){if(t&&t.ctrlKey!=true){e._selector.clear()}for(var P=0;P<T;++P){n=M.getBoundingBox(P);h=n.min;i=n.max;y=true;for(var D=0;D<g.length;D+=2){x=R[g[D]-1].clone();x.sub(R[g[D+1]-1]);A=R[g[D]-1].clone();A.sub(h);b=R[g[D]-1].clone();b.sub(i);E=B===true?x.dot(A)<0&&x.dot(b)<0:x.dot(A)<0||x.dot(b)<0;if(E){y=false;break}}if(y===true&&M.getState(P)!=1){if(e.enableFloor&&e.zmax!=null&&e.zmin!=null){if(n.max.z>=e.zmax&&n.min.z<e.zmin||n.max.z>e.zmin&&n.min.z<=e.zmin||n.max.z<=e.zmax&&n.min.z>=e.zmin){w.add(M.frag2idx[P]);var I=M.idx2frag[M.frag2idx[P]];if(e.isNumber(I))r.getHighIterator().push(I);else if(e.isArray(I)){for(var k=0;k<I.length;++k){r.getHighIterator().push(I[k])}}}}else{w.add(M.frag2idx[P]);var I=M.idx2frag[M.frag2idx[P]];if(e.isNumber(I))r.getHighIterator().push(I);else if(e.isArray(I)){for(var k=0;k<I.length;++k){r.getHighIterator().push(I[k])}}}}}w.forEach(function(e){C.push(M.uuids[e]);var t={uuid:M.uuids[e],isSelected:true};S.push(t)})}e._selector.add(C);e.modelsControl.getControl().enabled=true;p.geometry=new e.Geometry;e.modelsControl.getOverlayScene().remove(p);o=undefined;e.enableUp=true
;var N=t&&t.ctrlKey&&t.ctrlKey==true?false:true;e.taskApis.setPropers(S,N);e.taskApis.runCallBack()}function w(t){e.gloableParames.modelManager.enumModel(function(e){E(t,e)})}r.onTouchEnd=function t(r){e.gloableParames.modelManager.enumModel(function(e){E(r,e)})};r.leftButtonUp=function e(t){w(t)};function M(e,t){for(var r=0;r<e.length;r++){if(e[r]==t){e.splice(r,1);break}}}r.leftButtonClick=function e(t){};r.getHotKey=function(){return{hotkey:"ctr+alt",needLongPress:false}};function C(t,r){r.setFromCamera(t,e.modelsControl.getMainCamera());return r.ray.origin.clone().add(r.ray.direction)}function S(t,r){var n=(new e.Vector3).copy(r).multiplyScalar(e.modelsControl.getMainCamera().far);return(new e.Vector3).copy(t).add(n)}r.getName=function(){return"RegionControl"};r.backUp=function(){};n.initEvent(n);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.RegionControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(e){__extends(t,e);function t(t,r){var n=e.call(this,t)||this;n.hasUvMatrix=false;n.uvMatrix=[];if(r!=undefined){n.hasUvMatrix=true;n.uvMatrix=r}return n}t.prototype.setUvMatrix=function(e){this.hasUvMatrix=true;this.uvMatrix=e};t.prototype.getUvMatrix=function(){return this.uvMatrix};return t}(THREE.MeshPhongMaterial);e.RadonPhongMaterial=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(r){var n=t.call(this,r)||this;n.camera=new THREE.OrthographicCamera(-1,1,1,-1,0,1);n.scene=new THREE.Scene;n.length=0;n.dom=e.renderParamers._gl.domElement;return n}r.prototype.render=function(e){return this};r.prototype.setShader=function(){return this};r.prototype.resize=function(e,t){return this};r.prototype.setScene=function(){var t=new THREE.PlaneBufferGeometry(2,2,0,0);var r=new THREE.Mesh(t,this);r.material;var n=new e.AmbientLight(16777215);this.scene.add(r);return this};return r}(THREE.ShaderMaterial);e.RadonShaderMaterial=t;var r=function(t){__extends(r,t);function r(r,n){var o=t.call(this,n)||this;o.shader=new e.RadonShader(e.SHADERNAME.FXAASHADER);o.resolution=new THREE.Vector2(1/o.dom.width,1/o.dom.height);o.inRenderTarget=r!=undefined?r:undefined;o.setShader();o.setScene();return o}r.prototype.resize=function(e,t){this.uniforms.resolution.value.set(1/e,1/t);this.setShader();return this};r.prototype.render=function(e){var t=new Uint8Array(4);e.render(this.scene,this.camera);return this};r.prototype.setShader=function(){this.uniforms=this.shader.getUniforms();this.uniforms.tDiffuse.value=this.inRenderTarget.texture;this.uniforms.resolution.value=this.resolution;this.vertexShader=this.shader.getVertexShader();this.fragmentShader=this.shader.getFragmentShader();return this};r.prototype.setInRenderTarget=function(e){this.inRenderTarget=e;this.setShader();return this};return r}(t);e.FXAAShaderMaterial=r;var n=function(t){__extends(r,t);function r(r,n){var o=t.call(this,n)||this;o.shader=new e.RadonShader(e.SHADERNAME.BLENDSHADER);o.renderTartgets=[];o.outRenderTarget=new THREE.WebGLRenderTarget(o.dom.width*4,o.dom.height*4);o.outRenderTarget.texture.format=THREE.RGBAFormat;o.outRenderTarget.texture.type=THREE.FloatType;o.outRenderTarget.texture.anisotropy=1;o.outRenderTarget.texture.minFilter=THREE.LinearFilter;o.outRenderTarget.texture.magFilter=THREE.LinearFilter;o.outRenderTarget.texture.generateMipmaps=false;o.outRenderTarget.stencilBuffer=false;o.outRenderTarget.depthBuffer=false;o.renderTartgets=r==undefined?[]:r;o.setShader();o.setScene();return o}r.prototype.resize=function(e,t){this.outRenderTarget.setSize(e,t);this.setShader();return this};r.prototype.setRenderTargets=function(e){this.renderTartgets=e.length>=2?e:[];this.setShader();return this};r.prototype.getRenderTargets=function(){return this.renderTartgets};r.prototype.setShader=function(){if(this.renderTartgets.length==2){this.uniforms=this.shader.getUniforms();this.uniforms.tDiffuseBaseModelAndAddModel.value=this.renderTartgets[0].texture;this.uniforms.tDiffuseAssistModel.value=this.renderTartgets[1].texture;this.uniforms.tDepthBaseModelAndAddModel.value=this.renderTartgets[0].depthTexture;this.uniforms.tDepthAssistModel.value=this.renderTartgets[1].depthTexture;this.uniforms.size.value=new e.Vector2(this.dom.width,this.dom.height);this.uniforms.resolution.value=new e.Vector2(1/this.dom.width,1/this.dom.height);this.vertexShader=this.shader.getVertexShader();this.fragmentShader=this.shader.getFragmentShader()}else{console.log("renderTarget Error！")}return this};r.prototype.getRenderTarget=function(){return this.outRenderTarget};r.prototype.render=function(e){var t=new Uint8Array(4);e.render(this.scene,this.camera);return this};return r}(t);e.BlendShaderMaterial=n;var o=function(t){__extends(r,t);function r(r,n){var o=t.call(this,n)||this;o.shader=new e.RadonShader(e.SHADERNAME.SMAASHADER);o.resolution=new THREE.Vector2(1/o.dom.width,1/o.dom.height);o.inRenderTarget=r!=undefined?r:undefined;o.setShader();o.setScene();return o}r.prototype.resize=function(e,t){this.uniforms.resolution.value.set(1/e,1/t);this.setShader();return this};r.prototype.render=function(e){e.render(this.scene,this.camera);return this};r.prototype.setShader=function(){this.defines=this.shader.getDefins();this.uniforms=this.shader.getUniforms();this.uniforms.tDiffuse.value=this.inRenderTarget.texture;this.uniforms.resolution.value=this.resolution;this.vertexShader=this.shader.getVertexShader();this.fragmentShader=this.shader.getFragmentShader();return this};r.prototype.setInRenderTarget=function(e){this.inRenderTarget=e;this.setShader();return this};return r}(t);e.SMAAShaderMaterial=o;var a=function(){function e(e,t){this.shaderArray=[];var a=new n(e,t);var i=new r(a.getRenderTarget(),t);var s=new o(a.getRenderTarget(),t);this.shaderArray.push(a)}e.prototype.render=function(e){for(var t=0;t<this.shaderArray.length;++t){var r=this.shaderArray[t];r.render(e)}};e.prototype.resize=function(e,t){for(var r=0;r<this.shaderArray.length;++r){this.shaderArray[r].resize(e,t)}return this};return e}();e.BlendRender=a})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=r;var o=undefined;var a;var i;var s;var l;var c;var u;var f;var d;var v;var m;var h=.01;var p=new THREE.LineBasicMaterial({color:16711680});var g=new THREE.Line;g.material=p;var y=[];r.regist=function t(){a=new e.Vector2;l=new e.Vector2;i=new e.Raycaster;e.controlManager.controls.getControl("ClickControl").deActive()};r.unRegist=function t(){a=null;l=null;o=undefined;s=null;u=null;c=null;f=null;d=null;m=null;v=null;i=null;e.controlManager.controls.getControl("ClickControl").active()};function x(){e.modelsControl.getControl().enabled=false;o=E(a,i);e.modelsControl.getOverlayScene().add(g)}r.leftButtonDown=function t(r){a.x=r.offsetX/e.renderParamers._glup.domElement.offsetWidth*2-1;a.y=-(r.offsetY/e.renderParamers._glup.domElement.offsetHeight)*2+1;x()};r.onTouchStart=function t(r){var n=e.renderParamers._glup.domElement.getBoundingClientRect();a.x=(r.touches[0].pageX-n.left)/n.width*2-1;a.y=-((r.touches[0].pageY-n.top)/n.height)*2+1;x()};function A(){if(o!=undefined){s=E(l,i);c=E(new e.Vector2(a.x,l.y),i);u=E(new e.Vector2(l.x,a.y),i);f=w(o,i.ray.direction);d=w(s,i.ray.direction);m=w(u,i.ray.direction);v=w(c,i.ray.direction);var t=new e.Geometry;t.vertices.push(o,c,s,u,o);g.geometry=t;e.enableUp=true}}r.mouseMove=function t(r){l.x=r.offsetX/e.renderParamers._glup.domElement.offsetWidth*2-1;l.y=-(r.offsetY/e.renderParamers._glup.domElement.offsetHeight)*2+1;A()};r.onTouchMove=function t(r){var n=e.renderParamers._glup.domElement.getBoundingClientRect();l.x=(r.touches[0].pageX-n.left)/n.width*2-1;l.y=-((r.touches[0].pageY-n.top)/n.height)*2+1;A()};function b(){var t=e.modelsControl.getMainCamera();var r=e.modelsControl.getControl();if(Math.abs(a.x-l.x)>h&&Math.abs(a.y-l.y)>h){var n=(new e.Vector2).copy(a).add(l).divideScalar(2);i.setFromCamera(n,t);var s=r.getSpherical();M(s.phi,s.theta,t.zoom*(2/Math.abs(a.x-l.x)),(new e.Vector3).copy(i.ray.origin).add((new e.Vector3).copy(i.ray.direction).multiplyScalar(1e3)));y.push({phi:s.phi,theta:s.theta,zoom:t.zoom,target:(new e.Vector3).copy(r.target)});o=undefined;g.geometry=new e.Geometry}r.enabled=true;e.modelsControl.getOverlayScene().remove(g)}r.leftButtonUp=function t(){var r=new e.Raycaster;var n=new e.Vector2;return function(e){b()}}();r.onTouchEnd=function e(t){b()};r.getHotKey=function(){return{hotkey:"ctr+a",needLongPress:false}};r.getName=function(){return"AmplifierControl"};r.backUp=function(){if(y.length>0){var e=y.pop();M(e.phi,e.theta,e.zoom,e.target)}};function E(t,r){r.setFromCamera(t,e.modelsControl.getMainCamera());return r.ray.origin.clone().add(r.ray.direction)}function w(t,r){var n=(new e.Vector3).copy(r).multiplyScalar(e.modelsControl.getMainCamera().far);return(new e.Vector3).copy(t).add(n)}function M(t,r,n,o){var a=e.modelsControl.getMainCamera();var i=e.modelsControl.getControl();i.target.copy(o);a.zoom=n;i.update(t,r);a.updateMatrixWorld();a.updateProjectionMatrix()}n.initEvent(n);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.AmplifierControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(t){this.rmVariable=new e.RenderModelVariable;this.InitRenderModelVaiables(t);var r=new e.SetMolde;var n=new e.Animate}t.prototype.InitRenderModelVaiables=function(e){};return t}()})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=null;var o=[];var a=[];var i=e.gloableParames.clipBox;var s=new THREE.BoxHelper(i,new THREE.Color(255));var l=e.modelsControl.getGlobalBox();var c=r;var u=e.modelsControl.getOverlayScene();r.createArrors(o,a,l);function f(t){c.setArrorsScale(o,a,c.getScale(l,e.modelsControl.getMainCamera()));c.setArrorsPosition(o,a,i,c.getScale(l,e.modelsControl.getMainCamera()))}c.regist=function t(){var r=e.modelsControl.getMainCamera();var d=e.renderParamers._glup.domElement;var v=e.modelsControl.getControl();s.update(i);u.add(s);c.setArrorsPosition(o,a,i,c.getScale(l,r));for(var m=0,h=o.length;m<h;m++){u.add(o[m]);u.add(a[m])}d.addEventListener("wheel",f,false);n=new THREE.DragControls(o,r,d,true,i);n.addEventListener("dragstart",function(e){v.enabled=false});n.addEventListener("dragend",function(e){v.enabled=true});c.setClipingPlans(e.renderParamers._gl,i);e.controlManager.controls.getControl("ClickControl").deActive();e.gloableParames.modelManager.enumModel(function(e){e.getHighIterator().reverse()});e.enableModel=true;e.enableUp=true;c.setArrorsScale(o,a,c.getScale(l,r));c.setArrorsPosition(o,a,i,c.getScale(l,r))};c.unRegist=function t(){var r=e.renderParamers._glup.domElement;u.remove(s);for(var i=0,l=o.length;i<l;i++){u.remove(o[i]);u.remove(a[i])}r.removeEventListener("wheel",f,false);if(n!=null){n.dispose();n=null}e.enableUp=true;e.enableModel=true;e.controlManager.controls.getControl("ClickControl").active()};c.getHotKey=function(){return{hotkey:"ctr+b",needLongPress:false}};c.leftButtonClick=function e(){};function d(){var t=e.modelsControl.getMainCamera();var r=e.modelsControl.getControl();s.update(i);c.setArrorsPosition(o,a,i,c.getScale(l,t));c.changeClipingPlans(e.renderParamers._gl,i);c.setCamera(t,r,i);if(n.getSelected()!=undefined)e.enableModel=true}c.mouseMove=function e(){return function(e){d()}}();c.onTouchMove=function t(r){var n=e.modelsControl.getMainCamera();switch(r.touches.length){case 1:d();break;case 2:{c.setArrorsScale(o,a,c.getScale(l,n));c.setArrorsPosition(o,a,i,c.getScale(l,n));break}default:break}};r.getName=function(){return"PartitionControl"};c.initEvent(c);return r}r.prototype.createArrors=function(t,r,n){var o=Math.PI;var a=[];var i=new e.Vector3;var s=new THREE.Euler;var l=new THREE.Vector3;var c=new THREE.ConeGeometry(5,30,6);var u=new THREE.Geometry;var f=11006;var d=65280;u.merge(c,new e.Matrix4);i.set(n.max.x+15,(n.max.y+n.min.y)/2,(n.max.z+n.min.z)/2);s.set(0,0,-o/2);l.set(1,1,1);a=this.createArror(u,i,s,l,f,d,"xmax");t.push(a[0]);r.push(a[1]);i.set(n.min.x-15,(n.max.y+n.min.y)/2,(n.max.z+n.min.z)/2);s.set(0,0,o/2);l.set(1,1,1);a=this.createArror(u,i,s,l,f,d,"xmin");t.push(a[0]);r.push(a[1]);i.set((n.max.x+n.min.x)/2,n.max.y+15,(n.max.z+n.min.z)/2);s.set(0,0,0);l.set(1,1,1);a=this.createArror(u,i,s,l,f,d,"ymax");t.push(a[0]);r.push(a[1]);i.set((n.max.x+n.min.x)/2,n.min.y-15,(n.max.z+n.min.z)/2);s.set(0,0,o);l.set(1,1,1);a=this.createArror(u,i,s,l,f,d,"ymin");t.push(a[0]);r.push(a[1]);i.set((n.max.x+n.min.x)/2,(n.max.y+n.min.y)/2,n.max.z+15);s.set(o/2,0,0);l.set(1,1,1);a=this.createArror(u,i,s,l,f,d,"zmax");t.push(a[0]);r.push(a[1]);i.set((n.max.x+n.min.x)/2,(n.max.y+n.min.y)/2,n.min.z-15);s.set(-o/2,0,0);l.set(1,1,1);a=this.createArror(u,i,s,l,f,d,"zmin");t.push(a[0]);r.push(a[1])};r.prototype.createArror=function(t,r,n,o,a,i,s){var l=new e.Mesh(t,new THREE.MeshBasicMaterial({color:a}));var c=new e.Mesh(t,new THREE.MeshBasicMaterial({color:i,wireframe:true}));l.position.copy(r);l.rotation.copy(n);l.scale.copy(o);l.updateMatrix();c.position.copy(r);c.rotation.copy(n);c.scale.copy(o);c.updateMatrix();l.name=s;l.geometry.computeBoundingSphere();l.geometry.boundingSphere;return[l,c]};r.prototype.setArrorsScale=function(e,t,r){for(var n=0,o=e.length;n<o;++n){e[n].scale.set(r,r,r);t[n].scale.set(r,r,r)}};r.prototype.setArrorsPosition=function(e,t,r,n){for(var o=0,a=e.length;o<a;++o){switch(e[o].name){case"xmax":{e[o].position.set(r.max.x+15*n,(r.max.y+r.min.y)/2,(r.max.z+r.min.z)/2);t[o].position.set(r.max.x+15*n,(r.max.y+r.min.y)/2,(r.max.z+r.min.z)/2)}break;case"xmin":{e[o].position.set(r.min.x-15*n,(r.max.y+r.min.y)/2,(r.max.z+r.min.z)/2);t[o].position.set(r.min.x-15*n,(r.max.y+r.min.y)/2,(r.max.z+r.min.z)/2)}break;case"ymax":{e[o].position.set((r.max.x+r.min.x)/2,r.max.y+15*n,(r.max.z+r.min.z)/2);t[o].position.set((r.max.x+r.min.x)/2,r.max.y+15*n,(r.max.z+r.min.z)/2)}break;case"ymin":{e[o].position.set((r.max.x+r.min.x)/2,r.min.y-15*n,(r.max.z+r.min.z)/2);t[o].position.set((r.max.x+r.min.x)/2,r.min.y-15*n,(r.max.z+r.min.z)/2)}break;case"zmax":{e[o].position.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2,r.max.z+15*n);t[o].position.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2,r.max.z+15*n)}break;case"zmin":{e[o].position.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2,r.min.z-15*n);t[o].position.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2,r.min.z-15*n)}break;default:}}};r.prototype.setClipingPlans=function(t,r){var n=new e.Plane(new e.Vector3(1,0,0),-r.min.x);var o=new e.Plane(new e.Vector3(0,1,0),-r.min.y);var a=new e.Plane(new e.Vector3(0,0,1),-r.min.z);var i=new e.Plane(new e.Vector3(-1,0,0),r.max.x);var s=new e.Plane(new e.Vector3(0,-1,0),r.max.y);var l=new e.Plane(new e.Vector3(0,0,-1),r.max.z);t.clippingPlanes=[n,o,a,i,s,l]};r.prototype.changeClipingPlans=function(e,t){e.clippingPlanes[0].constant=-t.min.x;e.clippingPlanes[1].constant=-t.min.y;e.clippingPlanes[2].constant=-t.min.z;e.clippingPlanes[3].constant=t.max.x;e.clippingPlanes[4].constant=t.max.y;e.clippingPlanes[5].constant=t.max.z};r.prototype.setCamera=function(e,t,r){e.lookAt(r.getCenter());var n=t.getSpherical();t.target.copy(r.getCenter());t.update(n.phi,n.theta);e.updateMatrixWorld();e.updateProjectionMatrix()};r.prototype.getScale=function(e,t){return 1/(t.projectionMatrix.getMaxScaleOnAxis()*300)};r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.PartitionControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=new THREE.CircleGeometry(5,32);var o=new THREE.MeshPhongMaterial({color:65280,opacity:.4,transparent:true,side:THREE.DoubleSide});var a=new e.Mesh(n,o);var i;var s=r;var l=[];var c=[];var u=[];var f=[];var d=[];var v=new THREE.PlaneGeometry(.1,.1);var m=new THREE.MeshBasicMaterial({color:1678729,side:THREE.DoubleSide});var h=new e.Vector2;var p=new e.Vector2;var g=0;var y=new e.Mesh;y.material=new THREE.MeshBasicMaterial({color:1678729,transparent:false,opacity:.3,side:THREE.DoubleSide});var x=new e.Mesh;x.material=new THREE.MeshBasicMaterial({color:22089,side:THREE.DoubleSide});var A=new e.Mesh;var b=new e.Geometry;var E=new THREE.SphereGeometry(4/2,32,32);var w=new THREE.ConeGeometry(2/2,6/2,32,32);var M=16707173;b.merge(E,new e.Matrix4);b.merge(w,(new e.Matrix4).makeTranslation(0,6/2,0));A.geometry=b;A.rotation.set(-Math.PI/2,0,0);var C=[];var S=new e.Mesh;S.material=new e.MeshPhongMaterial({color:16711680});var R=[];function B(e){s.setMeshPosition(a,i);s.setMeshRotation(a,i);s.setMeshScale(a)}r.regist=function t(){var r=e.modelsControl.getOverlayScene();var n=e.modelsControl.getHubScene();r.add(a);e.renderParamers.container.style.cursor="move";s.setMeshPosition(a,i);s.setMeshRotation(a,i);s.setMeshScale(a);e.renderParamers._glup.domElement.addEventListener("wheel",B,false);for(var o=0,u=c.length;o<u;++o){r.add(c[o]);r.add(l[2*o]);r.add(l[2*o+1]);r.add(C[o]);r.add(R[o])}n.add(y);n.add(x);e.controlManager.controls.getControl("ClickControl").deActive()};r.unRegist=function t(){var r=e.modelsControl.getOverlayScene();var n=e.modelsControl.getHubScene();r.remove(a);e.renderParamers.container.style.cursor="default";e.renderParamers._glup.domElement.removeEventListener("wheel",B,false);for(var o=0,i=c.length;o<i;++o){r.remove(c[o]);r.remove(l[2*o]);r.remove(l[2*o+1]);r.remove(C[o]);r.remove(R[o])}e.enableUp=true;n.remove(y);n.remove(x);e.controlManager.controls.getControl("ClickControl").active()};r.getHotKey=function(){return{hotkey:"ctr+m",needLongPress:false}};r.mouseMove=function(){var t=new e.Vector2;return function r(n){var o=e.renderParamers._glup.domElement;t.x=n.offsetX/o.offsetWidth*2-1;t.y=-(n.offsetY/o.offsetHeight)*2+1;var l=e.gloableParames.modelManager.raycast(t,e.modelsControl.getMainCamera());l.sort(function(e,t){return e.distance-t.distance});i=l[0];s.setMeshPosition(a,i);s.setMeshRotation(a,i);s.setMeshScale(a);e.enableUp=true}}();r.leftButtonDown=function t(r){var n=e.renderParamers._glup.domElement;h.x=r.offsetX/n.offsetWidth*2-1;h.y=-(r.offsetY/n.offsetHeight)*2+1};r.leftButtonUp=function t(r){var n=e.renderParamers._glup.domElement;p.x=r.offsetX/n.offsetWidth*2-1;p.y=-(r.offsetY/n.offsetHeight)*2+1};r.leftButtonClick=function(){var t=[];var r=new e.Vector2;var n=new e.Raycaster;var o;var a=null;var u=null;return function b(E){u=e.getMicroYaHeiFont();var w=e.modelsControl.getOverlayScene();var B=e.renderParamers._glup.domElement;if(h.x==p.x&&h.y==p.y){r.x=E.offsetX/B.offsetWidth*2-1;r.y=-(E.offsetY/B.offsetHeight)*2+1;n.setFromCamera(r,e.modelsControl.getMainCamera());o=n.intersectObjects(C);if(o.length>0){if(a!=null){var T=a.material;T.color.setHex(M)}a=o[0].object;var P=a.material;P.color.setHex(16711680);var D=parseInt(a.name);x.geometry=d[D];return}else{if(a!=null){var P=a.material;P.color.setHex(M)}}if(i!=null){var I=new THREE.Mesh(v,m);s.setMeshPosition(I,i);s.setMeshRotation(I,i);l.push(I);w.add(I);t.push(i.point);if(t.length==2){var k=new THREE.Geometry;k.vertices.push(t[0]);k.vertices.push(t[1]);var N=new THREE.LineBasicMaterial({color:1678729});var U=new THREE.Line(k,N);c.push(U);w.add(U);var _=A.clone();_.position.set((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2,(t[0].z+t[1].z)/2+5);w.add(_);_.name=String(g);_.material=new e.MeshPhongMaterial({color:M});C.push(_);var q=S.clone();var H={size:1,height:.1,font:u,curveSegments:5};var L=new THREE.TextGeometry("No. "+String(g),H);L.center();q.geometry=L;q.position.set((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2,(t[0].z+t[1].z)/2+8);w.add(q);R.push(q);s.createDisplayCard(B,y);f.push(y);d.push(s.createText(B,t[0],t[1],g++,u,x));t.length=0}}}}}();r.getName=function(){return"MeasureControl"};s.initEvent(s);return r}r.prototype.setMeshScale=function(t){var r=this.getScale(e.modelsControl.getGlobalBox(),e.modelsControl.getMainCamera());t.scale.set(r,r,r)};r.prototype.getScale=function(e,t){return.01/t.projectionMatrix.getMaxScaleOnAxis()};r.prototype.setMeshPosition=function(e,t){if(t){e.position.copy(t.point)}};r.prototype.setMeshRotation=function(t,r){if(r!=null){var n=new e.Vector3;var o=new e.Vector3;n.x=r.vA.x-r.vB.x;n.y=r.vA.y-r.vB.y;n.z=r.vA.z-r.vB.z;o.x=r.vA.x-r.vC.x;o.y=r.vA.y-r.vC.y;o.z=r.vA.z-r.vC.z;var a=n.cross(o).normalize();t.rotation.set(Math.acos(a.z),Math.PI/2-Math.acos(a.x),0)}};r.prototype.createDisplayCard=function(e,t){var r=new THREE.PlaneGeometry(5/2,20/8,1,5);t.geometry=r;t.scale.set(10,10,10);t.position.set(e.width/10-40/2,0,0);return t};r.prototype.createText=function(e,t,r,n,o,a){var i=3.2808399;var s=new THREE.Geometry;var l={size:.25,height:.1,font:o,curveSegments:5};var c=new THREE.TextGeometry("No."+String(n),l);c.center();s.merge(c,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,8/8,0)));var u=new THREE.TextGeometry("距离 x = "+String(Math.abs((t.x-r.x)/i).toFixed(2))+"m",l);u.center();s.merge(u,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,0/8,0)));var f=new THREE.TextGeometry("距离 y = "+String(Math.abs((t.y-r.y)/i).toFixed(2))+"m",l);f.center();s.merge(f,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,-4/8,0)));var d=new THREE.TextGeometry("距离 z = "+String(Math.abs((t.z-r.z)/i).toFixed(2))+"m",l);d.center();s.merge(d,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,-8/8,0)));var v=new THREE.TextGeometry("距离 = "+String(Math.abs(t.distanceTo(r)/i).toFixed(2))+"m",l);v.center();s.merge(v,(new THREE.Matrix4).setPosition(new THREE.Vector3(0,4/8,0)));a.geometry=s;a.scale.set(10,10,10);a.position.set(e.width/10-40/2,0,0);return s};r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.MeasureControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(r){var n=t.call(this)||this;var o=[];function a(){var t=e.modelsControl.getControl();var r=new e.Box3;var n=false;e.gloableParames.modelManager.enumModel(function(e){var t=e.getHighIterator();if(e.getHighIterator().length()>0)n=true;t.enumeHigltMesh(function(t){r.union(e.fragSet.getBoundingBox(t))})});if(n){e.gloableParames.modelManager.enumModel(function(e){for(var t=0,r=e.fragSet.getCount();t<r;++t)e.fragSet.setState(t,1);e.getHighIterator().reverse()});var o=t.getSpherical();t.target.copy(r.getCenter());t.update(o.phi,o.theta);e.gloableParames.modelManager.reset();n=false}}function i(){}n.regist=function(){a();e.controlManager.controls.getControl("HiddenControl").deActive()};n.unRegist=function(){i();e.gloableParames.modelManager.enumModel(function(e){})};n.getHotKey=function(){return{hotkey:"ctr+q",needLongPress:false}};n.leftButtonClick=function(e){a()};n.backUp=function(){};n.getName=function(){return"PeelControl"};return n}r=__decorate([e.PushControl,__metadata("design:paramtypes",[e.RenderModelVariable])],r);return r}(e.BaseControl);e.PeelControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=r;r.regist=function t(){var r=e._selector.get();if(r.length>0){var n=r[r.length-1];e.FocusMesh(n)}e.logger.log("focus regist")};r.leftButtonClick=function e(){};r.unRegist=function t(){e.FocusBack();e.logger.log("focus unregist")};r.getHotKey=function(){return{hotkey:"ctr+f",needLongPress:false}};r.getName=function(){return"FocusControl"};r.backUp=function(){e.logger.log("focus backup")};n.initEvent(n);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.FocusControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=[];var o=r;function a(){e.gloableParames.modelManager.enumModel(function(t){var r=t.getHighIterator();if(r.length()>0){t.fragSet.setState(r.getFragIds(),1);n.push({array:[].concat(r.getFragIds()),modelId:t.id});r.clear();e.gloableParames.modelManager.reset()}})}r.getHotKey=function(){return{hotkey:"ctr+h",needLongPress:false}};r.regist=function t(){a();e.controlManager.controls.getControl("PeelControl").deActive()};r.unRegist=function e(){console.log("hidden regist")};r.leftButtonClick=function e(t){a()};r.backUp=function(){if(n.length>0){var t=n.pop();var r=e.gloableParames.modelManager.getModelParamerFromId(t.modelId).model;r.fragSet.setState(t.array,2);e.gloableParames.modelManager.reset()}};r.getName=function(){return"HiddenControl"};o.initEvent(o);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.HiddenControl=t})(Neon||(Neon={}));var Neon;(function(e){e.blendMesh=new THREE.BlendCharacter;e.params={rotationSpeed:.001,speed:200,collide:true,height:1.8,initHeight:0,blendLoad:false,blendSpeed:.03,persion:false};var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=r;var o=false;var a=0;var i=0;var s;var l=false;var c=new THREE.Vector3;var u=new THREE.Raycaster(new THREE.Vector3,new THREE.Vector3(0,-1,0),0,10);var f=document.createElement("div");f.style.position="absolute";f.style.width="100%";f.style.height="100%";f.style.top="0%";f.style.left="0%";f.style.backgroundColor="rgba(0, 0, 0, 0.5)";f.style.zIndex="10000";var d=document.createElement("div");d.style.position="absolute";d.style.width="100%";d.style.height="100%";d.style.top="0%";d.style.left="0%";d.style.display="-webkit-box";d.style.webkitBoxOrient="horizontal";d.style.webkitBoxAlign="center";d.style.webkitBoxPack="center";d.style.textAlign="center";d.style.color="#ffffff";f.appendChild(d);var v=document.createElement("span");v.style.fontSize="40px";v.innerHTML="单击开始漫游";d.appendChild(v);d.appendChild(document.createElement("br"));var m=document.createElement("span");m.innerHTML="(W, A, S, D = Move, MOUSE = Look around)";d.appendChild(m);var h=document.body;var p;var g;function y(){var t=e.modelsControl.getMainCamera();var r=e.modelsControl.getScene();g=new dat.GUI({autoPlace:false});g.domElement.id="gui";g.domElement.style.top="35px";g.domElement.style.left="0%";g.domElement.style.zIndex="3";g.domElement.style.position="absolute";g.add(e.params,"rotationSpeed",1e-4,.002);g.add(e.params,"speed",0,400);g.add(e.params,"collide",true);g.add(e.params,"height",1,2.5).onChange(function(r){e.enableModel=true;t.position.z=e.params.initHeight+e.params.height*e.meter2foot});g.add(e.params,"persion",false).onChange(function(n){e.logger.log(n);if(n==true){r.add(e.blendMesh);e.blendMesh.position.copy(t.position);e.blendMesh.position.z=e.params.initHeight;e.params.persion=true;e.enableModel=true;t.position.add(new e.Vector3(2*Math.sin(a),-2*Math.cos(a)))}else{r.remove(e.blendMesh);e.params.persion=false;e.enableModel=true}});g.open();e.renderParamers.container.appendChild(g.domElement)}function x(e,t){e.enabled=true;e.setEffectiveTimeScale(1);e.setEffectiveWeight(t)}function A(t){if(document.pointerLockElement===document.body){o=true;f.style.display="none";document.addEventListener("mousemove",w,false);e.logger.log("lock off")}else{o=false;document.removeEventListener("mousemove",w,false);e.logger.log("lock on")}}function b(e){document.body.requestPointerLock()}function E(){var t=e.modelsControl.checkCamera("pres");if(e._selector.get().length!=0){var r=e.gloableParames.modelManager.getBoundingBoxFromUUid(e._selector.get()[0]);e.gloableParames.modelManager.enumModel(function(t){t.getHighIterator().reverse();e.enableModel=true});t.rotation.set(Math.PI/2,0,0);t.position.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2,r.max.z+e.params.height*e.meter2foot);e.params.initHeight=r.max.z;if(e.blendMesh.position!=undefined){e.blendMesh.position.set((r.max.x+r.min.x)/2,(r.max.y+r.min.y)/2+.5*e.meter2foot,e.params.initHeight);e.blendMesh.play("idle",1);e.params.blendLoad=true}y();e.renderParamers.container.appendChild(f);e.modelsControl.getControl().enabled=false;document.addEventListener("pointerlockchange",A,false);f.style.display="-webkit-box"}else{e.modelsControl.checkCamera("ortho");n.isActive=false;console.error("没有选中构建，无法确定漫游开始位置，请重新选中构建")}d.addEventListener("click",b,false)}r.regist=function t(){if(!e.blendMesh.position){var r=(e.loadParamers.animateUrl?e.loadParamers.animateUrl:n())+"/animate/marine_anims_core.json";e.blendMesh.load(r,function(){e.blendMesh.rotation.x=Math.PI/2;e.blendMesh.applyWeight("idle",1/3);e.blendMesh.applyWeight("walk",1/3);e.blendMesh.applyWeight("run",1/3);e.blendMesh.geometry.computeBoundingBox();var t=e.blendMesh.geometry.boundingBox;var r=Math.max(t.max.x-t.min.x,Math.max(t.max.y-t.min.y,t.max.z-t.min.z))/2;e.blendMesh.scale.set(1/r,1/r,1/r);e.blendMesh.position.set((t.max.x+t.min.x)/2,(t.max.y+t.min.y)/2+.5*e.meter2foot,e.params.initHeight);e.blendMesh.play("idle",1);e.params.blendLoad=true;E();e.logger.log("......................blend load over................")})}else{E()}function n(){var t=e.loadParamers.CURRENT_MODEL_DIRECTORY;t=t.substr(0,t.length-1);var r=t.lastIndexOf("/");t=t.substr(0,r);return t}e.logger.debug("wander regist!")};r.unRegist=function t(){var r=e.modelsControl.checkCamera("ortho");e.modelsControl.getControl().enabled=true;d.removeEventListener("click",b,false);document.removeEventListener("pointerlockchange",A,false);document.removeEventListener("mousemove",w,false);e.renderParamers.container.removeChild(f);if(g)g.destroy();e.params.blendLoad=false;e.modelsControl.getScene().remove(e.blendMesh);e.enableModel=true;if(g!=undefined){e.renderParamers.container.removeChild(g.domElement);g.destroy()}e.logger.debug("wander unregist")};r.getHotKey=function(){return{hotkey:"ctr+.",needLongPress:false}};r.getName=function(){return"WanderControl"};r.keyDown=function t(r){if(o){switch(r.key){case"w":case"W":{s=e.MOVESTATE.MOVEFORWARD;l=true;break}case"s":case"S":{s=e.MOVESTATE.MOVEBACK;l=true;break}case"a":case"A":case"ArrowLeft":{s=e.MOVESTATE.MOVELEFT;l=true;break}case"d":case"D":case"ArrowRight":{s=e.MOVESTATE.MOVERIGHT;l=true;break}case"ArrowUp":{s=e.MOVESTATE.UP;l=true;break}case"ArrowDown":{s=e.MOVESTATE.DOWN;l=true;break}}}if(r.key=="i"||r.key=="I"){if(o==false){f.style.display="-webkit-box";e.gloableParames.modelManager.enumModel(function(t){t.getHighIterator().reverse();e.enableModel=true})}}};r.keyUp=function t(r){if(o){switch(r.key){case"w":case"W":{s=e.MOVESTATE.MOVEFORWARD;l=false;break}case"s":case"S":{s=e.MOVESTATE.MOVEBACK;l=false;break}case"a":case"A":case"ArrowLeft":{s=e.MOVESTATE.MOVELEFT;l=false;break}case"d":case"D":case"ArrowRight":{s=e.MOVESTATE.MOVERIGHT;l=false;break}case"ArrowUp":{s=e.MOVESTATE.UP;l=false;break}case"ArrowDown":{s=e.MOVESTATE.DOWN;l=false;break}}}};var w=function(){var t=new e.Vector3;var r=new e.Vector3;var n=new e.Euler(Math.PI/2,0,0);return function s(l){if(o){var c=e.modelsControl.getMainCamera();var u=performance.now();t.y-=l.movementX*e.params.rotationSpeed;r.x-=l.movementY*e.params.rotationSpeed;if(r.x>Math.PI/2)r.x=Math.PI/2;else if(r.x<-Math.PI/2)r.x=-Math.PI/2;var f=(new e.Matrix4).makeRotationFromEuler(n).multiply((new e.Matrix4).makeRotationY(t.y)).multiply((new e.Matrix4).makeRotationX(r.x));c.rotation.setFromRotationMatrix(f);if(e.params.persion==true){var d=(new e.Matrix4).makeRotationFromEuler(n).multiply((new e.Matrix4).makeRotationY(t.y));e.blendMesh.rotation.setFromRotationMatrix(d);c.position.copy(e.blendMesh.position).add(new e.Vector3(2*Math.sin(a),-2*Math.cos(a),e.params.height*e.meter2foot))}a=t.y;i=r.x;e.gloableParames.modelManager.reset();e.enableModel=true}}}();r.getYaw=function(){return a};r.getPitch=function(){return i};r.getMoveState=function(){return s};r.getKeyDown=function(){return l};n.initEvent(n);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.WanderControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=r;var o=false;r.regist=function t(){o=false;e.renderParamers.container.style.cursor="pointer"};r.unRegist=function t(){o=false;e.renderParamers.container.style.cursor="default"};r.getName=function(){return"PanControl"};r.getHotKey=function(){return{hotkey:"ctr+1",needLongPress:false}};r.leftButtonDown=function t(r){o=true
;e.modelsControl.getControl().handleMouseDownPan(r);e.modelsControl.getControl().enabled=false};r.onTouchStart=function t(r){o=true;e.modelsControl.getControl().handleTouchStartPan(r);e.modelsControl.getControl().enabled=false};r.onTouchEnd=function t(r){o=false;e.modelsControl.getControl().enabled=true;e.modelsControl.getControl().onTouchEnd(r)};r.leftButtonUp=function t(r){o=false;e.modelsControl.getControl().enabled=true;e.modelsControl.getControl().onMouseUp(r)};r.onTouchMove=function(t){if(o==true){e.modelsControl.getControl().handleTouchMovePan(t)}};r.mouseMove=function(t){if(o==true){e.modelsControl.getControl().handleMouseMovePan(t)}};n.initEvent(n);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.PanControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=r;var o=2;r.getHotKey=function(){return{hotkey:"ctr+2",needLongPress:false}};r.getName=function(){return"MagnifyControl"};r.regist=function t(){var r=e.modelsControl.getMainCamera();if(r.zoom<300){r.zoom*=o;r.updateMatrixWorld();r.updateProjectionMatrix();e.gloableParames.modelManager.reset();e.enableUp=true}n.deActive()};r.unRegist=function e(){};n.initEvent(n);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.MagnifyControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;var n=r;var o=2;r.getHotKey=function(){return{hotkey:"ctr+3",needLongPress:false}};r.getName=function(){return"ShrinkControl"};r.regist=function t(){var r=e.modelsControl.getMainCamera();if(r.zoom>2){r.zoom/=o;r.updateMatrixWorld();r.updateProjectionMatrix();e.gloableParames.modelManager.reset();e.enableUp=true}n.deActive()};r.unRegist=function e(){};n.initEvent(n);return r}r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.ShrinkControl=t})(Neon||(Neon={}));var Neon;(function(e){var t;(function(e){e[e["zMode"]=0]="zMode";e[e["xMode"]=1]="xMode";e[e["yMode"]=2]="yMode"})(t||(t={}));var r;(function(e){e[e["INTACK"]=0]="INTACK";e[e["BROKEN"]=1]="BROKEN"})(r||(r={}));var n=function(n){__extends(o,n);function o(o,a){var i=n.call(this,a)||this;i.pointMap=(new THREE.TextureLoader).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAAZiS0dEAAAAAAAA+UO7fwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sHDgwCEMBJZu0AAAAdaVRYdENvbW1lbnQAAAAAAENyZWF0ZWQgd2l0aCBHSU1QZC5lBwAABM5JREFUWMO1V0tPG2cUPZ4Hxh6DazIOrjFNqJs0FIMqWFgWQkatsmvVbtggKlSVRVf5AWz4AWz4AUSKEChll19QJYSXkECuhFxsHjEhxCYm+DWGMZ5HF72DJq4bAzFXurI0M/I5997v3u9cC65vTJVn2lX/xHINQOYSBLTLEuIuCWw4Z3IGAEvf6ASmVHjNzHCXBG4A0AjACsAOwEbO0nsFQBnAGYASAIl+ZRMR7SolMEdsByD09fV5R0ZGgg8ePPjW5/N1iqLYpuu6RZblciKR2I9Go69evnwZnZ+fjwI4IS8AKBIRzeQfJWCANwKwh0KhtrGxsYehUOin1tbW+zzP23ietzY2NnIAoGmaLsuyUiqVyvl8XtrY2NiamZn589mzZxsAUgCOAeQAnFI2tI+VxIjaAeDzoaGh7xYWFuZOTk6OZVk+12uYqqq6JEnn0Wg0OT4+/geAXwGEAdwDIFJQXC1wO4DWR48e/RCPxxclSSroVzRFUbSDg4P848ePFwH8DuAhkWih83TRQWxFOXgAwvDwcOfo6OhvXV1d39tsNtuVBwTDWBwOh1UUxVsMw1hXVlbSdCgNV43uYSvrHg6H24aHh38eHBz85TrgF9FYLHA4HLzH43FvbW2d7u/vG+dANp8FpqIlbd3d3V8Fg8EfBUFw4BONZVmL3+9vHhkZCQL4AoAHgJPK8G+yzC0XDofdoVAo5PP5vkadTBAEtr+/39ff3x8gAp/RPOEqx2qjx+NpvXv3bk9DQ0NDvQgwDIOWlhZrMBj8kgi0UJdxRgYMArzL5XJ7vd57qLPZ7Xamp6fnNgBXtQxcjFuHw+Hyer3t9SYgCAITCAScAJoBNNEY/08GOFVVrfVMv7kMNDntFD1vjIAPrlRN0xjckOm6biFQ3jwNPwDMZrOnqVTqfb3Bi8Wivru7W/VCYkwPlKOjo0IikXh7EwQikYgE4Nw0CfXKDCipVCoTj8df3QABbW1tLUc6oUgkFPMkVACUNjc337148eKvw8PDbJ2jP1taWkoCyNDVXDSECmNSK4qiKNLq6urW8+fPI/UicHx8rD59+jSVy+WOAKSJhKENwFItLtoxk8mwsixzHR0dHe3t7c5PAU+n09rs7OzJkydPYqVSaQfANoDXALIk31S2smU1TWMPDg7K5XKZ7+3t9TudTut1U7+wsFCcmJiIpdPpbQBxADsAknQWymYCOukBHYCuKApisdhpMpnURFEU79y503TVyKenpzOTk5M7e3t7MQKPV0Zv1gNm+awB0MvlshqLxfLb29uyJElWURSbXC4XXyvqxcXFs6mpqeTc3Nzu3t7e3wQcA7BPZ8Cov1pNlJplmQtAG8MwHV6v95tAINA5MDBwPxAIuLu6upr8fr/VAN3c3JQjkcjZ+vp6fnl5+d2bN29SuVzuNYAEpf01CdRChUL+X1VskHACuA3Ay3Fcu9vt7nA6nZ7m5uYWQRCaNE3jVVW15PP580KhIGUymWw2m00DOAJwSP4WwPtq4LX2Ao6USxNlQyS/RcQcdLGwlNIz6vEMAaZpNzCk2Pll94LK/cDYimxERiBwG10sxjgvEZBE0UpE6vxj+0Ct5bTaXthgEhRmja8QWNkkPGsuIpfdjpkK+cZUWTC0KredVmtD/gdlSl6EG4AMvQAAAABJRU5ErkJggg==");i.pointsArray=[];var s=i;var l=new e.Vector2;var c=new e.Vector2;var u=o.dom;var f=new e.Raycaster;var d=o.fragSet;var v=o.highLight;var m=new THREE.Points;var h=[];var p=new Map;var g=undefined;var y;var x;var A;var b=new THREE.LineBasicMaterial({color:16711680});var E=new THREE.Line;E.material=b;var w=new THREE.Points;var M=new THREE.PointsMaterial({size:5,map:i.pointMap,color:65280,sizeAttenuation:true});w.material=M;m.material=M;var C=new THREE.Line;var S=new THREE.Line;var R=new THREE.LineBasicMaterial({color:65280});C.material=R;S.material=R;var B=new THREE.Mesh;B.material=new e.MeshPhongMaterial({color:16711680,transparent:true,opacity:.7});var T=new e.Vector3;var P=false;var D;var I;var k;var N;var U=[];var _=[];var q=[];var H=new Set;var L=[];var F=[];var O=65280;var z=255;var V;var j=true;function G(r){o.control.handleMouseWheel(r);if(g!=undefined){c.x=r.offsetX/o.dom.offsetWidth*2-1;c.y=-(r.offsetY/o.dom.offsetHeight)*2+1;y=W(c,f);if(I==t.zMode){x=new e.Vector3(g.x,y.y,0);A=new e.Vector3(y.x,g.y,0)}else if(I==t.yMode){x=new e.Vector3(g.x,0,y.z);A=new e.Vector3(y.x,0,g.z)}var n=new e.Geometry;n.vertices.push(g,x,y,A,g);E.geometry=n}}i.getName=function(){return"ConstructionSectionControl"};i.getHotKey=function(){return{hotkey:"ctr+4",needLongPress:false}};i.regist=function n(){for(var a=0,i=h.length;a<i;++a)o.overlayScene.add(h[a]);e.renderParamers.container.style.cursor="move";o.overlayScene.add(w);o.overlayScene.add(B);o.control.update(0,0);I=t.zMode;k=r.INTACK;N="未命名";U=[]};i.unRegist=function t(){for(var r=0,n=h.length;r<n;++r)o.overlayScene.remove(h[r]);h.length=0;p.forEach(function(e){for(var t=0;t<e.length;++t)o.overlayScene.remove(e[t])});p.clear();e.renderParamers.container.style.cursor="default";o.overlayScene.remove(C);o.overlayScene.remove(S);o.overlayScene.remove(w);o.overlayScene.remove(B);e.logger.debug("ConstructionSectionControl unregist!")};i.leftButtonDown=function e(t){if(j==true){l.x=t.offsetX/u.offsetWidth*2-1;l.y=-(t.offsetY/u.offsetHeight)*2+1;g=W(l,f);if(T!=null&&P)g.copy(T);o.overlayScene.add(E);o.control.enabled=false}};i.mouseMove=function r(n){if(j==true){c.x=n.offsetX/o.dom.offsetWidth*2-1;c.y=-(n.offsetY/o.dom.offsetHeight)*2+1;y=W(c,f);if(g!=undefined){if(I==t.zMode){x=new e.Vector3(g.x,y.y,0);A=new e.Vector3(y.x,g.y,0)}else if(I==t.yMode){x=new e.Vector3(g.x,0,y.z);A=new e.Vector3(y.x,0,g.z)}var a=new e.Geometry;a.vertices.push(g,x,y,A,g);E.geometry=a}e.enableUp=true}};i.leftButtonUp=function t(n){var a=Math.abs;var i=.1;d=o.fragSet;o.control.enabled=true;E.geometry=new e.Geometry;o.overlayScene.remove(E);if(a(g.x-y.y)>i||a(g.y-y.y)>i||a(g.z-y.z)&&j){if(k==r.BROKEN){var s=Q(g,y);e.logger.debug("box",s,g,y);for(var l=0,c=d.uuids.length;l<c;l++){var u=d.uuids[l];var f=d.uuid2fragid.get(u);if(d.getState(f[0])!=1){var v=d.getBoundingBoxFromUuid(u);if(X(s,v)){f.forEach(function(e){o.highLight.push(e)});var m=K([v.min.x,v.min.y,v.min.z,v.max.x,v.max.y,v.max.z],O);o.overlayScene.add(m);h.push(m);F.push(u);e.logger.debug("intersectsBox")}else if(s.intersectsBox(v)){var p=[];p.push(s.min.x>v.min.x?s.min.x:v.min.x);p.push(s.min.y>v.min.y?s.min.y:v.min.y);p.push(s.min.z>v.min.z?s.min.z:v.min.z);p.push(s.max.x<v.max.x?s.max.x:v.max.x);p.push(s.max.y<v.max.y?s.max.y:v.max.y);p.push(s.max.z<v.max.z?s.max.z:v.max.z);var m=K(p,z);o.overlayScene.add(m);h.push(m);L.push({uuid:u,box:p})}}}}else if(k==r.INTACK){var s=Q(g,y);for(var l=0,c=d.uuids.length;l<c;l++){var u=d.uuids[l];var f=d.uuid2fragid.get(u);if(d.getState(f[0])!=1)if(s.intersectsBox(d.getBoundingBoxFromUuid(u))){f.forEach(function(e){o.highLight.push(e)});F.push(u)}}}}g=undefined;e.enableUp=true};i.leftButtonClick=function e(t){};i.backUp=function(){var t=_.pop();if(t=="peel"){var r=s.mainControls.getControl("PeelControl");var n=q.pop();if(r!=undefined){for(var a=0,i=n.length;a<i;++a)o.fragSet.setState(o.fragSet.uuid2fragid.get(n[a]),2)}}else if(t=="broken"){e.logger.debug(t);if(h.length>0){for(var a=0,i=h.length;a<i;++a)o.overlayScene.remove(h[a])}var r=U.pop();e.logger.debug(r);if(r!=undefined){for(var a=0,i=r.length;a<i;++a)o.fragSet.setState(o.fragSet.uuid2fragid.get(r[a].uuid),2)}}else if(t=="intack"){e.logger.debug(t);var r=U.pop();if(r!=undefined){for(var a=0,i=r.length;a<i;++a)o.fragSet.setState(o.fragSet.uuid2fragid.get(r[a].uuid),2)}}o.iterator.reset()};i.keyDown=function e(r){if(r.key=="p"){P=!P}else if(r.key=="m"){I=t.zMode;o.control.update(0,0);B.rotation.set(0,0,0)}else if(r.key=="y"){I=t.yMode;o.control.update(Math.PI/2,0);B.rotation.set(Math.PI/2,0,0)}};i.setMode=function(n){if(n=="z"){I=t.zMode;o.control.update(0,0);B.rotation.set(0,0,0)}if(n=="y"){I=t.yMode;o.control.update(Math.PI/2,0);B.rotation.set(Math.PI/2,0,0)}if(n=="i"){k=r.INTACK}if(n=="b"){k=r.BROKEN;L.length=0;F.length=0}e.logger.debug("setmode")};i.createConstruction=function(t){s.active();N=t;U.length=0;L.length=0;F.length=0;var r=o.fragSet;var n=r.uuids;var a=[];for(var i=0,l=n.length;i<l;++i){var c=n[i];var u=r.uuid2fragid.get(c);if(d.getState(u[0])==2){var f=d.getAttributeUUID(c);if(f.isSelected==false&&f.selectedBox.length==0)a.push(c);else if(f.isSelected==true)d.setState(u,1);else if(f.isSelected==false&&f.selectedBox.length>0){var v=f.selectedBox;var m=[];for(var h=0;h<v.length;++h){var g=K(v[h],z);o.overlayScene.add(g);m.push(g)}p.set(c,m)}}}D=a;e.logger.debug("createConstruction");o.iterator.reset();e.enableUp=true;j=true};i.submit=function(){var t={};t["constructionName"]=N;var r=J(U);for(var n=0,a=r.length;n<a;++n){var i=r[n];var l=o.fragSet.getBoundingBoxFromUuid(i.uuid);if(i.isAll==true)o.fragSet.getAttributeUUID(i.uuid).isSelected=true;else if(i.isAll==false){var c=o.fragSet.getAttributeUUID(i.uuid).selectedBox;c.push(i.box);var u=new e.Box3;for(var f=0;f<c.length;++f){var d=new e.Box3;d.setFromArray(c[f]);u.union(d)}if(u.max.x>=l.max.x&&u.max.y>=l.max.y&&u.max.z>=l.max.z&&u.min.x<=l.min.x&&u.min.y<=l.min.y&&u.min.z<=l.min.z)o.fragSet.getAttributeUUID(i.uuid).isSelected=true}}t.uuids=r;for(var n=0,a=h.length;n<a;++n)o.overlayScene.remove(h[n]);h.length=0;p.forEach(function(e){for(var t=0;t<e.length;++t)o.overlayScene.remove(e[t])});p.clear();H.clear();s.deActive();e.logger.debug("submit");return t};i.input=function(){var t;var n=o.highLight;var a=o.fragSet;if(k==r.INTACK){var i=[];a.setState(n,1);for(var s=0;s<F.length;++s){var l=F[s];if(a.getAttributeUUID(l).isSelected==true)continue;i.push({uuid:l,isAll:true,box:[0,0,0,0,0,0]})}U.push(i);t="INTACK";_.push("intack")}else if(k==r.BROKEN){var i=[];a.setState(n,1);for(var s=0;s<F.length;++s){var l=F[s];var c=a.getAttributeUUID(l);if(c==undefined)e.logger.log("undefined");if(c==undefined||c.isSelected==true)continue;i.push({uuid:l,isAll:true,box:[0,0,0,0,0,0]})}for(var s=0,u=L.length;s<u;++s){if(a.getAttributeUUID(L[s].uuid).isSelected==true)continue;var l=L[s].uuid;var f=a.getBoundingBoxFromUuid(l);i.push({uuid:l,isAll:false,box:L[s].box});a.setState(o.fragSet.uuid2fragid.get(l),1);var d=o.fragSet.getAttributeUUID(l).selectedBox;var v=new e.Box3;for(var m=0;m<d.length;++m){var g=new e.Box3;g.setFromArray(d[m]);v.union(g)}var y=new e.Box3;y.setFromArray(L[s].box);v.union(y);if(v.max.x>=f.max.x&&v.max.y>=f.max.y&&v.max.z>=f.max.z&&v.min.x<=f.min.x&&v.min.y<=f.min.y&&v.min.z<=f.min.z){var x=p.get(l);for(var A=0;A<x.length;++A)o.overlayScene.remove(x[A])}}U.push(i);for(var s=0,u=h.length;s<u;++s)o.overlayScene.remove(h[s]);h.length=0;t="BROKEN";_.push("broken")}o.highLight.length=0;o.iterator.reset();e.enableUp=true;e.logger.debug("Input "+t)};i.peel=function(){var t=[];for(var r=0,n=o.fragSet.uuids.length;r<n;++r){var a=o.fragSet.uuids[r];if(o.fragSet.getState(o.fragSet.uuid2fragid.get(a)[0])==2)t.push(a)}q.push(t);e._selector.setMethod("peel",true);e._selector.setMethod("peel",false);_.push("peel")};i.preview=function(){var e=J(U);s.view({constructionName:N,uuids:e});j=false};i.view=function(){var t;var r=new THREE.Mesh;var n=new THREE.Mesh;function a(e){var t;var a=new THREE.Box3;if(e.isAll==true){t=r.clone();a=o.fragSet.getBoundingBoxFromUuid(e.uuid)}else{t=n.clone();a.setFromArray(e.box)}var i=new THREE.BoxGeometry(a.max.x-a.min.x,a.max.y-a.min.y,a.max.z-a.min.z);t.position.set((a.max.x+a.min.x)/2,(a.max.y+a.min.y)/2,(a.max.z+a.min.z)/2);t.geometry=i;return t}return function(i){t=i.uuids;r.material=new THREE.MeshBasicMaterial({color:O,transparent:true,opacity:.5});n.material=new THREE.MeshBasicMaterial({color:z,transparent:true,opacity:.5});for(var s=0,l=h.length;s<l;++s)o.overlayScene.remove(h[s]);h.length=0;p.forEach(function(e){for(var t=0;t<e.length;++t)o.overlayScene.remove(e[t])});p.clear();e.hideAll();for(var s=0,l=t.length;s<l;s++){var c=t[s];var u=a(c);o.overlayScene.add(u);h.push(u);o.fragSet.setState(o.fragSet.uuid2fragid.get(c.uuid),2)}o.iterator.reset();e.enableUp=true}}();i.cancle=function(){for(var e=0,t=D.length;e<t;++e)o.fragSet.setState(o.fragSet.uuid2fragid.get(D[e]),2);L.length=0;F.length=0;H.clear();for(var e=0;e<U.length;++e)for(var r=0;r<U[e].length;++r){var n=U[e][r].uuid;d.getAttributeUUID(n).isSelected=false}U.length=0;for(var e=0,t=h.length;e<t;++e)o.overlayScene.remove(h[e]);h.length=0;p.forEach(function(e){for(var t=0;t<e.length;++t)o.overlayScene.remove(e[t])});p.clear();s.deActive();o.iterator.reset()};i.getValue=function(t){var r={};var n=t.uuids;var a=o.fragSet;var i=new e.Box3;var s={};for(var l=0,c=n.length;l<c;++l){var u=o.fragSet.uuid2fragid.get(n[l].uuid);var f=n[l].uuid;var d=a.getAttributeUUID(f);var v=d.material;if(v==undefined)v="混凝土";var m=s[v];if(m==undefined){m={};m["rownum"]=0}var h=d.specification;var p=m[h];if(p==undefined){p={};p["rownum"]=0}var g=d.category;var y=p[g];if(y==undefined){y={};y["rownum"]=0}var x=d.name;if(n[l].isAll==true)y[x+"-"+String(l)]=[a.getValue(f,"体积")];else{i.setFromArray(n[l].box);var A=0;for(var b=0;b<u.length;++b)A+=a.getInsectValue(u[b],i,"体积");y[x+"-"+String(l)]=[A.toFixed(2)]}y["rownum"]++;m["rownum"]++;p["rownum"]++;p[g]=y;m[h]=p;s[v]=m}return s};function W(e,t){t.setFromCamera(e,o.camera);return t.ray.origin.clone().add(t.ray.direction)}function Y(t,r){var n=(new e.Vector3).copy(r).multiplyScalar(o.camera.far);return(new e.Vector3).copy(t).add(n)}function Q(r,n){var o=new e.Box3;if(I==t.zMode){if(r.x>n.x){o.max.x=r.x;o.min.x=n.x}else{o.max.x=n.x;o.min.x=r.x}if(r.y>n.y){o.max.y=r.y;o.min.y=n.y}else{o.max.y=n.y;o.min.y=r.y}o.max.z=1e5;o.min.z=-1e5}else if(I==t.yMode){if(r.x>n.x){o.max.x=r.x;o.min.x=n.x}else{o.max.x=n.x;o.min.x=r.x}if(r.z>n.z){o.max.z=r.z;o.min.z=n.z}else{o.max.z=n.z;o.min.z=r.z}o.max.y=1e4;o.min.y=-1e4}return o}function X(e,t){return t.max.x<=e.max.x&&t.min.x>=e.min.x&&t.max.y<=e.max.y&&t.min.y>=e.min.y&&t.max.z<=e.max.z&&t.min.z>=e.min.z?true:false}function K(e,t){var r=new THREE.Mesh;r.material=new THREE.MeshBasicMaterial({transparent:true,color:t,opacity:.5});r.geometry=new THREE.BoxGeometry(e[3]-e[0],e[4]-e[1],e[5]-e[2]);r.position.set((e[3]+e[0])/2,(e[4]+e[1])/2,(e[5]+e[2])/2);return r}function J(e){var t=[];for(var r=0;r<e.length;++r){var n=e[r];for(var o=0;o<n.length;++o)t.push(n[o])}return t}return i}o.prototype.vector3InArray=function(e,t){for(var r=0,n=e.length;r<n;++r){if(e[r].equals(t)==true)return true}return false};o.prototype.createPoints=function(t,r){var n=t.geometry.attributes.position.array;var o=new THREE.Geometry;var a=[];for(var i=0,s=n.length;i<s;i+=8){var l=new e.Matrix4;r.fragSet.getMatrix(t.fragId,l);var c=new e.Vector3(n[i],n[i+1],n[i+2]).applyMatrix4(l);if(this.vector3InArray(a,c)==false){o.vertices.push(c);a.push(c)}}return o};o.prototype.bindingVertex=function(r,n,o){var a=0;var i=1e5;for(var s=0,l=r.length;s<l;++s){if(o==t.zMode){var c=new e.Vector2(r[s].x,r[s].y).distanceTo(new e.Vector2(n.x,n.y));if(c<=i){i=c;a=s}}else if(o==t.yMode){var c=new e.Vector2(r[s].x,r[s].z).distanceTo(new e.Vector2(n.x,n.z));if(c<=i){i=c;a=s}}}return r[a]};o.prototype.createText=function(t,r){var n=3.2808399;var o=new THREE.Geometry;var a={size:.5,height:.1,font:e.getMicroYaHeiFont(),curveSegments:10};var i=new THREE.TextGeometry("( "+String((t.x/n).toFixed(2))+" "+String((t.y/n).toFixed(2))+" "+String((t.z/n).toFixed(2))+" )",a);i.center();o.merge(i,(new e.Matrix4).makeTranslation(0,.25,0));var s=new THREE.TextGeometry("( "+String((r.x/n).toFixed(2))+" "+String((r.y/n).toFixed(2))+" "+String((t.z/n).toFixed(2))+" )",a);s.center();o.merge(s,(new e.Matrix4).makeTranslation(0,-.25,0));return o};return o}(e.BaseControl);e.ConstructionSectionControl=n})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(r,n){var o=t.call(this,n)||this;var a=o;var i=new e.Vector2;var s=new e.Vector2;var l=r.dom;var c=new e.Raycaster;var u=new THREE.Line;var f=new THREE.Line;var d=new THREE.LineBasicMaterial({color:65280});u.material=d;f.material=d;var v=new THREE.Mesh;v.material=new e.MeshPhongMaterial({color:16711680,transparent:true,opacity:.7});o.getName=function(){return"VertexControl"};o.regist=function t(){e.renderParamers.container.style.cursor="move";r.overlayScene.add(u);r.overlayScene.add(f);r.overlayScene.add(v)};o.unRegist=function t(){e.renderParamers.container.style.cursor="default";r.overlayScene.remove(u);r.overlayScene.remove(f);r.overlayScene.remove(v)};o.mouseMove=function(){return function t(n){s.x=n.offsetX/r.dom.offsetWidth*2-1;s.y=-(n.offsetY/r.dom.offsetHeight)*2+1;var o=m(s,c);var i=new THREE.Geometry;i.vertices.push(new e.Vector3(-1e3,o.y,0),new e.Vector3(1e3,o.y,0));u.geometry=i;var l=new THREE.Geometry;l.vertices.push(new e.Vector3(o.x,-1e3,0),new e.Vector3(o.x,1e3,0));f.geometry=l;var d=a.bindingVertex(c,r,o);if(d!=null){v.geometry=a.createText(d,o)}else{v.geometry=new THREE.Geometry}v.position.copy(o);e.enableUp=true}}();function m(e,t){t.setFromCamera(e,r.camera);return t.ray.origin.clone().add(t.ray.direction)}a.initEvent(a);return o}r.prototype.vector3InArray=function(e,t){for(var r=0,n=e.length;r<n;++r){if(e[r].equals(t)==true)return true}return false};r.prototype.bindingVertex=function(t,r,n){var o=[];var a=r.fragSet;var i=r.highLightRevse;var s=[];var l=0;var c=1e5;if(o.length>0){for(var u=0,f=o.length;u<f;++u){a.setState(o[u],2);i.push(o[u])}var d=a.getMesh(o[0]);var v=this.getVertexs(d);for(var u=0,f=v.length;u<f;++u){var m=new e.Vector2(v[u].x,v[u].y).distanceTo(new e.Vector2(n.x,n.y));if(m<=c){c=m;l=u}}return v[l]}return null};r.prototype.createText=function(t,r){var n=3.2808399;var o=new THREE.Geometry;var a={size:.5,height:.1,font:e.getMicroYaHeiFont(),curveSegments:10};var i=new THREE.TextGeometry("( "+String((t.x/n).toFixed(2))+" "+String((t.y/n).toFixed(2))+" )",a);i.center();o.merge(i,(new e.Matrix4).makeTranslation(0,.25,0));var s=new THREE.TextGeometry("( "+String((r.x/n).toFixed(2))+" "+String((r.y/n).toFixed(2))+" )",a);s.center();o.merge(s,(new e.Matrix4).makeTranslation(0,-.25,0));return o};r.prototype.getVertexs=function(t){var r=t.geometry.attributes.position.array;var n=[];for(var o=0,a=r.length;o<a;o+=8){var i=new e.Vector3(r[o],r[o+1],r[o+2]);if(!this.vector3InArray(n,i))n.push(i)}return n};return r}(e.BaseControl);e.VertexControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;r.objectsMap=new Map;r.objectName=0;r._placeNumber=4;var n=r;var o=null;var a=null;var i=0;var s=new e.Box3;var l=new e.Box3;var c=undefined;var u=new e.Vector2,f=new e.Vector2;var d=new e.Raycaster;var v="single";var m=n.createArror();var h=new e.ObjectAnimate(m);var p=new e.Formula;h.setTransformFormula(p);var g=5;var y=null;var x=new THREE.Line(undefined,new THREE.LineBasicMaterial({color:16776960}));var A=new THREE.Mesh(new THREE.TorusGeometry(10,.001,128,128),new THREE.MeshBasicMaterial({color:16776960,wireframe:true}));var b=new THREE.Mesh(new THREE.TorusGeometry(10,.001,128,128),new THREE.MeshBasicMaterial({color:16776960,wireframe:true}));var E=0;var w=undefined;p.setVelocity(g);n.regist=function t(){var r=e.modelsControl.getOverlayScene();e.controlManager.controls.getControl("ClickControl").deActive();r.add(m);if(a!=null){r.add(a);e._objectAnimate.length=0;e._objectAnimate.push(h)}if(c==undefined){c=e.controlManager.controls.getControl("LoadControl")}};n.unRegist=function t(){var r=e.modelsControl.getOverlayScene();e.enableUp=true;e.controlManager.controls.getControl("ClickControl").active();e._objectAnimate.length=0;r.remove(m);r.remove(a);r.remove(A);r.remove(b);e.gloableParames.modelManager.reset()};n.getHotKey=function(){return{hotkey:"ctr+9",needLongPress:false}};n.getName=function(){return"DragControl"};n.leftButtonDown=function(){var t=new e.Vector2;var r=null;var s=null;var l=null;var f=[];function d(t){var a=e.modelsControl.getOverlayScene();var c=e.modelsControl.getScene();if(t===-1){var u=e.controlManager.controls.getControl("OperateObject");for(var d=0;d<f.length;++d){var v=new THREE.BoxHelper(f[d],new THREE.Color(65280));n.objectsMap.set(f[d].id,{boxHelper:v,object:f[d],point:n.getPoint(v),type:y,sceneName:"scene"});a.remove(f[d]);c.add(f[d])}f.length=0;e.gloableParames.modelManager.reset();u.upDate();return}for(var d=0;d<f.length;++d){a.remove(f[d])}f.length=0;if(!e.isNumber(t))t=4;r=A.position;s=b.position;var m=(new e.Vector3).copy(s).sub(r).divideScalar(t-1);for(var d=0;d<t;++d){if(o!=null){l=(new THREE.Object3D).copy(o);l.position.copy(r).add((new e.Vector3).copy(m).multiplyScalar(d));a.add(l);l.position.z+=i/2;f.push(l)}}e.enableUp=true}function h(){var t=e.modelsControl.getOverlayScene();t.remove(A);t.remove(b);t.remove(x);x.geometry=new e.Geometry}n.placeObject=d;n.removeOverlay=h;return function r(o){var i=e.modelsControl.getOverlayScene();u.set(o.clientX,o.clientY);E++;t.x=o.offsetX/e.renderParamers._glup.domElement.offsetWidth*2-1;t.y=-(o.offsetY/e.renderParamers._glup.domElement.offsetHeight)*2+1;if(v=="continus"){e.modelsControl.getControl().enabled=false;if(E===1){i.remove(a);i.remove(m);w=b;i.add(b);i.add(x);x.geometry=new THREE.Geometry}else if(E>=2){E=0;w=undefined;d(n._placeNumber);c.removeWind(c);c.addContinusDiv(c);e.modelsControl.getControl().enabled=true;n.deActive()}}}}();n.leftButtonUp=function(t){f.set(t.clientX,t.clientY);if(v=="continus"){e.modelsControl.getControl().enabled=true}};n.leftButtonClick=function t(r){var i=e.controlManager.controls.getControl("OperateObject");var l=e.modelsControl.getOverlayScene();var c=e.modelsControl.getScene();if(u.equals(f)){if(a!=null&&o!=null){e.logger.debug(v);if(v=="single"){l.remove(a);c.add(o);a.material.color.setRGB(0,1,0);n.objectsMap.set(o.id,{boxHelper:a,object:o,point:n.getPoint(a),type:y,sceneName:"scene"});i.upDate();e.gloableParames.modelManager.reset();e.enableUp=true;var d=(new THREE.Object3D).copy(o);n.setObject(d,s,y,true);l.add(a)}}}};n.mouseMove=function(){var t=0;var r=new e.Vector2;var n=undefined;var s=new e.Vector3;function c(){var t=d.ray.origin;var r=d.ray.direction;var n=new e.Vector3;if(r.z!=0){var o=(s.z-t.z)/r.z;n.x=t.x+r.x*o;n.y=t.y+r.y*o;n.z=s.z}return n}return function t(u){if(o!=null&&a!=null){r.x=u.offsetX/e.renderParamers._glup.domElement.offsetWidth*2-1;r.y=-(u.offsetY/e.renderParamers._glup.domElement.offsetHeight)*2+1;d.setFromCamera(r,e.modelsControl.getMainCamera());if(n!=null){a.position.copy(n.point).add(new e.Vector3(0,0,i/2));l.setFromObject(a);var f=l.getCenter();f.sub(a.position);a.position.x-=f.x;a.position.y-=f.y;o.position.copy(a.position);m.position.x=n.point.x;m.position.y=n.point.y;h.setHeight((new e.Vector3).copy(o.position).add(new e.Vector3(0,0,i)).z);s.copy(n.point);if(w!=undefined){w.position.copy(n.point);var v=new THREE.Geometry;v.vertices.push(A.position,b.position);x.geometry=v}}else{var p=c();a.position.copy(p).add(new e.Vector3(0,0,i/2));l.setFromObject(a);var f=l.getCenter();f.sub(a.position);a.position.x-=f.x;a.position.y-=f.y;o.position.copy(a.position);m.position.x=p.x;m.position.y=p.y;h.setHeight((new e.Vector3).copy(o.position).add(new e.Vector3(0,0,i)).z);if(w!=undefined){w.position.copy(p);var v=new THREE.Geometry;v.vertices.push(A.position,b.position);x.geometry=v}}e.enableUp=true}}}();n.keyDown=function e(t){if(t.key=="z"){n.setModel("single")}else if(t.key=="x"){n.setModel("continus")}};n.setObject=function(t,r,l,c){o=t;y=l;s.copy(r);var u=e.modelsControl.getOverlayScene();u.remove(a);var f=a;a=new e.BoxHelper(r,new THREE.Color(16776960));if(f!=null){a.position.copy(f.position)}if(o!=undefined){var d=r;i=d.max.z-d.min.z;var v=Math.min(d.max.x-d.min.x,d.max.y-d.min.y);m.scale.set(v/4,v/4,v/4);p.setStartPoint((new e.Vector3).copy(o.position).add(new e.Vector3(0,0,i)));p.setEndPoint((new e.Vector3).copy(o.position));p.setVelocity(i);m.position.copy((new e.Vector3).copy(o.position).add(new e.Vector3(0,0,i)));p.setFlag(true);o.name=String(n.objectName++)}if(!c){if(n.isActive==true)u.add(a);a.position.set(0,0,0);e._objectAnimate.length=0;e._objectAnimate.push(h)}};n.setModel=function(t){var r=e.modelsControl.getOverlayScene();if(t==="single"){r.remove(A);r.remove(b);r.remove(x)}else if(t==="continus"){w=A;E=0;r.add(A);x.geometry=new THREE.Geometry;e.logger.log("continus")}v=t};n.backUp=function(){};n.delete=function(t){var r=e.modelsControl.getScene();r.remove(t);n.objectsMap.forEach(function(e,r){if(r==t.id){n.objectsMap.delete(r)}})};n.getObjects=function(){return n.objectsMap};n.initEvent(n);return r}r.prototype.createArror=function(){var e=new THREE.Object3D;var t=new THREE.CylinderGeometry(1,1,4,32,32);var r=new THREE.ConeGeometry(2,1,32,32);var n=new THREE.MeshBasicMaterial({color:16777215});var o=new THREE.Mesh(t,n);o.rotateX(Math.PI/2);var a=new THREE.Mesh(r,n);a.rotateX(-Math.PI/2);a.position.z=-2.5;e.add(o);e.add(a);return e};r.prototype.getPoint=function(t){var r=new e.Box3;r.setFromObject(t);var n=new THREE.SphereGeometry(1,32,32);var o=new THREE.MeshBasicMaterial({color:255});var a=new e.Mesh(n,o);a.position.copy(r.getCenter());a.position.z=r.min.z;return a};r.prototype.setPlaceNumber=function(e){this._placeNumber=e;this.placeObject(this._placeNumber)};r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.DragControl=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function e(){this.actions=[];this.params=[]}e.prototype.push=function(e,t){this.actions.push(e);this.params.push(t)};e.prototype.pop=function(){return{action:this.actions.pop(),param:this.params.pop()}};e.prototype.length=function(){return this.actions.length};return e}();var r=function(r){__extends(n,r);function n(){var n=r.call(this)||this;n._model="move";n._downMose=new e.Vector2;n._upMouse=new e.Vector2;n._objectsMap=undefined;n._object=null;n._boxHelper=null;n._objectHeight=0;n._box=new e.Box3;n._mapObject=new Map;n._objects=[];n._selectObjects=new Map;n._selectObject=undefined;n._selectPoint=undefined;n._selectBoxHelper=undefined;n._selectObjectHeight=0;n._loadControl=undefined;n._selectorType=undefined;n._fliterTypes=new Set;n._fliterMode=null;n._line=new THREE.Line(undefined,new THREE.LineBasicMaterial({color:16711680}));n._geometry=new e.Geometry;n._pointPos=new Map;n._backUp=new t;n._param=undefined;n._spoint=undefined;n.setParam=function(){var t=undefined;function r(){switch(t._model){case"move":case"fluctuation":{t._param={objects:[],prePos:[],postPos:[]};break}case"rotation":{t._param={objects:[],preRot:[],postRot:[]};break}case"scale":{t._param={objects:[],preSca:[],postSca:[]};break}case"delete":{t._param={objects:[],boxHelpers:[],points:[],type:""};break}}}function n(r){switch(t._model){case"move":case"fluctuation":{if(t._selectObjects.has(t._spoint.id)){t._selectObjects.forEach(function(n,o){if(r==="pre"){t._param.objects.push(n);t._param.prePos.push((new e.Vector3).copy(n.position))}else if(r==="post"){t._param.postPos.push((new e.Vector3).copy(n.position))}})}else{if(r==="pre"){t._param.objects.push(t._spoint);t._param.prePos.push((new e.Vector3).copy(t._spoint.position))}else if(r==="post"){t._param.postPos.push((new e.Vector3).copy(t._spoint.position))}}break}case"rotation":{if(t._selectObjects.has(t._spoint.id)){t._selectObjects.forEach(function(n,o){if(r==="pre"){t._param.objects.push(n);t._param.preRot.push((new e.Euler).copy(n.rotation))}else if(r==="post"){t._param.postRot.push((new e.Euler).copy(n.rotation))}})}else{if(r==="pre"){t._param.objects.push(t._spoint);t._param.preRot.push((new e.Euler).copy(t._spoint.rotation))}else if(r==="post"){t._param.postRot.push((new e.Euler).copy(t._spoint.rotation))}}break}case"scale":{if(t._selectObjects.has(t._spoint.id)){t._selectObjects.forEach(function(e,n){if(r==="pre"){t._param.objects.push(e);var o=t._mapObject.get(e).object;t._param.preSca.push(o.scale.x)}else if(r==="post"){var o=t._mapObject.get(e).object;t._param.preSca.push(o.scale.x)}})}else{if(r==="pre"){t._param.objects.push(t._spoint);var n=t._mapObject.get(t._spoint).object;t._param.preSca.push(n.scale.x)}else if(r==="post"){var n=t._mapObject.get(t._spoint).object;t._param.preSca.push(n.scale.x)}}break}case"delete":{if(t._selectObjects.has(t._spoint.id)){t._selectObjects.forEach(function(e,r){var n=t._mapObject.get(e).object;var o=t._mapObject.get(e).boxHelper;t._param.points.push(e);t._param.objects.push(n);t._param.boxHelpers.push(o);t._param.type=t._objectsMap.get(n.id).type})}else{t._param.points.push(t._spoint);var n=t._mapObject.get(t._spoint).object;var o=t._mapObject.get(t._spoint).boxHelper;t._param.objects.push(n);t._param.boxHelpers.push(o);t._param.type=t._objectsMap.get(n.id).type}}}}return function(e,o,a){t=o;if(a==true){o._spoint=o._selectPoint}switch(e){case"new":r();break;case"pre":n(e);break;case"post":n(e);break}}}();var o=n;o._line.geometry=o._geometry;var a=null;var i=new e.Vector2;var s=new e.Vector2;var l=undefined;o.leftButtonDown=function t(){var r=new THREE.Raycaster;var n=new e.Vector2;var s;return function(t){var c=e.renderParamers._glup.domElement;var u=e.modelsControl.getOverlayScene();var f=e.modelsControl.getScene();i.set(t.offsetX,t.offsetY);if(a!=null){o.setParam("new",o);o.setParam("pre",o);if(o._model==="delete"){n.x=t.offsetX/c.offsetWidth*2-1;n.y=-(t.offsetY/c.offsetHeight)*2+1;r.setFromCamera(n,e.modelsControl.getMainCamera());s=r.intersectObjects(o._objects);if(s.length>0){if(o._selectObjects.has(s[0].object.id)){o._selectObjects.forEach(function(e,t){var r=o._mapObject.get(e).object;var n=o._mapObject.get(e).boxHelper;var a=r.id;o.deleteObject(a);f.remove(r);u.remove(n);u.remove(e)});o._selectObjects.clear();if(o._loadControl!=undefined)o._loadControl.removeCancle()}else{var d=s[0].object;var v=o._mapObject.get(d).boxHelper;var m=o._mapObject.get(d).object;o.deleteObject(m.id);u.remove(d);u.remove(v);f.remove(m)}e.enableModel=true;o._object=null;o.upDate(o.isActive)}o.pushBackUp()}else{o._object=o._mapObject.get(a).object;f.remove(o._object);u.add(o._object);o.changeScene("overlayScene",o._object.id);o._boxHelper=o._mapObject.get(a).boxHelper;e.modelsControl.getControl().enabled=false;o._box.setFromObject(o._boxHelper);o.computeObjectHeight();e.enableUp=true;e.enableModel=true;o._selectObjects.forEach(function(e,t){var r=o._mapObject.get(e).object;f.remove(r);u.add(r);o.changeScene("overlayScene",r.id)})}}else if(t.ctrlKey===true){e.modelsControl.getControl().enabled=false;e.modelsControl.getHubScene().add(o._line);l=(new e.Vector2).copy(i)}}}();o.leftButtonUp=function t(){var r=.001;var n=new THREE.Raycaster;var a=new e.Vector2;var c;return function(t){var r=e.renderParamers._glup.domElement;var u=e.modelsControl.getOverlayScene();var f=e.modelsControl.getScene();s.set(t.offsetX,t.offsetY);if(i.equals(s)&&o._model!=="delete"){a.x=t.offsetX/r.offsetWidth*2-1;a.y=-(t.offsetY/r.offsetHeight)*2+1;n.setFromCamera(a,e.modelsControl.getMainCamera());c=n.intersectObjects(o._objects);if(c.length>0){if(o._selectObjects.has(c[0].object.id)){o.resignSelect(c[0].object.id,u)}else{o.select(c[0].object,u);o.computerSelectObjectHeight()}e.enableUp=true
;u.remove(o._object);f.add(o._object);o.changeScene("scene",o._object.id);e.enableModel=true}o._object=null}else{if(o._object!=null){if(!o._selectObjects.has(o._objectsMap.get(o._object.id).point.id)){u.remove(o._boxHelper);u.remove(o._object);o.changeScene("scene",o._object.id);f.add(o._object)}else{o._boxHelper.material.color.setHex(255);o._selectObjects.forEach(function(e,t){var r=o._mapObject.get(e).object;u.remove(r);f.add(r);o.changeScene("scene",r.id)})}o.setParam("pro",o);o.pushBackUp()}o._object=null;e.enableUp=true;e.enableModel=true}e.modelsControl.getControl().enabled=true;if(l!=undefined){e.modelsControl.getHubScene().remove(o._line);o._line.geometry=new e.Geometry;l=undefined}}}();o.mouseMove=function t(){var r=new e.Vector2;var n=new e.Raycaster;var i;var s=new e.Vector3;var c=[];var u=null;var f=new e.Vector3;var d=new e.Vector3;var v=new e.Vector3;var m=new e.Vector3;var h=new e.Vector3;function p(t){var a=new e.Geometry;var i=e.renderParamers._glup.domElement;n.setFromCamera(r,e.modelsControl.getHubCamera());d.x=(l.x/i.offsetWidth*2-1)*i.offsetWidth/10;d.y=(-(l.y/i.offsetHeight)*2+1)*i.offsetHeight/10;v.x=(t.offsetX/i.offsetWidth*2-1)*i.offsetWidth/10;v.y=(-(t.offsetY/i.offsetHeight)*2+1)*i.offsetHeight/10;m.x=d.x;m.y=v.y;h.x=v.x;h.y=d.y;a.vertices.push(d,m,v,h,d);o._line.geometry=a}function g(){var t=0,r=0,n=0,a=0;d.x>v.x?(t=d.x,r=v.x):(t=v.x,r=d.x);d.y>v.y?(n=d.y,a=v.y):(n=v.y,a=d.y);o._pointPos.forEach(function(i,s){if(i.x>=r&&i.x<=t&&i.y>=a&&i.y<=n){o.select(s,e.modelsControl.getOverlayScene());o._mapObject.get(s).boxHelper.material.color.setHex(255)}})}function y(){var t=e.modelsControl.getMainCamera();o._pointPos.forEach(function(e,t){o._pointPos.set(t,o.modelToScreenPos(t.position))})}function x(){var t=n.ray.origin;var r=n.ray.direction;var o=new e.Vector3;if(r.z!=0){var a=(f.z-t.z)/r.z;o.x=t.x+r.x*a;o.y=t.y+r.y*a;o.z=f.z}return o}return function(t){var d=e.renderParamers._glup.domElement;var v=e.modelsControl.getOverlayScene();r.x=t.offsetX/d.offsetWidth*2-1;r.y=-(t.offsetY/d.offsetHeight)*2+1;if(l!=undefined){y();p(t);g()}if(o._object!=null){if(o._model==="scale"){o._object.scale.addScalar(-t.movementY/5);o._boxHelper.scale.addScalar(-t.movementY/5);var m=o._objectHeight;if(o._object.scale.x<.1){o._object.scale.setScalar(.1)}if(o._boxHelper.scale.x<.1){o._boxHelper.scale.setScalar(.1)}o.computeObjectHeight();o._object.position.z+=(o._objectHeight-m)/2;o._boxHelper.position.z+=(o._objectHeight-m)/2;if(this._loadControl!=undefined&&this._selectObject!=undefined){o._loadControl.setScale(o._selectObject.scale.x)}if(o._selectObjects.has(a.id)){var h=new e.Box3;o._selectObjects.forEach(function(e,r){if(a.id!=r){var n=o._mapObject.get(e).object;var i=o._mapObject.get(e).boxHelper;h.setFromObject(i);var s=(h.max.z-h.min.z)/2;i.scale.addScalar(-t.movementY/5);n.scale.addScalar(-t.movementY/5);if(n.scale.x<.1){n.scale.setScalar(.1)}if(i.scale.x<.1){i.scale.setScalar(.1)}h.setFromObject(i);i.position.z+=(h.max.z-h.min.z)/2-s;n.position.z+=(h.max.z-h.min.z)/2-s}})}}else if(o._model=="fluctuation"){o._object.position.z+=-t.movementY/5;o._boxHelper.position.z+=-t.movementY/5;a.position.z+=-t.movementY/5;if(this._loadControl!=undefined&&this._selectObject!=undefined){o._loadControl.setPosition(o._selectObject.position)}if(o._selectObjects.has(a.id)){o._selectObjects.forEach(function(e,r){if(a.id!=r){e.position.z+=-t.movementY/5;o._mapObject.get(e).boxHelper.position.z+=-t.movementY/5;o._mapObject.get(e).object.position.z+=-t.movementY/5}})}}else{n.setFromCamera(r,e.modelsControl.getMainCamera());if(i!=null){f.copy(i.point);if(o._model==="move"){s.copy(i.point).sub(o._object.position).add(new e.Vector3(0,0,o._objectHeight/2));o._object.position.copy(i.point).add(new e.Vector3(0,0,o._objectHeight/2));o._boxHelper.position.add(s);o._box.setFromObject(o._boxHelper);a.position.copy(o._box.getCenter());a.position.z=o._box.min.z;if(o._loadControl!=undefined&&o._selectObject!=undefined){o._loadControl.setPosition(o._selectObject.position)}if(o._selectObjects.has(a.id)){o._selectObjects.forEach(function(e,t){if(a.id!=t){e.position.add(s);o._mapObject.get(e).boxHelper.position.add(s);o._mapObject.get(e).object.position.add(s)}})}}else if(o._model==="rotation"){var A=(new e.Vector3).copy(i.point).sub(o._object.position);if(A.y>=0){if(A.x>0){o._object.rotation.z=Math.atan(A.y/A.x)}else if(A.x<0){o._object.rotation.z=Math.atan(A.y/A.x)+Math.PI}else if(A.x==0){if(A.y==0){o._object.rotation.z=0}else{o._object.rotation.z=Math.PI/2}}}else{if(A.x>0){o._object.rotation.z=Math.PI*2+Math.atan(A.y/A.x)}else if(A.x<0){o._object.rotation.z=Math.PI+Math.atan(A.y/A.x)}else if(A.x==0){o._object.rotation.z=Math.PI*3/2}}o._boxHelper.rotation.copy(o._object.rotation);a.rotation.copy(o._object.rotation);if(this._loadControl!=undefined&&this._selectObject!=undefined){o._loadControl.setRotation(o._selectObject.rotation)}if(o._selectObjects.has(a.id)){o._selectObjects.forEach(function(e,t){if(a.id!=t){e.rotation.copy(o._object.rotation);o._mapObject.get(e).boxHelper.rotation.copy(o._object.rotation);o._mapObject.get(e).object.rotation.copy(o._object.rotation)}})}}}else{if(o._model==="move"){var A=x();s.copy(A).sub(o._object.position).add(new e.Vector3(0,0,o._objectHeight/2));o._object.position.copy(A).add(new e.Vector3(0,0,o._objectHeight/2));o._boxHelper.position.add(s);o._box.setFromObject(o._boxHelper);a.position.copy(o._box.getCenter());a.position.z=o._box.min.z;if(this._loadControl!=undefined&&this._selectObject!=undefined){o._loadControl.setPosition(o._selectObject.position)}if(o._selectObjects.has(a.id)){o._selectObjects.forEach(function(e,t){if(a.id!=t){e.position.add(s);o._mapObject.get(e).boxHelper.position.add(s);o._mapObject.get(e).object.position.add(s)}})}}}}}else{n.setFromCamera(r,e.modelsControl.getMainCamera());c=n.intersectObjects(o._objects);if(c.length>0){a=c[0].object;var b=o._mapObject.get(a).boxHelper;a.material.color.setHex(16711680);if(!o._selectObjects.has(a.id)){v.add(b)}else{b.material.color.setHex(65280)}u=b;o._spoint=a}else{if(u!=null&&a!=null){if(!o._selectObjects.has(a.id))v.remove(u);else{u.material.color.setHex(255)}}u=null;if(a!=null)a.material.color.setHex(255);a=null}}e.enableUp=true}}();o.regist=function t(){var r=e.modelsControl.getOverlayScene();if(o._loadControl===undefined)o._loadControl=e.controlManager.controls.getControl("LoadControl");if(o._objectsMap==undefined){o._objectsMap=e.controlManager.controls.getControl("DragControl").getObjects()}e.logger.debug(o._objectsMap);e.controlManager.controls.getControl("ClickControl").deActive();o.upDate(true);e.enableUp=true};o.unRegist=function t(){var r=e.modelsControl.getOverlayScene();e.controlManager.controls.getControl("ClickControl").active();if(o._objectsMap!=undefined){o._objectsMap.forEach(function(e,t){r.remove(e.point);r.remove(e.boxHelper)})}e.enableUp=true};o.getHotKey=function(){return{hotkey:"ctr+0",needLongPress:false}};o.getName=function(){return"OperateObject"};o.keyDown=function t(r){if(r.key==="Delete"&&o._model=="delete"){var n=e.modelsControl.getScene();var a=e.modelsControl.getOverlayScene();o.setParam("new",o);o.setParam("pre",o);o._selectObjects.forEach(function(e,t){var r=o._mapObject.get(e).object;var i=o._mapObject.get(e).boxHelper;var s=r.id;o.deleteObject(s);n.remove(r);a.remove(i);a.remove(e)});o._selectObjects.clear();if(o._loadControl!=undefined)o._loadControl.removeCancle();e.enableModel=true;o._object=null;o.upDate(o.isActive);o.pushBackUp()}};o.initEvent(o);return n}n.prototype.computerSelectObjectHeight=function(){if(this._selectObject!=null&&this._selectBoxHelper!=null){this._selectBoxHelper.geometry.computeBoundingBox();var e=this._selectBoxHelper.geometry.boundingBox;this._selectObjectHeight=e.max.z-e.min.z}};n.prototype.computeObjectHeight=function(){if(this._object!=null&&this._boxHelper!=null){if(this._boxHelper.geometry.boundingBox==undefined){this._boxHelper.geometry.computeBoundingBox()}var e=this._boxHelper.geometry.boundingBox;this._objectHeight=(e.max.z-e.min.z)*this._boxHelper.scale.x}};n.prototype.addFilterTypes=function(e){this._fliterTypes.add(e);this.upDate(this.isActive)};n.prototype.deleteFilterTypes=function(e){this._fliterTypes.delete(e);this.upDate(this.isActive)};n.prototype.cancle=function(){var t=this;this._selectObjects.forEach(function(r,n){t.resignSelect(n,e.modelsControl.getOverlayScene())})};n.prototype.setPosition=function(t){var r=this;if(this._selectObject!=undefined){var n=this._selectObject.position;var o=t.sub(n);this._selectObjects.forEach(function(e,t){var n=r._mapObject.get(e).object;var a=r._mapObject.get(e).boxHelper;e.position.add(o);a.position.add(o);n.position.add(o)})}e.enableUp=true;e.enableModel=true};n.prototype.setRotation=function(t){var r=this;if(this._selectObject!=undefined){this._selectObjects.forEach(function(e,n){var o=r._mapObject.get(e).object;var a=r._mapObject.get(e).boxHelper;e.rotation.copy(t);o.rotation.copy(t);a.rotation.copy(t)})}e.enableUp=true;e.enableModel=true};n.prototype.setScale=function(t){var r=this;if(this._selectObject!=undefined){var n=new e.Box3;this._selectObjects.forEach(function(e,o){var a=r._mapObject.get(e).object;var i=r._mapObject.get(e).boxHelper;n.setFromObject(i);var s=(n.max.z-n.min.z)/2;i.scale.setScalar(t);a.scale.setScalar(t);if(a.scale.x<.1){a.scale.setScalar(.1)}if(i.scale.x<.1){i.scale.setScalar(.1)}n.setFromObject(i);i.position.z+=(n.max.z-n.min.z)/2-s;a.position.z+=(n.max.z-n.min.z)/2-s})}e.enableUp=true;e.enableModel=true};n.prototype.setFilterMode=function(e){this._fliterMode=e;this.upDate(this.isActive)};n.prototype.setSelectType=function(e){this._selectorType=e;this.upDate(this.isActive)};n.prototype.modelToScreenPos=function(t){var r=e.renderParamers._glup.domElement;var n=(new e.Vector3).copy(t);n.project(e.modelsControl.getMainCamera());n.x*=r.offsetWidth/10;n.y*=r.offsetHeight/10;n.z=0;return n};n.prototype.upDate=function(t){this._mapObject.clear();this._pointPos.clear();this._objects.length=0;var r=e.modelsControl.getOverlayScene();var n=this;if(this._objectsMap==undefined){this._objectsMap=e.controlManager.controls.getControl("DragControl").getObjects()}this._objectsMap.forEach(function(e){n._mapObject.set(e.point,{boxHelper:e.boxHelper,object:e.object});if(n._fliterMode==null){n._objects.push(e.point);n._pointPos.set(e.point,n.modelToScreenPos(e.point.position));if(t===true){r.add(e.point)}}else if(n._fliterMode=="select"){if(n._selectorType!=undefined){if(e.type==n._selectorType){n._objects.push(e.point);n._pointPos.set(e.point,n.modelToScreenPos(e.point.position));if(t===true){r.add(e.point)}}else{if(t===true){r.remove(e.point)}}}else{n._objects.push(e.point);n._pointPos.set(e.point,n.modelToScreenPos(e.point.position));if(t===true){r.add(e.point)}}}else if(n._fliterMode=="filter"){if(!n._fliterTypes.has(e.type)){n._objects.push(e.point);n._pointPos.set(e.point,n.modelToScreenPos(e.point.position));if(t===true){r.add(e.point)}}else{if(t===true){r.remove(e.point)}}}});e.enableUp=true};n.prototype.changeScene=function(e,t){this._objectsMap.get(t).sceneName=e};n.prototype.deleteObject=function(e){var t=this;t._mapObject.clear();t._objects.length=0;t._objectsMap.forEach(function(r,n){if(n===e){t._objectsMap.delete(n);if(t._selectObject!=undefined&&t._selectObject.id===r.object.id){t._selectObject=undefined;t._selectBoxHelper=undefined;t._selectPoint=undefined;t.setDiv("remove")}}else{t._mapObject.set(r.point,{boxHelper:r.boxHelper,object:r.object});t._objects.push(r.point)}})};n.prototype.resignSelect=function(t,r){var n=this;var o=n._selectObjects.get(t);n._mapObject.get(o).boxHelper.material.color.setHex(65280);r.remove(n._mapObject.get(o).boxHelper);n._selectObjects.delete(t);if(this._loadControl!=undefined){this._loadControl.setNo(this._selectObjects.size)}if(n._selectObjects.size===0&&this._loadControl!=undefined){this._loadControl.removeCancle()}e.enableModel=true;if(n._selectObject!=undefined&&n._mapObject.get(o).object.id===n._selectObject.id){n._selectObject=undefined;n._selectBoxHelper=undefined;n._selectPoint=undefined;n.setDiv("remove")}};n.prototype.setDiv=function(e){if(e==="add"&&this._loadControl!=undefined){switch(this._model){case"move":{this._loadControl.addPsotion();if(this._loadControl!=undefined&&this._selectObject!=undefined){this._loadControl.setPosition(this._selectObject.position)}};break;case"fluctuation":{this._loadControl.addPsotion();if(this._loadControl!=undefined&&this._selectObject!=undefined){this._loadControl.setPosition(this._selectObject.position)}};break;case"scale":{this._loadControl.addScale();if(this._loadControl!=undefined&&this._selectObject!=undefined){this._loadControl.setScale(this._selectObject.scale.x)}};break;case"rotation":{this._loadControl.addRotation();if(this._loadControl!=undefined&&this._selectObject!=undefined){this._loadControl.setRotation(this._selectObject.rotation)}};break}}else if(e==="remove"&&this._loadControl!=undefined){switch(this._model){case"move":{this._loadControl.removePosition()};break;case"fluctuation":{this._loadControl.removePosition()};break;case"scale":{this._loadControl.removeScale()};break;case"rotation":{this._loadControl.removeRotation()};break}}};n.prototype.select=function(e,t){this._selectObjects.set(e.id,e);if(this._selectObjects.size>0&&this._loadControl!=undefined){this._loadControl.addCancle();this._loadControl.setNo(this._selectObjects.size)}t.add(this._mapObject.get(e).boxHelper);if(this._selectObject==undefined){this._selectObject=this._mapObject.get(e).object;this._selectPoint=e;this._selectBoxHelper=this._mapObject.get(e).boxHelper;this.setDiv("add")}};n.prototype.pushBackUp=function(){this._backUp.push(this._model,this._param);if(this._backUp.length()>0&&this._loadControl!=undefined){this._loadControl.addBack()}};n.prototype.backUp=function(){var t=this._backUp.pop();var r=t.action;var n=t.param;var o=new e.Box3;e.logger.debug("backup");switch(r){case"move":case"fluctuation":{for(var a=0;a<n.objects.length;++a){var i=n.objects[a];var s=this._mapObject.get(i).object;var l=this._mapObject.get(i).boxHelper;var c=n.prePos[a];o.setFromObject(l);i.position.copy(c);s.position.copy(c).z+=(o.max.z-o.min.z)/2;l.position.copy(c).z+=(o.max.z-o.min.z)/2;e.enableUp=true;e.enableModel=true;if(this._loadControl==undefined){this._loadControl=e.controlManager.controls.getControl("LoadControl")}if(s.id==this._selectObject.id){this._loadControl.setPosition(s.position);e.logger.debug("position backup")}}}break;case"rotation":{for(var a=0;a<n.objects.length;++a){var i=n.objects[a];var s=this._mapObject.get(i).object;var l=this._mapObject.get(i).boxHelper;var c=n.preRot[a];i.rotation.copy(c);s.rotation.copy(c);l.rotation.copy(c);e.enableUp=true;e.enableModel=true;if(this._loadControl==undefined){this._loadControl=e.controlManager.controls.getControl("LoadControl")}if(s.id==this._selectObject.id){this._loadControl.setRotation(s.rotation)}}}break;case"scale":{for(var a=0;a<n.objects.length;++a){var i=n.objects[a];var s=this._mapObject.get(i).object;var l=this._mapObject.get(i).boxHelper;var c=n.preSca[a];o.setFromObject(l);var u=(o.max.z-o.min.z)/2;s.scale.setScalar(c);l.scale.setScalar(c);o.setFromObject(l);s.position.z+=(o.max.z-o.min.z)/2-u;l.position.z+=(o.max.z-o.min.z)/2-u;e.enableUp=true;e.enableModel=true;if(this._loadControl==undefined){this._loadControl=e.controlManager.controls.getControl("LoadControl")}if(s.id==this._selectObject.id){this._loadControl.setScale(s.scale.x)}}}break;case"delete":{for(var a=0;a<n.objects.length;++a){var i=n.points[a];var s=n.objects[a];var l=n.boxHelpers[a];e.modelsControl.getScene().add(s);e.modelsControl.getOverlayScene().add(i);if(this._objectsMap==undefined){this._objectsMap=e.controlManager.controls.getControl("DragControl").getObjects()}l.material.color.setHex(65280);this._objectsMap.set(s.id,{boxHelper:l,object:s,point:i,type:n.type,sceneName:"scene"});this.upDate(this.isActive);if(this.isActive){e.enableModel=true;e.enableUp=true}}}break}if(this._backUp.length()==0&&this._loadControl!=undefined){this._loadControl.removeBack();this._loadControl.mouseout(this._loadControl)}};n.prototype.setModel=function(e){if(this._selectObject!=undefined)this.setDiv("remove");this._model=e;if(this._selectObject!=undefined)this.setDiv("add")};n=__decorate([e.PushControl,__metadata("design:paramtypes",[])],n);return n}(e.BaseControl);e.OperateObject=r})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(){var r=t.call(this)||this;r._mode="drag";r._w=document.createElement("div");r.wind=document.createElement("div");r.dragButton=document.createElement("div");r.operatorButton=document.createElement("div");r._libDivs=document.createElement("div");r._modelDivs=document.createElement("div");r._operateDivs=document.createElement("div");r._text=document.createElement("div");r._textP=document.createElement("span");r._filter=document.createElement("div");r._filterDivs=document.createElement("div");r._url=null;r._positionDiv=document.createElement("div");r.positionDiv={title:{div:document.createElement("span"),left:"8px",top:"0px",width:"117.5px",height:"20px",text:"Position"},x_v:{div:document.createElement("span"),left:"8px",top:"20px",width:"117.5px",height:"20px",text:"100 X"},y_v:{div:document.createElement("span"),left:"8px",top:"47.5px",width:"117.5px",height:"20px",text:"100 Y"},z_v:{div:document.createElement("span"),left:"8px",top:"75px",width:"117.5px",height:"20px",text:"100 Z"},x_i:{div:document.createElement("input"),left:"8px",top:"20px",width:"117.5px",height:"20px"},y_i:{div:document.createElement("input"),left:"8px",top:"47.5px",width:"117.5px",height:"20px"},z_i:{div:document.createElement("input"),left:"8px",top:"75px",width:"117.5px",height:"20px"},mouseover:function(e){},mouseout:function(e){},input:function(e){}};r._rotationDiv=document.createElement("div");r.rotationDiv={title:{div:document.createElement("span"),left:"8px",top:"0px",width:"227px",height:"20px",text:"Rotation"},rotationX:{div:document.createElement("div"),left:"25px",top:"20px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},rotationY:{div:document.createElement("div"),left:"25px",top:"47.5px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},rotationZ:{div:document.createElement("div"),left:"25px",top:"75px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},rotationX_S:{div:document.createElement("div"),left:"25px",top:"20px",width:"92.5px",height:"20px",text:"Pitch  ",mouseover:function(e){},mouseout:function(e){}},rotationY_S:{div:document.createElement("div"),left:"25px",top:"47.5px",width:"92.5px",height:"20px",text:"Yaw  ",mouseover:function(e){},mouseout:function(e){}},rotationZ_S:{div:document.createElement("div"),left:"25px",top:"75px",width:"92.5px",height:"20px",text:"Roll  ",mouseover:function(e){},mouseout:function(e){}}};r._scaleDiv=document.createElement("div");r.scaleDiv={title:{div:document.createElement("span"),left:"8px",top:"0px",width:"227px",height:"20px",text:"Size"},scale:{div:document.createElement("div"),left:"25px",top:"20px",width:"185px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},scale_S:{div:document.createElement("div"),left:"25px",top:"20px",width:"26.16px",height:"20px",text:"Size  ",mouseover:function(e){},mouseout:function(e){}}};r._controlDiv=document.createElement("div");r._continusDiv=document.createElement("div");r.continusDiv={continus:{div:document.createElement("div"),left:"15px",top:"10px",width:"300px",height:"20px",click:function(e){},mouseDown:function(e){},mouseUp:function(e){},move:function(e){}},continus_S:{div:document.createElement("div"),left:"15px",top:"10px",width:"300px",height:"20px",mouseover:function(e){},mouseout:function(e){}},text:{div:document.createElement("span"),left:"20px",top:"10px",height:"16px",text:"构件数量: "},confire:{div:document.createElement("div"),right:"10px",top:"7.5px",width:"38px",height:"38px",mouseover:function(e){},mouseout:function(e){},click:function(e){},image:"data:image/png;base64,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"},cancle:{div:document.createElement("div"),right:"10px",top:"52.5px",width:"38px",height:"38px",mouseover:function(e){},mouseout:function(e){},click:function(e){},image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAPtSURBVFhHzVZLSxtRFJ6JsYk1JmlMTGpVqP8h/hvBH+DOhuxdasVf4MKN6C5UQW0LDd2IioJWXIkKsSBKW3DhJprbe86cMzlz55HoKl/4cl/ndc99jR2P28oScBtQsZ0qggZs6vMoAUx5gE+IQHJQmCIx6JBEmFIAEYjyedYIsh4BW/+CxGMBph0YA9h0nXbhGUTYBpREznDItKwYlT0DXDKcDRMQEDoPIUQDZuwRZzvQyXJCXnaxGBPgLJnsFcqhYG0AW2WwHRMcgc9+WwH+ccm4C7v1H5ZQ1dOvfKoin5otq/7jp5UvFDxGuYp7gxUJmUzWqtW+WE9PLWth4TMykUjoEdjSjriin4u+PlvB0Y/3xwShbaulpSVl4u7uThVLRQV6SK0LRBtUB+Zy79TZ2RlptbG6uqoGBhIeWdaH0pKdOAAB6bJSqZAJPzgoNzChD4GEBcNYXFz06TF77pT5MsSELETh/v4eOTb2wV2+ks7YxcUFMgqPj4+ujunXHxAJLS8vk3o0ms2mGh19r4aHc+r29pZ6o7G2tub1JwLDgHBD8QANptMptbe3Ryai0Wg01Pn5ObWicXV1hcFzAKZfGyrmcWWkUkPWt6/fsV4ul7F8La6vr7Gcmipbf//9ce4L6ZdPvowuiJlMGnlwcEBzfDl0MKpQyCPRbpg/3d/Dp6xDptLpIbW7u0tz7h5HR0fePQMM8kP+Oy6ZZDL5Rm1vb5Orzjg+PlZDQ4OoCweHifZMn9SOuRsLNpV4UnzQY4lE0iqVStTRGSCbTA5g3WfePEjc9kRJkfpmo1ksjajLy0uae/fAy3NcX57ClrRr0oY/is0DDrhQKGJ5cnKq6/qlfwVarZY1OfkR6zc3DSwDoZ323CmLzFA+P2Kdnv7C9muzw4AsASBTN791lsCruY8AYSespPdMpweWUa/XVa1Wo1Y0np+f1cTEuG8fwfcXlKHHfmNjg0xEAzZ6NptRg6m3Xb99MIF43Pnukj4hqHZAIjAQ7PRyw4UHzOWyri5cnjs7O8gowOcH+HAIgTnBwcehc+yNgIDT09Ok7sf+/r7KZPUbpyl1gJAp4ObmJkn7MTc359GR7L23zF3HgCzNzs7SnNo4PDzEzHDKWRYo2ymdpa2tLdJqY35+3qNjMviLkYICBzMzM8iHhwe1vr6uhvM5NxhJlpdt+MhbWVnBQKrVKrL/TV/blyT59N1DcDXIDr4qzD5uy6vEY+ilIOWYawVKzTCj4Fg6N9uhCDJIvjwgg85rbwxKR1JXliZfBHYQoNhzp8wJiNLlSQ2DUhCZBRgPEwiyGQIMATe1NEYGoPD4MB2ajmDcVDJlguCRt6z/90BrX0HDI5IAAAAASUVORK5CYII="},spaceBew:{div:document.createElement("input"),left:"15px",top:"40px",height:"20px"},spaceBew_no:{div:document.createElement("input"),left:""},attach:function(){},dispose:function(){}};r.clickMap={lib:new Map,model:new Map,filter:new Map};r.imgSrc={dragImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAABSUlEQVRIieWVPY6CQBiGB3YTqEiICQ2xo6DgADRWVF7AA6zN2hghIaGEG0gllWews/MCxprQUNhQYIw/hbF615msu24UdzcRLHiTJ2FmvpknMxOAI4SAPCH8M6T1FL/eG3Qch6xWKzKdTkme5w8Vv5zwiwYFQSCTyYS0221yPB7JZrNhPCoogud5RFGEc9I0hed5MAyjcM4/uF+gaRrW6zUuk2UZRqMRWq1WeWJKEAS4ld1uhzAMyxOrqookSa7E2+0WnU6nPDHFtu0rMb3/Uo+aIssyFosFEx4OB5xeL/Y8GAy+6zjuFy7XvFVAuJ/iz/63bhf7/R7vvR5M08RyuWRy3/fL2zFFFEVYlvXV1nUdcRwz+XA4LE98i2azifl8zuTj8RiSJFUjpiiKgtlsxuT9fr86MaXRaMB13T9/1bizverU739cP/EHVfvqFsTzP+wAAAAASUVORK5CYII=",operateImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAUCAYAAABxnDbHAAAAYUlEQVRIiWP8DwQMdAaMQEx3S5nobeGAWcpCSAFylDMyMmKI4RKHiZFlKTYDcBmIy1HoYECCdzT1wgE5ZcegjFMWcKwywFIjHaKXcTQhIYFhlJCIADCXk1L24gOjCYmmAACDEiod0z8TBgAAAABJRU5ErkJggg==",buildImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAMQSURBVFhH7ZfPL2NRFMe/o/GrqlSUoKkRJCIWLEgajbERxMKiuwYrG4smYoRYiJGICBsxCwtsRGJS3Uisxmb8CVpiYUNItX7FRFNKMO+c3CZmItPe914yzcRn03vPVT7ePefc+z5UVVW9IIVgoUgkIqb/FpPJhDQxThnehRLxfwqlp6eLkXZ0EaqtrUV5ebmYaUMXIYfDge7ubjHThmahtrY2DA4OYnh4GJ9aW0VUPaqFTLm5GBsbw+TkJIxGI56envB1YQGdnZ1IS1P/f6r+ZuT2FisrKxgaGsLp6SkMBgNmZ2cRCATw/Pwsfkoe1UJNTU0YGRmB1+uFzWbj2MTEBOrr63msFlVCFouF//DBwQEODw9FFMjMzER7ezvW1tbwsaJCROVQJZSTkwO/34+6ujpUV1eLKBCNRtHY2Ii5uTmEzs5EVA5DQUHBl4eHBzFNTGlpKcbHx1GhPIH9/X00NDQgKyuL16ampnB/f8+iR0dHuLy85HiyZGRkyAtRwtJW2e129Pf3Q/m+WAFaWlp4uxYXF1FSUoJbJfEfHx/FamJUCfX19aGnp4dz5bUMQeXe3NyM4uJirraTkxOxkhwkJJVD1Ht+7OzAarUiPz8f4XD4t6QmqCfRVoZCIdTU1Iho8kgJvSjb9W19ncerq6sYHR2F2Wzm+Wump6exvLz85loipK6wn5Xjwaw8pfn5eVRWVnI10edbXF1dcbN0u93Y29sT0b9DV1gpIdqymFJFdG719vbyLyBisRh/Uh/a2trCxcUFnE4nZmZmeAs3Nzd5PRHSQnTvGRgYQEdHB+fR9fU1Xzt8Ph+XPp1neXl58Hg8vE6i9KSSRfqSb1Qa4o6S1CTV1dWF79vbcLlcWFpa4vKmoyM7O5s7eTAYlJKJIyX08+YGu7u7OD4+xvn5OXwbG1xRd3d3XOrUFOl8i0m0kT9RdXTEITGCtoq2iKBWQOJq0SQUJ1cpb8odPdBFyKI0ycLCQjHThi5CZWVlur156PZuX1RUxImuBV3f7bXKxNFNSC/ehRKRckJcZWKcAgC/AEnwEqRUPL/0AAAAAElFTkSuQmCC",structureImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAFjSURBVFhH7ZaxasJQFIb/tmiD1cUQIhIUxN3F2RcwOCdb9QEEt4wdzSNk1IJ7HiP1LSQ6ONglU0Da5HLAUqMnQm0t3A9Czjk3l3zcHMi5a7fbH7ghhFAURZT+LeVyGfcU3wxSiEMKcUghDinEIYU4/rfQZDLBarU6e7mui0KhQDsuJ7dQt9sVQhy2bcPzPCiKQpXLeKhWqy9xHFN6TLPZhGEY4iWVSoWq52m1Wuj1etA0DbVaDaVSCU/JaPG+29ET2RSLxex5KF0IggCqqlLl59hsNhgMBthut1Q5cHIeGo1GV5FJqdfrsCyLsmMyTyhtzmvTaDQoOpCeUKaQaZp4Hg4pS/oo2azruojTIw/XaxFzPCafvtPpUAa8LZfi/jqfw/d9EX/lpNB30saeTqfY7/dwHAdhGNIKz3g8Rr/fx2KxwGw2o2o2uYV+Cznk50EKcUghDinEIYU4pBCH+LlSfAMAnygdcmUaxSThAAAAAElFTkSuQmCC",waterImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAALySURBVFhH7ZZNSGJRFMf/Sl9ERDRFFEGboKhttpvItoFNoPtW06ZoYxC2iwgEl21aieBEULvW0SJcNLQNIgp0JqUPUFJrEtPm/a/XYciPd5/TI2H6wcN3rpd7/++cc889lsHBwRfUEUJQOp2W5vvS1tYGq3yvGz4E6fF/CmpsbBSPCqacsp6eHvT19aGzsxOjo6PQ9sDJyQmCwSDy+bycVQpP2T8Jam5uRm9vL7q6ujA0NISBgQHx29/fL8a5QZG9vT0sLy8jl8vJkVJqEtTS0gKn0wmbzYbh4WEhgmNWa2n0M5kMYrGY+P/w8BAej+ftPdTd3Y39/X0Rkr+5vr7Gz6sr/IhEcHNzg9PTU9zd3eHy8hKTdjvsk5NYXFx8ew91dHRgZ2dHJCnz4uzsDOfn57iKRpG8v0cymSzZdHp6Gg6HAwsLC8hms3K0FAoyfMqYN1zU7XZjZWUFfr8foVAIkXAYiUSirAeen5/R3t6udNIMC7JYLMhqGzw9PeHlRe1eLuaXynzDgrhoRhNTLTnLQa+aIojQO0YEUQxPnGmCVBcvwrkUpfIRNYWMiZs3IIgfkEqlpFWdmj1UrZ68hiHmU654vsawIHHKNPfntJOmCufH43FzQka4sJEcYh1iyExLaoZLZfGGhgZxj/FpamoS3tWjJkH8Yr0cmpqagtfrxdbWFjyrq38qvB6GBf3SkpOXZjXm5ubEleJyuWDXLlbb2Jhy3VISxDvo88SE2OjLzIwYo7BysCHjHfc6PI+Pj/KtOrqC2PX5fD5807q9tbU1rK+vY2RkBOkKdeWT1qy1trZKqwC7gYODA2lVR1fQ0tISZmdnpVWACV0pqb8fH2NzcxMPDw+iLwoEAvg6P4+w1g2ooNsPsfUcHx+XVgGGZHt7W1qlsACyhWXy397eKpcIpX7o6OhILEwuLi6wsbGB3d1dYVeCCRzVGjZ6SFVMEV0PsX6wf+Yvc4EbmUVNLayZ1NTCms2HID3qTpBIavleBwC/AUKfh6DO9GVYAAAAAElFTkSuQmCC",eleImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAQPSURBVFhH1ZdLLN17EMe/7fV+v+IZ1CskuiBu6jbRRlmwY0E9KooWCxLaqIggbliwqIWFtNGFhUTYEIKIEGm1C5F4VCKRNhGJiHim3oTb/0x/Z1H/x/mfc2573c/mzMzvz5n/zPxm5twKDw//BzcIdujw8FCo/y1OTk64LeQbw//LIWtrayH9PlQd8vPzQ3JystB+H6oOhYWFob6+Hg4ODsKijZeXl5AsQ9Ehqva/7t9HYGAg2tra0Nraivb2dvj4+Ign5JSXl8PZxUVo5vPTtacvbGpqQmpqKusGdnZ2kJGZia9fvgiLnJmZGXR0dKCrq0tYTEd27Tc3N1FZWYmqqiqcnp4KK9DZ2anpDL2Ir68vqqur4enpKazmIUvZ8fEx+vr6cHV1hb29PWxvb6OgoIC9VyM0NJQ/6Zni4mKWzUWxhry9vbG/v4+MjAwkPnrEdRQfHy9O5URERAgJKCoqQlBQkNDkeHh4CEkZxdEREBDAPWh1dVVYtGlpaUFubq7QgIGBAQwNDXH66LZSBCmlJGdlZWFhYUE8+TMUYYtmWVRUFEJCQlBTU8OfWpydnSEnJwezs7PCIsckhygtcXFxiI6ORvTdu/hTkvVyeXmJ/KdP8eH9e2FRRnbLtNjY2ICdnR3S0tJMcoYoLS016oyBP6Qiazw/PxeqOvTM/Pw8ent7cSqFPzY2FlZWVuJUnYqKCgwPDwtNGxsbG/0RMrC7u4u216+RmJiI7u5uYVVnZWVFSPrQHaHrHBwcYGJiAq6urhwtNaguRkdHhaaNWRG6TnBwsJCUSU9Ph3RxhGacf90hmoWDg4NC+0FhYaGQjGNRH6LVZGlpiYubrnZJSQnGx8f5LEyKyjOpa+fl5fFZQkIC1tfX+UwNixsjjYjp6WkexM+eP1e82sF37qBQmoUnJye8xmhhtA/R+KDB6ujoyDqNlKSkJJYJGgc0jCkKSs5QBA++fUNjY6PutUTToYuLC/7Snp4e5OfnY2xsjN/UgLu7O88m2oWU8Pf3578jaLXRg9Gi/vjpE2JiYtDc3MzX8rNUMwYmJydVByVBw7SsrIwjS1CK3dzcWFZD0yEann9L4TZAo4N0F6n3EBRBJWjupaSkIFPaMm1tbTEyMoK1tTXU1tZyx9dCtTHSTpT5+DH/I7pFlLr+/n5sbW2xvLy8zEvcdSiNuU+e8A+EyMhIttnb23MTffHyJY6OjtimBGVA1y178PAh3r55g3vSknYodWg9UJqoQxtSREXd0NDAshq6p/3c3Bw6373T7QxB66+zszOmpqZ45mVnZ/NvPWPo7kPkvSn9iiJUV1eHV9LiTy9COm2Qi4uL4gk5FjdGLWh3pi1Rq2auoztl5kBriinOGPhlDpnLjXOIa0jINwDgOwIkfE4oeL/zAAAAAElFTkSuQmCC",gasImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAASXSURBVFhH7VjbK6VRFF/ujruJIeSSo0jEqycKKS/ejCIeeZ0xXnhgovgH/ANqkKM0pMyDB+VRJLnkEnK/i2Hc5/utzjptX87+zqFpPMyvdt/Za+9vrd+67PVtfOx2+xO9IzChy8tL5/TfIiwsjHydv98N/hOygpaQj48PD19fX9cQ+Pn5UUBAgEuG30FBQTzHO1jH01toCUGpGJCn4PHxke7u7nhPbm4utbe3U3NzM0VERJC/v/8z8t5Ae8qgVDx9eHhwyYKCgyk6KopSUlKotLSUKioqKMqYg2BZWRltbm4y4fv7e3p68ryr4JRpCUnoAWwuLy+nnJwcSk5OprS0NEpMTOQ1wcnJCe85ODjgOZwAMU9hSQh1AQ/haXZ2NvX393NKBDAG0pLK4+NjKi4uZmICbyOkTbR4iChdXFzQ+fk5y2EEQyUD2Gy2N9UPoH1TNXxmkBHPVTIrKys0OjpK+/v7TMQWEsJy9UCYhw5aQvIyonR7c0Onp6c8h6GNjQ3q7Oyk2tpaqq+vp++9vRRsFPvH2FjeYyahDh0sYwsFIHRjEFpbW2PZ0NAQVVVVUXd3N+3u7nL/uTRSCuTl5XHNiWFEU4V5boZHyUZEoGhxcZHnq6urtLW1RYGBgWz89vaW8vPzea2yspLbAepPjYZKRBclyxrCy1IL2zs7LE9ISOA5iKSkplJHRweVlJRwJDMyMqirq4syMzO5L2Gf6AFk7g4eRUhwfnbGRtLtdk7N16Ym+jk2RtXV1Zw2GAOpgoICri+0ChgXh1Do0mjdwbIxyhOG4uLiqK+vj5KSkrjA4+Pjed0dtre36ZNRaxvr688II814mmHZh8QrCfFvo7Cvrq5YeUxMDNcJ1l5KAWTo5N/a2tgB+YzIO+7gUcokUsEGkRCjzwBogCALyLoKyGC4qKiIWlpa+FuHqLwUGRWWRQ0FYhC1ABLo2AsLCy5P3Xks7xUWFvJBQJSsYBkhKAURINZoehiDg4NUV1dH4+PjvC6GzcABAHaM07m3t8e/EVl3+wHLGhIyAL7woaGhNDU1xQ0RqRgZGXkWIRh3OBz0+csXqqmpoaOjI4qMjGRdsk/VaYaWENKlFiF6C4BvGm4COEXoQcvLyyxHw2xoaKDGxkZyDAzQ7OwsRwZ7cUsAKejDcActIXiCAUX4TqWnp7McX36QhSFEZHJykuU/hodpZmaG60yuLohkeHg4JTjvTpCpETVDS0htYiAwPT3NdyJcwCTsUI7IAAvz88+MoZPjjgQ9H6KjXWui8yVoCanK8bunp4daW1u5KUpN4Cn3JKRCNYZThasJ3kNaUdBW0BKS+pGBjn59fc3REjLw3s9pCCcQkNoDgYmJCXZiaWmJ94sj7mAZISiGp9JDkCqRA5A/On/jBGINA0R5zSCH4y86dGQALSHArABKJTVSR/KMMI63DkJWB0tCOsB7ToFz/sv5kZa04OktXvXfDzEkkcHHMysri+bm5ujw8JBlIOtJilRY/hn0EkBGIgBCqBUxjrn0H4zXEPI6ZTAAAniiltBrYBiAHHdvyFDI3pARvKmG/gY4Zc7f7wBEfwDnD7nUaGwcCgAAAABJRU5ErkJggg==",
HVACImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAISSURBVFhH7ZgxayJBFMf/p6g5ES4oiIXFBbeSSykIFoIoViIXbGztJKdYaidY+AEsPAvBRjvFXpCcQq7IfQOLKNroiRZRREWSzGQM4ZplZoSz2F+z770t9se+NzPsflIU5RlnBBVarVYs/b9YLBboWHw2aEJqaEJqaEJqSAkZDAZ8ubxk2WmQEmq1Wvjz8ACXorCKPFJCNpsNJpMJny8uWEUevdVqze92O5byUa/XsVgs4PF44HA4MBgMcDgc2F1+jEaj3FkWjUZRKpVYBgyHQxQKBXQ6HVbhQ+os0+l0yGQyLAN9M/v9HtVqlYqKIiTkdDpRLBbhcrlwfLt6vR7pdBrNZhPhcJjWROAWyuVy6Pf7cLvdiMViaDQa7A4Qj8fpXAUCAToPInDPEHnYeDymA0wIhUK0TYTtdguv14tv19f4fX8P3sUiNEPdbvddhjCbzVgEugX4/X78urvjljkitQ+Rwc5mszSeTqf0GgwG6VUUKaHvNzfw+Xzo9Xp0nshKIy0loqJICf24vcVkMkEqlcJoNEKtVoPZbKYDL4qUEFnq7XYby+WS5uVymQ52JBKhuQhSQoT1es2itwH/WakgkUjAbrezKh/SQv9uGZVXIVJLJpOswoe00GazYdEbq6cn5PN5zOdzVuFD6nD9enWFv69t+tg2GaQ/FIePjyeTOSLdslOjCamhCamhCalxZr/0gBeor7l5E5UuBQAAAABJRU5ErkJggg==",saftyImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAEvSURBVFhH7Zg7ioRAEEBrdlAUjAyEdcRIU0MvoadxnXyNvYQHMDDQa3gIT6AgCCLsUkPNwuxnum2FNegHDV1Fiw+7q1BPnud9wIG4CY3jSOH/YhgGvND8MEghFlKIhRRisYtQEAQ0284mIVVV4S1Noa5rSK/XW9x13dcQQbhTY1fN8xyiKKIMQNM0D7HrujTjQ7hTW5YFRVE83Bz5HouwWsj3faiqCsIwpMy+rBJCCTwvjuNQ5m+maRKS5haK4xjKsgRd1ynzHFyH6/G6NZxN03yf55nCn2iaBkmSQJZllFkHnitFUaBtW1iWhbK/g1XKfEL25QJ931MkxjAM8GrbFD2Hu+xF+wrCW/7yBY2HzUK4HfexB3LLWEghFvJDkYUUYiGFWEghFocTOtgvPYBPBNNTItRQvrwAAAAASUVORK5CYII=",otherImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAP3SURBVFhH5ZhLLJxRFMf/iEdEEY+KeBex8lioiEdEIpHQVS1YeISFjaJWErFoYmNDIhIkRCvEowlViUckFhYIwqJdVsX7sSHxfgS9584ZM9/M97WG6VTSXzKZe879xvzn3nPPOZddRETEHZ4RUtDJyQmb/xY3NzfY8/jZ8P8IcvfwQFFREXp7ezEzM4Px8XEkJyfzrDaqgtra2rCxsaH5epuTw0+qExwcjC9DQ6irq0NKSgqCgoKwtbWFb9+/8xPaaK5QcXGx/MPt7e3SpjG9xsbG4Cl+vRYv3N3R2tqKyMhI9gADAwMoKyvD8dERe7RRFbSwsICpqSm2lJDA9fV1tsx5k52N6OhotoCJiQnU1NTg6uqKPTri4uJ4pERVUGdnJ4/MWVpa0hRLpKWl8UjHyMgIrq+v2dJRW1uL5uZmtpRYPai9vLx4pKO4pASenp5sAVVVVSgtLYWLiwt7lFhd0O7uLo90vI6PR0dHhwxuWhkSRBwcHMh3U6wqKCQ0FDExMWwZSEhIkMefVkbP9PQ0j5RYTVCoENPf14fw8HD2aEOlqquriy0lfxRE9YWgL9Qi7NUr+QUBAQHs0YbyUWFhIba3t9mj5LfFdX5+Hv7+/mwBDQ0NaGpqYktHSEgI+sTKBAYGssfAkcg7y8vL8Pb2xvHxMebm5tDf34/9/X1+Qgn9+CdVe1qZnu5umYlNOT8/R35+PhYXF+Hg4ICbmxue0eZJ1Z4C+NPHj6piaGUKCgqkGOIhYvQ8SpA+gMPCwthjgMSUiNxD2d4YD5GL6HNOTk7sUcdiQbRNFDNqAUxbTxXeWIyzs7MU+FnUMzr63WKLMzMzedYci2KIRAwODur22t7+/gQSaivj6OiI6upqRf4h7u7uUF5eLsuKMRbHELUTl5eXSE1NRVZW1v1poQCm7sB0m2JjY2Vgm2JnZ4fKykpFSdFjkaDExESsra3h8PBQvl9cXOD09FQRwMbQ9rq6urKlhA6D2B22DFgkaHR0FOnp6WhsbERPTw98fHzMYsaY29tbHqmjNm+RoPr6ehlDGRkZ8BBNWl5enqYY4ufKilxBNVZXV/FDzJvyV69BFNTvRXV/J7pFihs9Z2dnqKiowOTkJHt0UFA7iP7lg2k3Zy1oSxbFClKDlpSUJH10wqgdUSuulKP+qiCCRDmJXPTS1xcH4jDMzs7Kbd/b2+MnDJAgixPjY9gTTRsV6t2dHdmeRBhdAEyxiSD65dQNUMWnFdra3OQZc2wiiKCESqJyc3MRKHKQcZAbYxNBFKNRUVHy5trS0oKvw8MyuNWw2X8/6Jbh5+eHHRFHptciPU/qhyyFygxdMLXE6LGZoIfy7ATJGOLxMwD4BevgnYp1zWAcAAAAAElFTkSuQmCC",modelImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAABRCAYAAAC67wTqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABOLSURBVGhDlZrrr2dXWcfX73IuM2fmnDNlTqeFYAKoMzW0FuyoMdCLiPqGxJDoP4BJ3+sLa6IJQjER/gDTKJVoA2q8lJaSQkQTQ2MshgJ9obYUL1VDa3qZS2fO+d22n8/32ft3Zt4YXWfWXrfn/jzr2Wvt34xuedtut7k5bV1rrVvx6Mt43NrISdo2am21WjE3bqPRqC2XS8aZbquua5PJpHXMjWhbWxZCEKHpiMfIIThLlibgQAiQUdFYrjKczaBx7rb97vXXL2VBJBcswJRQEpIHrcRX9GXgWgestBVuMkXQRZf5oTi/5i0txtKJMswpfydnYObzrh0c7Kn0CCQITYAESyuMkWJjQ2vQ949+11GXtT6ajtuqZzwSnnG3WLUprTScE9fxBLqTaaMPd1rYQXvSNqZTQKmxgusKP2rjBVoxZoC5EH217NoC8yxmHRqvqMu40nUJwyvOUNCJwtCfqDHqjvDJGBrjwYIgijMZTeLmSawyYW2UvmGQUFiBueqqL5JUx2PiQJKMlZTlciHz0Aoh4OM+LaqZkZGGjqFDs8Rs3SAxRWuKI6PEEYI57qI03PBbYhJf6kL74PTYlDGqlRBIiqmtynBcEJa/uBVY9EMj8ZmHaGQRoRdCwUdIIrPpxrQEA6ZjbonijhUQMULdgoXFtutDF8jMipUwo26UkUbJvDHh7rBvzBiYoI6xqoxXCKqowurSCRLYT5zSLhXCHaM3cFXFiwpUJfqUWIEquN3GcpfJCIGUZsQ4loNjNPTPdbBiCQhrCctYGFzDkzUsAfO4mCJeBCSAIAssQq75S9+xBBhgzH7WhyL3fVyBuwkQHv6jRkGKQqV1ATqCFRVdwWyhlKIhEjAK0rCiUI5HhgptrCiJDLQGxe0ahABoao3EOKrwD8JaZcmCaypSqQMUx8JQBVZj3WZRcTdB5LI67oUwP9mXjjs0zNUvpkXtG3COkyCtO1CXljYCwLBfHyztgmujPs4C5wowCiuNDF0Pg74GDIH6bgWTYoE0MFNcNcyYR6YBi2lpJcooeBKPsD2M0wapJS5DkAghsdDo1/pqiOgldY/kx4FtlmWB3RMNbiilVdhnLMMQFH/gEIBBMSXSomLQkhPMcS76Z1x12RS2RQf16fTJTlqD+Z2PpNIXRmZ5UIpmiFjSt6Mgmak5yQRfmggScsII78BlxsINuxiBSl+fNy4439GKFmFtpdBDV69mQptaTT0rIRbtWEB6Lkm616DijAn+6RE1h30NTHgBiBAs0PfFZxJz7EvSHGMZhA9Vx1AZ8levQuZkpLDlDoXSZUwrQ+/+4Nj21q6XLTMDfbUZ+bJjUKnebW1cBTdM1F64ihADXEF8HxVA0gSta75SCkrG8uk59wwH5QwtOwiUlSSyZN2oAICqWehLKBk36hZsMaAG/1hwLSuNwAgP/2W4oT3E6n0pHdcRD5hl6MlTmJ6BL7tYR3Etia0imJ1AN5YJqloJ18PY123uml4YEVaJG4XglccxRJzE5XDckCc0VxwjixpktIr4oat2dLOtIleZU+QIoHudTaqnGoixCLMQVdi8IlSGec88CmOFDVXFEEbryIJ1RRnSSd5xQzLLJBMCSthxhTxMeJbSeaxrdg6Lyi+MxBW84tJxXxBSGOVu/Rt+LQx02C/pW6rLU+ngXRrxF8shRRKlCS3jhC4ACGK8lBSiFUM7fVHQWETXRELhoSuP/k+bytADoAviZ0NILJO0Sq4mZcbK2Po4FqMM2jtU2dUceN2EG+MagRTGU6BC++c8c+64qe6OdZ2oE6X0QouNo64QUxbOzkyshnM0CEq74pqRmAFGwgo+z3kbQnLn4UHNk6MbI1aLWL4DsShKJciBm3DQ96gcQSWm0nCOcPzLLswRQ3zNycRC80jcowLCKcWkH+uCCcJNTaISAsPbRDdftgWCK4y3kQ6mbl95brJelwFNAE1VDy15ajHoc16fEDKldB4Ka2JbcT2B4eaobQi4qeYAcucS2SyKDnFlrjcQ6rhPjXOtoY/tdYfhOEKJuAa+usSOlkdy+CENNIxD5XKNaOvjixI/EiuT/i6myTR1hFByBJ1ubcTHBl5gZEIdbyE0MPX6QbBNc4FWqsCvzcEEKFMEH6OkHsirSDikWBoWwGiY0cGtu92bly+3DfcezAy8VeyuzEK4LfG7SB7qKd5QTRYSQAZunas2P1LC/71sn560KYwXYBsmbobcVlBwgfX29/e5Sr99r7v05iVlyYJmS8aGm0E+laNyaGJUXeb2Knn73K9m9kftMkrN54v28sv/0ra3T0IHdZDxaHbU3nH7OwN/9uAALxBXpm2dBU2trQG9SO7vIdDZg73uDQTCmljGwMJtBK6RL+AIt+uaXFl6zRITjmiXbPuf/vAD7Wtf/Wtw3FFi3VwSqJS9W3balUvX2+amlmVOunoCFNHOYCFjNhrrngku2QB4dqjmSE7VIssFfXLRir67Updah7v+T1788TCcYY3FYr6u8/msLeZz6B2hxKh96IGfiRekdwSPpBYUNZq8+ivH6OBgt7t05XK5BuEOry3bffd9oD388O+0rc2NNoOguWgy5uZpRFMGCx0eHrZTOzvtXe96dzu1e1p1a0GDDIair603xhvt1Vf/u/3Hv/0ru3ezffJTH29PPvHlWMukK+3Tu7ut3Xpuv9vabt32zqTbPukdonW//9lHuhnZb7FYdPP5vJvNZmnRuJuv+/Pu6OiowwK0h91b16921w+v3VD78XXqNfq0R5heGtL97KOPhNeJU+NuC74bW607IHxMLCmGlvnF8r2XXkoyM+iWnXtiRcJc1BHFP9vs/67Nmc+NwlRwU2EsOS3Vr9WHKdIB8y/+84uZMxDXmHRMqAHQX/5ZdIUlx4Q+T3hdXbET6nNKxY7pYIorp9MNEuPNNXMEpOedOiWEZPrqekQoDGN5DP1pgHtB0qW4A7wl3FTQbHO62Z79h2+0zz36e21n5xSJcAPMChatpPZjvwXxxr18+Wr72Md+ud3zYxcT3OHS05dfPpBR5DnwDb4B5dcMr0LrgjDKo0i6KLtgY8oumrU/+sPPtc9//o9jvYv33NMuXLijXbjjjnb+PPXCj7T33nlXO7j1tvaFL/xJe+SR300emhq5ElOGQYBeijTHkvqRDeaYzLRf52MkcxuVNPyzAy1cM5u/1b770ovtypVr7ed+9ufbvffex/Y9CmwsDd6UpPfmpTfbn//pn7XnnvtmOzw6bCdOnOQVhouKVMivbzC9S81DisXb3sCt40VNUW6QWDQFruw9attbW5nfZYuePLnDdj/Vdk6faqdP7VJPM3+6nTmzj0u3iSFdGmmrGisk3ZuLbvYdaq8PcAfCe/ofij1rrIyAvrndkp5nLCZBSz4RczjSAksPSRQ3xeWrV9qWwveWgGteuL2KmUqhO2RySyxXODcDDagODLY14R6u3CtM/Sl0j5CUUd8kPWEdl+N9QqfvD7yHJUSTgUMZZy7F7jBMPwMY9wLt7u7H91rM+HL7m8219Pb2ibZ/5kze4EMJbPVKwaEMitHY49bBxsVVBtUajE6xPW4VxTK47Nln/6499eUvtce/+JfUv2hPPvlEe+KLj7cnnny8feUrT7fXX3uDYD4BpJx0V9AocoFWP65GGP4xIA8VUzVXuGHdUvNVhlfT5mYF9ac/8+m2t3uGHXeZkSdIrINBNk9s8EJdtn/6xxfaL/7SL9RbHSZxa09Na62TIa09DZKYH0zlc3106KVQWBNkCPSS97K273333wna7Xb27Ln2/e+/0t7/vovtzrvuaucObm8vvPBCYCYkUgVJ0gTZviUuy3FGQerI4giw8qD86xosSEkb5o6ZVKhk7qKxLp98+BPt/vvvZftvt8cee6w9+gePts9guTNv28u6glhuihlKdOunvFY71jLy8ygWgayJLPtInZ6PwYRUrbTot7blQw98uD391afaq6+8ka1rLvrh8+fb7efeXgDAhm4IVM9izxmLt2VvHE6MuUzUVRoIXyF50wqk3Yw2sfo6aMmRI63lmWeeaXe+9862u3cqWfm5b32zPf/887jwv7J+/TqwcUeJoJpRNaSKl8L4S1JdTMn0zpuXfJ8VJId5Dt5lN0rfLBaLtkNmvvuuu9t/vvxK5h588MF23/0fbB/96Efab/zmQwF968rV9gPvfA+1tbvf936y+A5W9TZWOg6114+2NpMnihwAz+aANkrd3q4D2q899Kt4Z9XhnhysDj1kXb/OQe2Ic/6qIzunPv/8t7vvfOfb3bW3rnZf+5u/6r7+9b/tnv3G3+fw5rqwRxzIDg+v5xBnRTHWFt1Dv/4r4bVzeqM7eWrabZ0Ydedu44BWlvHlyhHNyxHlB3/oPK+GObHETZXt7C9C2b5YUEv5irCeP38hdcI76wM/9cF28eJPtB/Fgh7gjDXP1RUOvquqGuh+/HrPu8+HV149WodNlUvG7e+4pfMK485ycX7Utfs5U3/8tz5FYtvOkUMCujWxFZlB5jm8Hty6XolzuVRv1wFIKCAE7JqXa7fThPcbpm8P//Yn2lNferptbnPKMETA2z29VwK99trrpYW3VIjjIYBgXsb7/5X/I447dutkBbIZekkyzUXx4BwXxUuXAFHSKIFW7IxSb008x1i01hq2btEKTK9Kfi1pud/7HUBDuWSQJhcRtO4173haQ4COa1S+SQUOK3Mb3r9lz/OQGbrM67IfHbizxCXLmf7tD/Tew3ghaUm/AeTIkDtanbO3tnCfwgvPn2csfyo1bvIbW5gMjFRWUMYw9USatMNa6AZGYrYgc5FImW4AZCAmhnxfCVfutHYTv/lssOatxHmYcKHMb7W4oKyrauBxhQ73vlQUQsMG/OFc4G+2fa9vIWLsmiT9gThFQdQKIvVFw0nu/SLBPN+YaLUNCcFFrFg7czn3pmrgAxvu5hvpE+ZkGQ8PfvLzui8FrZWSONDcbD9/hhRFUzvvTjElBDx+Fd5v1/CAib9Y58sYfS2qIIkP/k2mrlf8FB4tEiXOMLkq42wUYs5rtfIYIl6l86Urv7UDCJJBqaa54PmdEdjyuRaruuRBaoJGbXVNbDzodvFW3kWB63KWdvNrGSjwL8oDo3K+/K35Tm1sCJ5oD1VaVPAH4AWBLXYQBBoqRUtqVQNRPK2j+2YzBal590hgdDmtnqPB08UrP2Mwzuaj8tbXLcUsfjbQUMmNmt1ACaLWCjGZZVpjxT26TTNoUU2eHBYNEIZx3CAwddhoJbxcmEBDurWuuyzSqDsSJsSfSwj67UdXRDxdiOD2syOpEsxbWksI1+cVS4GIqwDuJmnLpHjwAA8lDRFzV4/l/dC1oiAJB3qJxm2vOoJLXKEkbI5x3VdJrIc2g3vCKGha9DjuJB+47NhiL+U6mBWAZI+3PUUGVq80CjpiK/oJWK1CuqfulExkqq2Nkaw5DGuWYdQ7I5aVmVnaABY5Z2dw1/xlk6bwe0IAounUdxoIui5fXgVQHjX2w6dCr+F7QsDXlw5aloyzGDJg0mPNuAqW8yykI6yPnr6Eh7VUHsaC7tFV5fPIE+Tyf8HSxKIK4/Eh8eQ8MDmjJ27ghRmyRiDnFuWkjeStWVPJ8CmfB4CadyiWSTJjXIRkhsd1XSiwYF9sGfIIsUgtE3HWfAEvBV1PDKqT0qTtlYWeBeWkXhk0P6LwrwgWEQkMDNLGIiJWEOfeDycFD2usW0oUjnP1r1yqBEXHrorUZjGW5MV0+bwYltaZZazMiVcYCFzk+1Y44TNX1WeEsZeHhKufvMOUWVpc6UQgaizMojV5yB1lDTDI/iKkOBNffmivUIu8IH0vlTY551hyBCk3pMSiJYTiylghkx6Uri/HCtZsNjNIuapH2x44YBKkURj9HtepBbukNHH3Gcj0tQIlwqZnKTtmSQRGq95y4lpuurYDWPqVAaQavPKlCEwyZ1drSETpI1T6zEkgHYAgGCtwVl7HQ5ZZFy+wMgUuKYWxU72Q8jJ8xRu7Pf3NQrrWnP6tkFRDkbPDYkWRSvjavjVWmDJyn9bKNOBSWctIPnCUtmXCW0BhMupPBHGZBPNyRXo1iSUUB0iBnR9OA5CPm0KUfyEyzFPzHwo0LshJgj2NgtMyKqPFmLW6QBk2Qvo+nM91NltWgJpciKRkFrSIJXxdiCBh5xFChbQNd97M5+NEUIqNAubKrOhMZVWhWcvZSGun9DG06XlXXBKLFkkwY94xJqtjQi8kRQIK5rEiGZndp2sWwjqWEXR0qTj5H390nF/Ear0boet5S7Z1phIe2mbL7Ba3eqygrrgAJN1ZBykImwXtSAAkmXvCzKUg/RLWHwKjpW7Xvf6SFFTtYVArpfSY4yFuwdfcOGdlOwKqHfYvKSse/O1V+ASzRLSW5umJcJLGHRxL/YLPsTX/jwMYf9aKCLEuTCHmWce5WGsOfdjk+GoSU1dhiQrpZtLzrQyzcxBQrTwtGCNayNNh5KZvXEg4R1VhPFdD1S8dYaD7MI3u9CTqT6QWFS5XuY89MylETJBdmEzdwdW2PEpf0iJhktmRoBAHZja3lYk7RvIUOoHldpFsrxtEYV0jFhwU6fur9IJTqPIaR8JrhDnzeZmbo269bZ8jNBKylcsLgS6KN5R8cGBubP5Aa6/Cg1CI2cYYwBuI1jIu8jM5DFxVAKSOawkSAGqjqEi+qtinzmez9j8Gp1Q0gdU9QgAAAABJRU5ErkJggg==",singleImage:"data:image/png;base64,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",continusImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAQCAYAAAB+690jAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAOYSURBVEhLfVVNaxRBEH09s9nsaGI28RCDHhRyEaKCB0HxIAgqKrmJv8A/IF6FEEEJxiDkT3gVL56E5JhLFDXxohEVjIoh0ejO7s5uW6+6e2ZWE99Q093V9fG6u6bHDM0M2r7+fqDTQReAMQYmkg6sjiN5HDi2bNDKWojjCqpRjI7MBAv19xIg5iq5jkYMIwrmCXq27XYGMzI3bDfXt4BYrMqRcgSlhZVgUcWgVk2QbqeiEYqVsht7TN+LHkK7IQPqB+qyOEnSNcwkSuN3QVqNwLHMOSEhi/6+Km5fuY1rp6/BShDR6pzz2Vmsb/9np/HlibqRkJHkXStKzrGvwoHwJDGvh+xGs9nCUDKEqXNTOHP0DMwvmZB5jbGLuMX5WCX524blERmOXG4VghtGPsyjucKEoNPtYv7ZPF5+f4mHVx5iYnwC5rfR45R3HqcsocYC8rheyihs9chEaFmGJGIBBmIsxNVPq7j79B7SSoq5q3M4fPAwbOpsywjJlADj+D4R+vIJlezkyGwgEoIFD29FMs5EHv0CqbB4/n4Z00+mMToyipnLM9hf3w/bEHv1p7MPIFCdjxu6zsLZFJbybSUXalPpb1kesxaWKtqUrQWOmOu/+7yGjdYGJo9NYnxkHMvry9je3oaJ6ScHKPEoNA8L15gqgQ7hjjzZmyDeI4QaQkiDcIpO3tI5Op6EG7tJHh13j8f3s/kTN8/fxGAyiKUPS2ikssBYJunoCYXi8E0eJyAnlFx0hCI5CiXi7dj0EimCBD1kERy9evsaA8MDuHHqBn7Is/JxBc1WU+fzmCJFl+9elAglboc89R13Iw/ANqejI9YU767F1UWMHRzD9ZPX0Wg1sPZ1DY2s4WvO2+ZeBVw0eQuh2t4aTYsERJk9q14DSCFoPXhb2oRHx1XG6+LWo1tYeLeA2UuzODtxVu4IuoargJdCESOA46BhbwdCLgC1rpWHX6AoQuC/oTr5HWZphjuPp/Hi2wscP3QiBFALgt3ebGHGQZc48qBuN75u6i3slA6OkB+RELsiYT2Rn+MNH0eRXpiKNnBk7AiSSj9W1t+oD6vBzypyXx+LI/6G6qNDMHUhtPVlC8YTUk+euRRkNa4xo6i6/jO2yLLM7RizBDj2SlZTpfJmpyYamVOdf+8K/bkKoeH7+6zpq+gHU9oIVzOSuSP/kFg1kea1QowrdBXhoPYiSpwjN1Dwx8rCpk/h8S/o12638Qd3a4ZoJtQD+gAAAABJRU5ErkJggg==",moveImage:"data:image/png;base64,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",upDownImage:"data:image/png;base64,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",scaleImage:"data:image/png;base64,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",rotationImage:"data:image/png;base64,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",
setImage:"data:image/png;base64,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",modifyImage:"data:image/png;base64,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",drashImage:"data:image/png;base64,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",cancleImage:"data:image/png;base64,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",backImage:"data:image/png;base64,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"};r.controlDiv={cancle:{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",right:"0px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:undefined,divs:undefined,image:r.imgSrc.cancleImage,rightOffset:7.5},back:{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",right:"0px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:undefined,divs:undefined,image:r.imgSrc.backImage,rightOffset:7.5}};r.libDiv={"建筑":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"0px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.buildImage,leftOffset:7.5},"结构":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"45px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.structureImage,leftOffset:7.5},"水":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"90px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.waterImage,leftOffset:7.5},"电":{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"135px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.eleImage,leftOffset:7.5},"气":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"0px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.gasImage,leftOffset:7.5},"暖通":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"45px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.HVACImage,leftOffset:7.5},"安全设备":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"90px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.saftyImage,leftOffset:7.5},"其他":{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"135px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.otherImage,leftOffset:7.5},"模型":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"180px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.lib,divs:undefined,image:r.imgSrc.modelImage,leftOffset:7.5}};r.filterDiv={"建筑":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"0px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.buildImage,leftOffset:165,topOffset:40},"结构":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"25px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.structureImage,leftOffset:165,topOffset:40},"水":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"50px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.waterImage,leftOffset:165,topOffset:40},"电":{div:document.createElement("div"),height:"16px",width:"16px",top:"0px",left:"75px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.eleImage,leftOffset:165,topOffset:40},"气":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"0px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.gasImage,leftOffset:165,topOffset:40},"暖通":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"25px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.HVACImage,leftOffset:165,topOffset:40},"安全设备":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"50px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.saftyImage,leftOffset:165,topOffset:40},"其他":{div:document.createElement("div"),height:"16px",width:"16px",top:"25px",left:"75px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.otherImage,leftOffset:165,topOffset:40},"模型":{div:document.createElement("div"),height:"41px",width:"16px",top:"0px",left:"100px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.filter,divs:undefined,image:r.imgSrc.modelImage,leftOffset:165,topOffset:40}};r.modelDiv={single:{div:document.createElement("div"),height:"56px",width:"36px",top:"0px",left:"0px",background:"#027d02",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.singleImage,leftOffset:250},continus:{div:document.createElement("div"),height:"16px",width:"36px",top:"65px",left:"0px",background:"#027d02",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.continusImage,leftOffset:250},move:{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"62.5px",background:"#094768",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.moveImage,leftOffset:250},upDown:{div:document.createElement("div"),height:"36px",width:"36px",top:"0px",left:"107.5px",background:"#094768",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.upDownImage,leftOffset:250},scale:{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"62.5px",background:"#094768",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.scaleImage,leftOffset:250},rotation:{div:document.createElement("div"),height:"36px",width:"36px",top:"45px",left:"107.5px",background:"#094768",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,
image:r.imgSrc.rotationImage,leftOffset:250},"设置":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"170px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.setImage,leftOffset:250},"修改":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"215px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.modifyImage,leftOffset:250},"删除":{div:document.createElement("div"),height:"81px",width:"36px",top:"0px",left:"260px",background:"#000000",click:undefined,mouseout:undefined,mouseover:undefined,isClick:r.clickMap.model,divs:undefined,image:r.imgSrc.drashImage,leftOffset:250}};r.markedWorld={drag:"放置模式",operate:"移动模式","建筑":"建筑","结构":"结构","水":"给排水","电":"电","气":"气","暖通":"暖通","安全设备":"安全设备","其他":"其他设备","模型":"导入模型",single:"放置模型",continus:"横排放置模型",move:"平移",upDown:"上下移动",scale:"缩放",rotation:"旋转","设置":"设置","修改":"修改","删除":"删除",cancle:"取消",back:"返回上一步"};r.selectDiv={div:document.createElement("div"),height:"100px",width:"160px",bottom:"0px",left:"0px",leftOffset:0};r.initDiv=function(){var t=null;var r=function(e){var t=e.div;t.style.left=e.left;t.style.bottom=e.bottom;t.style.width=e.width;t.style.height=e.height;t.style.position="absolute";var r=document.createElement("span");r.innerText="Selected";r.style.fontSize="16px";r.style.color="#ffffff";r.style.bottom="55px";r.style.position="absolute";r.style.width="65px";r.style.left=String(parseFloat(t.style.width)/2-parseFloat(r.style.width)/2)+"px";var n=document.createElement("span");n.id="no.";n.innerText="0";n.style.color="#ffffff";n.style.fontSize="28px";n.style.bottom="20px";n.style.position="absolute";n.style.width="16.42px";n.style.left=String(parseFloat(t.style.width)/2-parseFloat(n.style.width)/2)+"px";t.appendChild(r);t.appendChild(n)};var n=function(){function r(r,n,o){var a=r.isClick;var i=r.div;if(a!=undefined)a.set(o,false);i.style.width=r.width;i.style.height=r.height;i.style.background=r.background;i.style.left=r.left;i.style.top=r.top;i.style.right=r.right;i.style.borderStyle="solid";i.style.borderColor=r.background;i.style.borderWidth="2px";i.style.position="absolute";i.style.opacity="1.";i.id=o;var s=document.createElement("img");s.src=r.image;s.width=parseFloat(r.width);s.height=parseFloat(r.height);i.appendChild(s);r.click=function(n){var a=e.controlManager.controls.getControl("DragControl");var i=e.controlManager.controls.getControl("OperateObject");if(o==="move"||o==="upDown"||o==="scale"||o==="rotation"){a.deActive();i.active()}else if(o==="single"||o==="continus"){i.deActive();if(t.params.lib!="")a.active()}t.setClick(o,r,t)};r.mouseover=function(e){var n=r.isClick;if(n!=undefined&&!n.get(o)||n==undefined){setTimeout(function(){i.style.borderColor="#FFFFFF";i.style.borderWidth="1px";i.style.left=String(parseFloat(r.left)+1)+"px";i.style.top=String(parseFloat(r.top)+1)+"px"},100)}t.mouseover(t,i,o,r.leftOffset,r.topOffset)};r.mouseout=function(e){var n=r.isClick;if(n!=undefined&&!n.get(o)||n==undefined){setTimeout(function(){i.style.borderColor=r.background;i.style.borderWidth="2px";i.style.left=String(parseFloat(r.left)-1)+"px";i.style.top=String(parseFloat(r.top)-1)+"px"},100)}t.mouseout(t)};n.appendChild(i);return i}return function(e,t){for(var n in e){e[n].divs=e;r(e[n],t,n)}}}();function o(){var r=t.filterDiv;var n=function(t){var n=r[t];n.isClick.set(t,false);var o=n.div;n.click=function(r){var a=n.isClick;var i=e.controlManager.controls.getControl("OperateObject");if(a.get(t)==false){o.style.background="#650301";o.style.borderColor="#f99692";a.set(t,true);i.addFilterTypes(t)}else{o.style.background=n.background;o.style.borderColor=n.background;a.set(t,false);i.deleteFilterTypes(t)}}};for(var o in r){n(o)}}function a(){t._libDivs.style.width="220px";t._libDivs.style.height="85px";t._libDivs.style.position="absolute";t._libDivs.style.bottom="7.5px";t._libDivs.style.left="7.5px";n(t.libDiv,t._libDivs)}function i(){t._modelDivs.style.height="85px";t._modelDivs.style.position="absolute";t._modelDivs.style.bottom="7.5px";t._modelDivs.style.left="250px";n(t.modelDiv,t._modelDivs)}function s(){t._filterDivs.style.width="120px";t._filterDivs.style.height="45px";t._filterDivs.style.position="absolute";t._filterDivs.style.bottom="7.5px";n(t.filterDiv,t._filterDivs)}function l(){var e=t._filter;var r=document.createElement("span");r.innerText="Filter";r.style.fontSize="16px";r.style.position="absolute";r.style.height="21px";r.style.width="38.16px";r.style.color="#ffffff";e.style.left="165px";e.style.bottom="0px";e.style.width="120px";e.style.height="81px";e.style.position="absolute";r.style.left=String(60-19.08)+"px";r.style.bottom="60px";e.appendChild(r);e.appendChild(t._filterDivs)}function c(){t._operateDivs.style.width="235px";t._operateDivs.style.height="100px";t._operateDivs.style.position="absolute";t._operateDivs.style.background="#000000";t._operateDivs.style.opacity="0.5";t._operateDivs.style.bottom="0px";t._operateDivs.style.right="45px"}function u(){var r=t.positionDiv;var n=t._positionDiv;function o(e){for(var t=0;t<e.length;++t){var r=e[t];var n=r.div;n.style.left=r.left;n.style.top=r.top;n.style.textAlign="right";n.innerText=r.text;n.style.position="absolute";n.style.width=r.width;n.style.height=r.height}}function a(e){for(var t=0;t<e.length;++t){var r=e[t];var n=r.div;n.style.left=r.left;n.style.top=r.top;n.style.width=r.width;n.style.height=r.height;n.style.position="absolute"}}r.mouseover=function(e){r.x_v.div.style.display="none";r.y_v.div.style.display="none";r.z_v.div.style.display="none";r.x_i.div.style.display="block";r.y_i.div.style.display="block";r.z_i.div.style.display="block";r.x_i.div.value=r.x_v.div.innerText.split(" ")[0];r.y_i.div.value=r.y_v.div.innerText.split(" ")[0];r.z_i.div.value=r.z_v.div.innerText.split(" ")[0]};r.mouseout=function(e){r.x_v.div.style.display="block";r.y_v.div.style.display="block";r.z_v.div.style.display="block";r.x_i.div.style.display="none";r.y_i.div.style.display="none";r.z_i.div.style.display="none";r.x_v.div.innerText=r.x_i.div.value+" X";r.y_v.div.innerText=r.y_i.div.value+" Y";r.z_v.div.innerText=r.z_i.div.value+" Z"};r.input=function(t){var n=new e.Vector3;n.x=parseFloat(r.x_i.div.value);n.y=parseFloat(r.y_i.div.value);n.z=parseFloat(r.z_i.div.value);var o=e.controlManager.controls.getControl("OperateObject");o.setPosition(n)};return function(){n.style.width="117.5px";n.style.height="100px";n.style.position="absolute";n.style.color="#ffffff";n.style.fontSize="12px";n.style.bottom="0px";n.style.right="162.5px";var e=r.title.div;var t=r.title;e.style.textAlign="left";e.innerText=t.text;e.style.left=t.left;e.style.top=t.top;e.style.position="absolute";e.style.width=t.width;e.style.height=t.height;e.style.fontSize="14px";o([r.x_v,r.y_v,r.z_v]);a([r.x_i,r.y_i,r.z_i]);n.appendChild(e);n.appendChild(r.x_v.div);n.appendChild(r.y_v.div);n.appendChild(r.z_v.div);n.appendChild(r.x_i.div);n.appendChild(r.y_i.div);n.appendChild(r.z_i.div)}}var f=function(){var r=t.rotationDiv;var n=t._rotationDiv;var o=false;function a(r){var n=function(n){var a=r[n];var i=a.div;i.style.left=a.left;i.style.top=a.top;i.style.width=a.width;i.style.height=a.height;i.style.position="absolute";i.style.background="#000000";i.style.borderRadius="5px";i.style.borderColor="#586255";i.style.borderWidth="1px";i.style.borderStyle="solid";var s=function(){for(var e=0;e<i.children.length;++e){if(i.children[e].className==="slider")return i.children[e]}}();var l=function(){var r=new THREE.Euler;var n=undefined;return function(){n=e.controlManager.controls.getControl("OperateObject");var o=t.rotationDiv;var a=o.rotationX_S.div.style.width;var i=o.rotationY_S.div.style.width;var s=o.rotationZ_S.div.style.width;r.x=(parseFloat(a)*360/185-180)*(Math.PI/180);r.y=(parseFloat(i)*360/185-180)*(Math.PI/180);r.z=(parseFloat(s)*360/185-180)*(Math.PI/180);n.setRotation(r)}}();a.mouseDown=function(t){var r=e.controlManager.controls.getControl("OperateObject");s.style.width=t.offsetX+"px";o=true;r.setParam("new",r,true);r.setParam("pre",r,true);l()};a.mouseUp=function(t){var r=e.controlManager.controls.getControl("OperateObject");if(o==true){s.style.width=t.offsetX+"px";o=false;l()}r.setParam("post",r,true);r.pushBackUp();e.logger.debug(r._backUp)};a.move=function(e){if(o){s.style.width=e.offsetX+"px";var r=s.id+String(Math.round(parseFloat(s.style.width)*360/185-180));t._textP.innerText=r;t._text.style.width=String(r.length*10+10)+"px";l()}}};for(var a=0;a<r.length;++a){n(a)}}function i(e){var r=function(r){var n=e[r];var o=n.div;o.style.width=n.width;o.style.height=n.height;o.style.position="absolute";o.style.borderRadius="5px";o.style.background="#404140";o.className="slider";o.id=n.text;n.mouseover=function(e){var r=n.text+String(Math.round(parseFloat(o.style.width)*360/185-180));o.style.background="#7c1811";t._text.style.display="block";t._textP.innerText=r;t._text.style.width=String(r.length*10+10)+"px";t._text.style.top=String(parseFloat(n.top)-10+37.5-40)+"px";t._text.style.left=String(parseFloat(n.left)+557.5+5)+"px"};n.mouseout=function(e){t.mouseout(t);o.style.background="#404140"}};for(var n=0;n<e.length;++n){r(n)}}return function(){n.style.width="235px";n.style.height="100px";n.style.color="#ffffff";n.style.fontSize="8px";n.style.bottom="0px";n.style.right="45px";n.style.position="absolute";n.style.webkitUserSelect="none";n.style.userSelect="none";var e=r.title;var t=e.div;t.style.fontSize="14px";t.style.width=e.width;t.style.height=e.height;t.style.left=e.left;t.style.top=e.top;t.style.position="absolute";t.innerText=e.text;i([r.rotationX_S,r.rotationY_S,r.rotationZ_S]);r.rotationX.div.appendChild(r.rotationX_S.div);r.rotationY.div.appendChild(r.rotationY_S.div);r.rotationZ.div.appendChild(r.rotationZ_S.div);a([r.rotationX,r.rotationY,r.rotationZ]);n.appendChild(t);n.appendChild(r.rotationX.div);n.appendChild(r.rotationY.div);n.appendChild(r.rotationZ.div)}};function d(){var r=t.scaleDiv;var n=t._scaleDiv;var o=false;var a=function(){var n=r.scale;var a=n.div;a.style.left=n.left;a.style.top=n.top;a.style.width=n.width;a.style.height=n.height;a.style.position="absolute";a.style.background="#000000";a.style.borderRadius="5px";a.style.borderColor="#586255";a.style.borderWidth="1px";a.style.borderStyle="solid";var i=function(){for(var e=0;e<a.children.length;++e){if(a.children[e].className==="slider")return a.children[e]}}();var s=function(){var r=t.scaleDiv.scale_S.div.style.width;var n=Math.pow(parseFloat(r),2)*50/(185*185);var o=e.controlManager.controls.getControl("OperateObject");o.setScale(n)};n.mouseDown=function(t){var r=e.controlManager.controls.getControl("OperateObject");i.style.width=t.offsetX+"px";o=true;r.setParam("new",r,true);r.setParam("pre",r,true);s()};n.mouseUp=function(t){var r=e.controlManager.controls.getControl("OperateObject");if(o==true){i.style.width=t.offsetX+"px";o=false;s()}r.setParam("post",r,true);r.pushBackUp()};n.move=function(e){if(o){i.style.width=e.offsetX+"px";var r=i.id+String((Math.pow(parseFloat(i.style.width),2)*50/(185*185)).toFixed(2));t._textP.innerText=r;t._text.style.width=String(r.length*10+10)+"px";s()}}};var i=function(){var e=r.title;var t=e.div;t.style.fontSize="14px";t.style.width=e.width;t.style.height=e.height;t.style.left=e.left;t.style.top=e.top;t.style.position="absolute";t.innerText=e.text};var s=function(){var e=r.scale_S;var n=e.div;n.style.width=e.width;n.style.height=e.height;n.style.position="absolute";n.style.borderRadius="5px";n.style.background="#404140";n.className="slider";n.id=e.text;e.mouseover=function(r){var o=e.text+String((Math.pow(parseFloat(n.style.width),2)*50/(185*185)).toFixed(2));n.style.background="#7c1811";t._text.style.display="block";t._textP.innerText=o;t._text.style.width=String(o.length*10+10)+"px";t._text.style.top=String(parseFloat(e.top)-10+37.5-40)+"px";t._text.style.left=String(parseFloat(e.left)+557.5+5)+"px"};e.mouseout=function(e){t.mouseout(t);n.style.background="#404140"}};n.style.width="235px";n.style.height="100px";n.style.color="#ffffff";n.style.fontSize="8px";n.style.bottom="0px";n.style.right="45px";n.style.position="absolute";n.style.webkitUserSelect="none";n.style.userSelect="none";i();s();r.scale.div.appendChild(r.scale_S.div);a();n.appendChild(r.title.div);n.appendChild(r.scale.div)}function v(){var e=t._controlDiv;var r=t.controlDiv;e.style.height="85px";e.style.position="absolute";e.style.bottom="0px";e.style.right="0px";n(r,e);e.removeChild(r.cancle.div);e.removeChild(r.back.div)}function m(){var r=t.continusDiv;var n=t._continusDiv;var o=false;function a(){n.style.left="50%";n.style.position="absolute";n.style.width="400px";n.style.height="100px";n.style.background="#000000";n.style.bottom="7.5px";n.style.webkitUserSelect="none";n.style.zIndex="3"}function i(){var t=r.continus;var n=t.div;var a=r.continus_S.div;n.style.left=t.left;n.style.top=t.top;n.style.width=t.width;n.style.height=t.height;n.style.position="absolute";n.style.background="#000000";n.style.borderRadius="5px";n.style.borderColor="#586255";n.style.borderWidth="1px";n.style.borderStyle="solid";var i=function(){var t=e.controlManager.controls.getControl("DragControl");var n=Math.floor(parseInt(r.continus_S.div.style.width)/3);r.text.div.innerText=r.text.text+" "+n;t.setPlaceNumber(n)};t.mouseDown=function(e){a.style.width=e.offsetX+"px";o=true;i()};t.mouseUp=function(e){a.style.width=e.offsetX+"px";o=false;i()};t.move=function(e){if(o){a.style.width=e.offsetX+"px";i()}}}function s(){var e=r.continus_S;var t=e.div;t.style.width="12px";t.style.height=e.height;t.style.position="absolute";t.style.borderRadius="5px";t.style.background="#404140";e.mouseover=function(e){t.style.background="#7c1811"};e.mouseout=function(e){t.style.background="#404140"}}var l=function(){var n=r.confire;var o=n.div;o.style.top=n.top;o.style.right=n.right;o.style.width=n.width;o.style.height=n.height;o.style.borderStyle="solid";o.style.borderWidth="1px";o.style.borderColor="#000000";o.style.background="#000000";o.style.position="absolute";var a=document.createElement("img");a.src=n.image;a.width=38;a.height=38;o.appendChild(a);n.mouseover=function(e){o.style.borderColor="#ffffff"};n.mouseout=function(e){o.style.borderColor="#000000"};n.click=function(r){var n=e.controlManager.controls.getControl("DragControl");t.removeContinusDiv(t);t.addWind(t);n.removeOverlay();n.active();n.setModel("continus");n.placeObject(-1)}};var c=function(){var n=r.cancle;var o=n.div;o.style.top=n.top;o.style.right=n.right;o.style.width=n.width;o.style.height=n.height;o.style.borderStyle="solid";o.style.borderWidth="1px";o.style.borderColor="#000000";o.style.background="#000000";o.style.position="absolute";var a=document.createElement("img");a.src=n.image;a.width=38;a.height=38;o.appendChild(a);n.mouseover=function(e){o.style.borderColor="#ffffff"};n.mouseout=function(e){o.style.borderColor="#000000"};n.click=function(r){var n=e.controlManager.controls.getControl("DragControl");t.removeContinusDiv(t);t.addWind(t);n.placeObject(0);n.removeOverlay();n.active();n.setModel("continus")}};function u(){var e=r.text;var t=e.div;t.style.height=e.height;t.style.left="10px";t.style.top="2px";t.style.position="absolute";t.style.background="#00000000";t.style.fontSize="12px";t.innerText=e.text+" 4";t.style.color="#ffffff"}r.attach=function(){var e=r.continus;var t=e.div;t.addEventListener("mousemove",e.move,false);t.addEventListener("mousedown",e.mouseDown,false);t.addEventListener("mouseup",e.mouseUp,false);var n=r.continus_S;t=n.div;t.addEventListener("mouseover",n.mouseover,false);t.addEventListener("mouseout",n.mouseout,false);var o=r.confire;t=o.div;t.addEventListener("mouseout",o.mouseout,false);t.addEventListener("mouseover",o.mouseover,false);t.addEventListener("click",o.click,false);var a=r.cancle;t=a.div;t.addEventListener("mouseout",a.mouseout,false);t.addEventListener("mouseover",a.mouseover,false);t.addEventListener("click",a.click,false)};r.dispose=function(){var e=r.continus;var t=e.div;t.removeEventListener("mousemove",e.move,false);t.removeEventListener("mousedown",e.mouseDown,false);t.removeEventListener("mouseup",e.mouseUp,false);var n=r.continus_S;t=n.div;t.removeEventListener("mouseover",n.mouseover,false);t.removeEventListener("mouseout",n.mouseout,false);var o=r.confire;t=o.div;t.removeEventListener("mouseout",o.mouseout,false);t.removeEventListener("mouseover",o.mouseover,false);t.removeEventListener("click",o.click,false);var a=r.cancle;t=a.div;t.removeEventListener("mouseout",a.mouseout,false);t.removeEventListener("mouseover",a.mouseover,false);t.removeEventListener("click",a.click,false)};a();i();s();u();c();l();r.continus.div.appendChild(r.continus_S.div);r.continus.div.appendChild(r.text.div);n.appendChild(r.continus.div);n.appendChild(r.cancle.div);n.appendChild(r.confire.div)}return function(e){t=e;var n=e._w;n.style.background="#000000";n.style.width="557.5px";n.style.height="100px";n.style.bottom="0px";n.style.left="0px";n.style.opacity="0.5";n.style.position="absolute";n.id="wind";e.wind.appendChild(n);e.operatorButton.style.left="528.5px";e.operatorButton.style.width="28px";e.operatorButton.style.height="18px";e.operatorButton.style.background="#000000";e.operatorButton.style.bottom="100px";e.operatorButton.style.position="absolute";e.operatorButton.style.opacity="0.5";e.operatorButton.style.borderStyle="solid";e.operatorButton.style.borderWidth="1px";e.operatorButton.style.borderColor="#FFFFFF";var h=document.createElement("img");h.src=e.imgSrc.operateImage;h.width=28;h.height=18;e.operatorButton.appendChild(h);e.dragButton.style.left="499.5px";e.dragButton.style.height="18px";e.dragButton.style.width="28px";e.dragButton.style.bottom="100px";e.dragButton.style.background="#000000";e.dragButton.style.position="absolute";e.dragButton.style.opacity="0.5";e.dragButton.style.borderStyle="solid";e.dragButton.style.borderWidth="1px";e.dragButton.style.borderColor="#FFFFFF";e.dragButton.style.borderBottomColor="#000000";var p=document.createElement("img");p.src=e.imgSrc.dragImage;p.width=28;p.height=18;e.dragButton.appendChild(p);e.wind.appendChild(this.dragButton);e.wind.appendChild(this.operatorButton);e.wind.style.position="absolute";e.wind.style.left="10px";e.wind.style.bottom="10px";e.wind.style.height="120px";e.wind.style.width="602.5px";e.wind.style.zIndex="2";e.wind.style.userSelect="none";e._text.style.display="none";e._text.style.height="30px";e._text.style.background="#ffffff";e._text.style.opacity="0.8";e._textP.style.color="#000000";e._textP.style.fontSize="16px";e._textP.style.verticalAlign="middle";e._text.style.position="absolute";e._text.style.textAlign="center";e._text.style.verticalAlign="middle";e._text.style.margin="0 auto";e._text.style.zIndex="5";e._text.style.right=e.dragButton.style.right;e._text.appendChild(e._textP);e.wind.appendChild(e._text);a();e.wind.appendChild(e._libDivs);i();e.wind.appendChild(e._modelDivs);c();e._libDivs.style.opacity="0";e._modelDivs.style.opacity="0";r(t.selectDiv);s();l();o();u()();f()();d();v();m();e.wind.appendChild(t._controlDiv)}}();r.setText=function(e,t,r,n,o,a,i,s,l,c){var u=e._textP;var f=e._text;var d=e.markedWorld[r];u.innerText=d;f.style.width=String(u.innerText.length*20+10)+"px";if(o!=undefined){c=c==undefined?0:c;f.style.top=String(o-5+37.5-40+c)+"px"}if(i!=undefined){f.style.bottom=String(i+n+5)+"px"}if(a!=undefined){l=l==undefined?0:l;f.style.left=String(a+l)+"px"}if(s!=undefined){l=l==undefined?0:l;f.style.right=String(s+l)+"px"}};var n=r;n.initDiv(n);n.getHotKey=function(){return{hotkey:"ctr+l",needLongPress:false}};n.getName=function(){return"LoadControl"};n.regist=function t(){if(n.wind!=null){e.renderParamers.container.appendChild(n.wind)}n._libDivs.style.opacity="0";n._modelDivs.style.opacity="0";var r=0;var o=setInterval(function(){n._libDivs.style.opacity=String(r/2e3);n._modelDivs.style.opacity=String(r/2e3);r+=10;if(r>=2e3){clearInterval(o)}},10);n.params={libModel:{"建筑":e.loadParamers.MODEL_UP_URL+"/1/","结构":e.loadParamers.MODEL_UP_URL+"/2/","水":e.loadParamers.MODEL_UP_URL+"/tadiao/","电":"","暖通":"","气":"","安全设备":"","其他":"","模型":""},codeMap:{"01":"建筑","02":"结构","03":"水","04":"电","05":"气","06":"暖通","07":"安全设备","08":"其他","09":"模型"},modelModel:"single",operateModel:"",lib:""};n.setParams(n);n.attachDiv()};n.unRegist=function t(){if(n.wind!=null){e.renderParamers.container.removeChild(n.wind)}var r=e.controlManager.controls.getControl("DragControl");r.deActive();var o=e.controlManager.controls.getControl("OperateObject");o.deActive();n.disposeDiv()};var o=undefined;n.dragButtonClick=function(t){if(n._mode=="operate"){n._mode="drag";var r=e.controlManager.controls.getControl("OperateObject");var a=e.controlManager.controls.getControl("DragControl");r.deActive();n.setParams(n);if(n.params.lib!="")a.active();if(o!=undefined){clearInterval(o)}n.dragButton.style.borderBottomColor="#000000";n.operatorButton.style.borderBottomColor="#FFFFFF";n.wind.appendChild(n._libDivs);n._modelDivs.appendChild(n.modelDiv["single"].div);n._modelDivs.appendChild(n.modelDiv["continus"].div);n.wind.removeChild(n.selectDiv.div);n.wind.removeChild(n._filter);n._libDivs.style.opacity="0";n._modelDivs.style.opacity="0";var i=0;o=setInterval(function(){n._libDivs.style.opacity=String(i/2e3);n._modelDivs.style.opacity=String(i/2e3);i+=10;if(i>=2e3){clearInterval(o)}},10)}e.logger.debug("dragButtonClick")};n.operatorButtonClick=function(t){if(n._mode=="drag"){var r=e.controlManager.controls.getControl("OperateObject");var a=e.controlManager.controls.getControl("DragControl");n._mode="operate";a.deActive();r.active();if(o!=undefined){clearInterval(o)}n.operatorButton.style.borderBottomColor="#000000";n.dragButton.style.borderBottomColor="#FFFFFF";n.wind.removeChild(n._libDivs);n._modelDivs.removeChild(n.modelDiv["single"].div);n._modelDivs.removeChild(n.modelDiv["continus"].div);n.wind.appendChild(n.selectDiv.div);n.wind.appendChild(n._filter);n._filter.style.opacity="0";n._modelDivs.style.opacity="0";var i=0;o=setInterval(function(){n._filter.style.opacity=String(i/2e3);n._modelDivs.style.opacity=String(i/2e3);i+=10;if(i>=2e3){clearInterval(o)}},10);n.setClick("move",n.modelDiv["move"],n)}e.logger.debug("operatorButtonClick")};r.operatorButtonMouseOver=function(e){var t=n.operatorButton;n.mouseover(n,t,"operate")};r.operatorButtonMouseOut=function(e){n._text.style.display="none"};r.dragButtonMouseOver=function(e){var t=n.dragButton;n.mouseover(n,t,"drag")};r.dragButtonMouseOut=function(e){n.mouseout(n)};r.cancleClick=function(){var t=e.controlManager.controls.getControl("OperateObject");t.cancle();n.mouseout(n)};r.backClick=function(){var t=e.controlManager.controls.getControl("OperateObject");t.backUp()};n.initEvent(n);return r}r.prototype.setClick=function(t,r,n){var o;var a=r.isClick;var i;var s=e.controlManager.controls.getControl("DragControl");var l=e.controlManager.controls.getControl("OperateObject");if(a!=undefined){a.forEach(function(c,u){o=r.divs[u].div;var f=r.divs[u];i=r.divs[u].background;if(u===t){a.set(u,true);o.style.left=String(parseFloat(r.left)-1)+"px";o.style.top=String(parseFloat(r.top)-1)+"px";o.style.borderColor="#FFFFFF";o.style.borderWidth="2px";if(n.libDiv[t]!=undefined){var d=new e.Load(n.params.libModel[t],t,new e.Matrix4,function(r,o,a,i,l){e.logger.debug("name",i);s.setObject(o,a,i);n.params.lib=t},-1);l.setSelectType(t)}else if(t==="single"||t==="continus"){e.logger.debug("name",t);s.setModel(t);s.active();l.setFilterMode(null)}else if(t==="move"||t==="upDown"||t==="scale"||t==="rotation"){if(t==="upDown")l.setModel("fluctuation");else l.setModel(t);n.params.operateModel=t;if(n._mode=="drag"){l.setFilterMode("select")}else if(n._mode=="operate"){l.setFilterMode("filter")}}}else{if(c==true){o.style.borderColor=i;o.style.borderWidth="2px";o.style.left=String(parseFloat(f.left)+1)+"px";o.style.top=String(parseFloat(f.top)+1)+"px"}a.set(u,false)}})}};r.prototype.setUrl=function(e,t){var r=this.params.codeMap[e];this.params.libModel[r]=t};r.prototype.setParamUrls=function(e){for(var t in e){this.setUrl(t,e[t])}};r.prototype.setNo=function(e){var t=this;var r=function(){var e=t.selectDiv.div.children;for(var r=0;r<e.length;++r){if(e[r].id=="no.")return e[r]}}();r.innerText=String(e)};r.prototype.setParams=function(t){var r=e.controlManager.controls.getControl("DragControl");var n=e.controlManager.controls.getControl("OperateObject");var o=t.params.modelModel;t.setClick(o,t.modelDiv[o],t)};r.prototype.addContinusDiv=function(t){e.renderParamers.container.appendChild(t._continusDiv);t.continusDiv.attach()};r.prototype.removeContinusDiv=function(t){e.renderParamers.container.removeChild(t._continusDiv);t.continusDiv.dispose()};r.prototype.addWind=function(t){e.renderParamers.container.appendChild(t.wind)};r.prototype.removeWind=function(t){e.renderParamers.container.removeChild(t.wind)};r.prototype.removeControl=function(){};r.prototype.attachDiv=function(){var t=e.controlManager.controls.getControl("OperateObject");for(var r in this.libDiv){this.libDiv[r].div.addEventListener("click",this.libDiv[r].click);this.libDiv[r].div.addEventListener("mouseout",this.libDiv[r].mouseout);this.libDiv[r].div.addEventListener("mouseover",this.libDiv[r].mouseover)}for(var n in this.modelDiv){this.modelDiv[n].div.addEventListener("click",this.modelDiv[n].click);this.modelDiv[n].div.addEventListener("mouseout",this.modelDiv[n].mouseout);this.modelDiv[n].div.addEventListener("mouseover",this.modelDiv[n].mouseover)}for(var o in this.filterDiv){this.filterDiv[o].div.addEventListener("click",this.filterDiv[o].click);this.filterDiv[o].div.addEventListener("mouseout",this.filterDiv[o].mouseout);this.filterDiv[o].div.addEventListener("mouseover",this.filterDiv[o].mouseover)}for(var a in this.controlDiv){this.controlDiv[a].div.addEventListener("mouseout",this.controlDiv[a].mouseout);this.controlDiv[a].div.addEventListener("mouseover",this.controlDiv[a].mouseover)}this.controlDiv["cancle"].div.addEventListener("click",this.cancleClick,false);this.controlDiv["back"].div.addEventListener("click",this.backClick,false);for(var i in this.rotationDiv){if(i==="rotationX"||i==="rotationY"||i==="rotationZ"){var s=this.rotationDiv[i];s.div.addEventListener("mousedown",s.mouseDown,false);s.div.addEventListener("mousemove",s.move,false);s.div.addEventListener("mouseup",s.mouseUp,false)}else if(i==="rotationX_S"||i==="rotationY_S"||i==="rotationZ_S"){var s=this.rotationDiv[i];s.div.addEventListener("mouseover",s.mouseover,false);s.div.addEventListener("mouseout",s.mouseout,false)}}this.wind.addEventListener("mouseout",this.positionDiv.mouseout,false);this.wind.addEventListener("mouseover",this.positionDiv.mouseover,false);this._positionDiv.addEventListener("input",this.positionDiv.input,false);this.modelDiv["删除"].div.addEventListener("click",this.deleteClick,false);this.scaleDiv.scale.div.addEventListener("mousedown",this.scaleDiv.scale.mouseDown,false);this.scaleDiv.scale.div.addEventListener("mousemove",this.scaleDiv.scale.move,false);this.scaleDiv.scale.div.addEventListener("mouseup",this.scaleDiv.scale.mouseUp,false);this.scaleDiv.scale_S.div.addEventListener("mouseover",this.scaleDiv.scale_S.mouseover,false);this.scaleDiv.scale_S.div.addEventListener("mouseout",this.scaleDiv.scale_S.mouseout,false);this.dragButton.addEventListener("click",this.dragButtonClick,false);this.dragButton.addEventListener("mouseover",this.dragButtonMouseOver,false);this.dragButton.addEventListener("mouseout",this.dragButtonMouseOut,false);this.operatorButton.addEventListener("click",this.operatorButtonClick,false);this.operatorButton.addEventListener("mouseover",this.operatorButtonMouseOver,false);this.operatorButton.addEventListener("mouseout",this.operatorButtonMouseOut,false)};r.prototype.disposeDiv=function(){for(var e in this.libDiv){this.libDiv[e].div.removeEventListener("click",this.libDiv[e].click);this.libDiv[e].div.removeEventListener("mouseout",this.libDiv[e].mouseout);this.libDiv[e].div.removeEventListener("mouseover",this.libDiv[e].mouseover)}for(var t in this.modelDiv){this.modelDiv[t].div.removeEventListener("click",this.modelDiv[t].click);this.modelDiv[t].div.removeEventListener("mouseout",this.modelDiv[t].mouseout);this.modelDiv[t].div.removeEventListener("mouseover",this.modelDiv[t].mouseover)}for(var r in this.filterDiv){this.filterDiv[r].div.removeEventListener("click",this.filterDiv[r].click);this.filterDiv[r].div.removeEventListener("mouseout",this.filterDiv[r].mouseout);this.filterDiv[r].div.removeEventListener("mouseover",this.filterDiv[r].mouseover)}for(var n in this.controlDiv){this.controlDiv[n].div.removeEventListener("mouseout",this.controlDiv[n].mouseout);this.controlDiv[n].div.removeEventListener("mouseover",this.controlDiv[n].mouseover)}this.wind.removeEventListener("mouseout",this.positionDiv.mouseout,false);this.wind.removeEventListener("mouseover",this.positionDiv.mouseover,false);this._positionDiv.removeEventListener("input",this.positionDiv.input,false);this.controlDiv["cancle"].div.removeEventListener("click",this.cancleClick,false);this.controlDiv["back"].div.addEventListener("click",this.backClick,false);for(var o in this.rotationDiv){if(o==="rotationX"||o==="rotationY"||o==="rotationZ"){var a=this.rotationDiv[o];a.div.removeEventListener("mousedown",a.mouseDown,false);a.div.removeEventListener("mousemove",a.move,false);a.div.removeEventListener("mouseup",a.mouseUp,false)}else if(o==="rotationX_S"||o==="rotationY_S"||o==="rotationZ_S"){var a=this.rotationDiv[o];a.div.removeEventListener("mouseover",a.mouseover,false);a.div.removeEventListener("mouseout",a.mouseout,false)}}this.modelDiv["删除"].div.removeEventListener("click",this.deleteClick,false);this.scaleDiv.scale.div.removeEventListener("mousedown",this.scaleDiv.scale.mouseDown,false);this.scaleDiv.scale.div.removeEventListener("mousemove",this.scaleDiv.scale.move,false);this.scaleDiv.scale.div.removeEventListener("mouseup",this.scaleDiv.scale.mouseUp,false);this.scaleDiv.scale_S.div.addEventListener("mouseover",this.scaleDiv.scale_S.mouseover,false);this.scaleDiv.scale_S.div.addEventListener("mouseout",this.scaleDiv.scale_S.mouseout,false);this.dragButton.removeEventListener("click",this.dragButtonClick,false);this.dragButton.removeEventListener("mouseover",this.dragButtonMouseOver,false);this.dragButton.removeEventListener("mouseout",this.dragButtonMouseOut,false);this.operatorButton.removeEventListener("click",this.operatorButtonClick,false);this.operatorButton.removeEventListener("mouseover",this.operatorButtonMouseOver,false);this.operatorButton.removeEventListener("mouseout",this.operatorButtonMouseOut,false)};r.prototype.deleteClick=function(t){e.logger.debug("delete click");var r=e.controlManager.controls.getControl("DragControl");var n=e.controlManager.controls.getControl("OperateObject");r.deActive();n.active();n.setModel("delete")};r.prototype.addPsotion=function(){var e=this;e.wind.appendChild(e._operateDivs);e.wind.appendChild(e._positionDiv);e._operateDivs.style.opacity="0";var t=0;var r=setInterval(function(){if(t/2e3>.5)e._operateDivs.style.opacity="0.5";else e._operateDivs.style.opacity=String(t/2e3);t+=10;if(t>=2e3){clearInterval(r)}},10);e.wind.style.width=String(parseFloat(e.wind.style.width)+240)+"px"};r.prototype.setPosition=function(e){var t=this.positionDiv;var r=t.x_v.div;var n=t.y_v.div;var o=t.z_v.div;r.innerText=e.x.toFixed(2)+" X";n.innerText=e.y.toFixed(2)+" Y";o.innerText=e.z.toFixed(2)+" Z"};r.prototype.setRotation=function(e){var t=this.rotationDiv;var r=t.rotationX_S.div;var n=t.rotationY_S.div;var o=t.rotationZ_S.div;var a=0;var i=0;var s=0;if(e.x>Math.PI)a=e.x-2*Math.PI;else a=e.x;if(e.y>Math.PI)i=e.y-2*Math.PI;else i=e.y;if(e.z>Math.PI)s=e.z-2*Math.PI;else s=e.z;r.style.width=a/Math.PI*180*185/360+92.5+"px";n.style.width=i/Math.PI*180*185/360+92.5+"px";o.style.width=s/Math.PI*180*185/360+92.5+"px"}
;r.prototype.setScale=function(e){var t=this.scaleDiv;var r=t.scale_S;r.div.style.width=185*Math.sqrt(e/50)+"px"};r.prototype.removePosition=function(){var e=this;e.wind.removeChild(e._operateDivs);e.wind.removeChild(e._positionDiv);e.wind.style.width=String(parseFloat(e.wind.style.width)-240)+"px"};r.prototype.addRotation=function(){var e=this;e.wind.appendChild(e._operateDivs);e.wind.appendChild(e._rotationDiv);e._operateDivs.style.opacity="0";var t=0;var r=setInterval(function(){if(t/2e3>.5)e._operateDivs.style.opacity="0.5";else e._operateDivs.style.opacity=String(t/2e3);t+=10;if(t>=2e3){clearInterval(r)}},10);e.wind.style.width=String(parseFloat(e.wind.style.width)+240)+"px"};r.prototype.removeRotation=function(){var e=this;e.wind.removeChild(e._operateDivs);e.wind.removeChild(e._rotationDiv);e.wind.style.width=String(parseFloat(e.wind.style.width)-240)+"px"};r.prototype.addScale=function(){var e=this;e.wind.appendChild(e._operateDivs);e.wind.appendChild(e._scaleDiv);e._operateDivs.style.opacity="0";var t=0;var r=setInterval(function(){if(t/2e3>.5)e._operateDivs.style.opacity="0.5";else e._operateDivs.style.opacity=String(t/2e3);t+=10;if(t>=2e3){clearInterval(r)}},10);e.wind.style.width=String(parseFloat(e.wind.style.width)+240)+"px"};r.prototype.removeScale=function(){var e=this;e.wind.removeChild(e._operateDivs);e.wind.removeChild(e._scaleDiv);e.wind.style.width=String(parseFloat(e.wind.style.width)-240)+"px"};r.prototype.addCancle=function(){this._controlDiv.appendChild(this.controlDiv.cancle.div)};r.prototype.removeCancle=function(){this._controlDiv.removeChild(this.controlDiv["cancle"].div)};r.prototype.addBack=function(){this._controlDiv.appendChild(this.controlDiv.back.div)};r.prototype.removeBack=function(){this._controlDiv.removeChild(this.controlDiv.back.div)};r.prototype.mouseout=function(e){var t=e._text.style;t.display="none";t.left="";t.right="";t.top="";t.bottom=""};r.prototype.mouseover=function(e,t,r,n,o){var a=parseFloat(t.style.height);var i=parseFloat(t.style.top);if(isNaN(i))i=undefined;var s=parseFloat(t.style.left);if(isNaN(s))s=undefined;var l=parseFloat(t.style.right);if(isNaN(l))l=undefined;var c=parseFloat(t.style.bottom);if(isNaN(c))c=undefined;e.setText(e,t,r,a,i,s,c,l,n,o);e._text.style.display="block"};r=__decorate([e.PushControl,__metadata("design:paramtypes",[])],r);return r}(e.BaseControl);e.LoadControl=t})(Neon||(Neon={}));var Neon;(function(e){var t;(function(e){e[e["FXAASHADER"]=1]="FXAASHADER";e[e["BLENDSHADER"]=2]="BLENDSHADER";e[e["SMAASHADER"]=4]="SMAASHADER"})(t=e.SHADERNAME||(e.SHADERNAME={}));var r=function(){function e(){this.defines={};this.uniforms={};var e={tDiffuse:{value:{}},resolution:{value:{}}};var t=["void main() {","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n");var r=["uniform sampler2D tDiffuse;","uniform vec2 resolution;","#define FXAA_REDUCE_MIN   (1.0/128.0)","#define FXAA_REDUCE_MUL   (1.0/8.0)","#define FXAA_SPAN_MAX     8.0","void main() {","vec3 rgbNW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbNE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ).xyz;","vec3 rgbSW = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ).xyz;","vec3 rgbSE = texture2D( tDiffuse, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ).xyz;","vec4 rgbaM  = texture2D( tDiffuse,  gl_FragCoord.xy  * resolution );","vec3 rgbM  = rgbaM.xyz;","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float lumaNW = dot( rgbNW, luma );","float lumaNE = dot( rgbNE, luma );","float lumaSW = dot( rgbSW, luma );","float lumaSE = dot( rgbSE, luma );","float lumaM  = dot( rgbM,  luma );","float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );","float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );","vec2 dir;","dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));","dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));","float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );","float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );","dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),","max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),","dir * rcpDirMin)) * resolution;","vec4 rgbA = (1.0/2.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (1.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (2.0/3.0 - 0.5)));","vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (0.0/3.0 - 0.5)) +","texture2D(tDiffuse,  gl_FragCoord.xy  * resolution + dir * (3.0/3.0 - 0.5)));","float lumaB = dot(rgbB, vec4(luma, 0.0));","if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {","gl_FragColor = rgbA;","} else {","gl_FragColor = rgbB;","}","}"].join("\n");this.uniforms=e;this.vertexShader=t;this.fragmentShader=r;this.defines=undefined}return e}();var n=function(){function e(){this.defines={};this.uniforms={};var e={tDiffuseBaseModelAndAddModel:{value:{}},tDiffuseAssistModel:{value:{}},tDepthBaseModelAndAddModel:{value:{}},tDepthAssistModel:{value:{}},size:{value:{}},aoClamp:{value:.5},lumInfluence:{value:.5},resolution:{value:{}}};var t=["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join("\n");var r=["varying vec2 vUv;","uniform sampler2D tDiffuseBaseModelAndAddModel;","uniform sampler2D tDepthBaseModelAndAddModel;","uniform sampler2D tDiffuseAssistModel;","uniform sampler2D tDepthAssistModel;","uniform vec2 size;","uniform float aoClamp;","uniform float lumInfluence;","#define DL 2.399963229728653","#define EULER 2.718281828459045","const int samples = 8;","const float radius = 4.0;","const bool useNoise = false;","const float noiseAmount = 0.0003;","const float diffArea = 0.5;","const float gDisplace = 0.5;","#include <packing>","vec2 rand( const vec2 coord ) {","vec2 noise;","if ( useNoise ) {","float nx = dot ( coord, vec2( 12.9898, 78.233 ) );","float ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );","noise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );","} else {","float ff = fract( 1.0 - coord.s * ( size.x / 2.0 ) );","float gg = fract( coord.t * ( size.y / 2.0 ) );","noise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;","}","return ( noise * 2.0  - 1.0 ) * noiseAmount;","}","float readDepth( const in vec2 coord, const sampler2D tDepth ) {","return texture2D( tDepth, coord ).x;","}","float compareDepths( const in float depth1, const in float depth2, inout int far ) {","float garea = 2.0;","float diff = ( depth1 - depth2 ) * 100.0;","if ( diff < gDisplace ) {","garea = diffArea;","} else {","far = 1;","}","float dd = diff - gDisplace;","float gauss = pow( EULER, -2.0 * dd * dd / ( garea * garea ) );","return gauss;","}","float calcAO( float depth, float dw, float dh, const sampler2D tDepth ) {","float dd = radius - depth * radius;","vec2 vv = vec2( dw, dh );","vec2 coord1 = vUv + dd * vv;","vec2 coord2 = vUv - dd * vv;","float temp1 = 0.0;","float temp2 = 0.0;","int far = 0;","temp1 = compareDepths( depth, readDepth( coord1, tDepth ), far );","if ( far > 0 ) {","temp2 = compareDepths( readDepth( coord2, tDepth ), depth, far );","temp1 += ( 1.0 - temp1 ) * temp2;","}","return temp1;","}","vec4 SSAO(const sampler2D tDiffuse, const sampler2D tDepth){","vec2 noise = rand( vUv );","float depth = readDepth( vUv, tDepth );","float tt = clamp( depth, aoClamp, 1.0 );","float w = ( 1.0 / size.x )  / tt + ( noise.x * ( 1.0 - noise.x ) );","float h = ( 1.0 / size.y ) / tt + ( noise.y * ( 1.0 - noise.y ) );","float ao = 0.0;","float dz = 1.0 / float( samples );","float z = 1.0 - dz / 2.0;","float l = 0.0;","for ( int i = 0; i <= samples; i ++ ) {","float r = sqrt( 1.0 - z );","float pw = cos( l ) * r;","float ph = sin( l ) * r;","ao += calcAO( depth, pw * w, ph * h, tDepth );","z = z - dz;","l = l + DL;","}","ao /= float( samples );","ao = 1.0 - ao;","vec3 color = texture2D( tDiffuse, vUv ).rgb;","float a = texture2D( tDiffuse, vUv ).a;","vec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );","float lum = dot( color.rgb, lumcoeff );","vec3 luminance = vec3( lum );","vec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","//final = vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );","return vec4( final, a );","}","vec4 checkDepth (sampler2D depth1, sampler2D depth2, vec4 color1, vec4 color2){","float d1 = texture2D(depth1, vUv).x;","float d2 = texture2D(depth2, vUv).x;","if (d1 > d2){","return color2;","}","else{","if (color1.a < 1.0){","float a1 = 1.0 - color1.a;","float a2 = 1.0 - a1;","return vec4(color2.r*a1 + color1.r*a2, color2.g*a1 + color1.g*a2, color2.b*a1 + color1.b*a2, a2);","}","else","return color1;","}","}","void main() {","vec4 diffuse = texture2D(tDiffuseBaseModelAndAddModel, vUv).rgba;","vec4 diffuse1 = texture2D(tDiffuseAssistModel, vUv).rgba;","//vec4 diffuse = SSAO(tDiffuseBaseModelAndAddModel, tDepthBaseModelAndAddModel);","//vec4 diffuse1 = SSAO(tDiffuseAssistModel, tDepthAssistModel);","gl_FragColor.rgba = checkDepth(tDepthBaseModelAndAddModel, tDepthAssistModel, diffuse, diffuse1);","}"].join("\n");this.uniforms=e;this.vertexShader=t;this.fragmentShader=r;this.defines=undefined}return e}();var o=function(){function e(){this.defines={};this.uniforms={};var e={SMAA_THRESHOLD:"0.1"};var t={tDiffuse:{value:{}},resolution:{value:{}}};var r=["uniform vec2 resolution;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","void SMAAEdgeDetectionVS( vec2 texcoord ) {","vOffset[ 0 ] = texcoord.xyxy + resolution.xyxy * vec4( -1.0, 0.0, 0.0,  1.0 );","vOffset[ 1 ] = texcoord.xyxy + resolution.xyxy * vec4(  1.0, 0.0, 0.0, -1.0 );","vOffset[ 2 ] = texcoord.xyxy + resolution.xyxy * vec4( -2.0, 0.0, 0.0,  2.0 );","}","void main() {","vUv = uv;","SMAAEdgeDetectionVS( vUv );","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n");var n=["uniform sampler2D tDiffuse;","varying vec2 vUv;","varying vec4 vOffset[ 3 ];","vec4 SMAAColorEdgeDetectionPS( vec2 texcoord, vec4 offset[3], sampler2D colorTex ) {","vec2 threshold = vec2( SMAA_THRESHOLD, SMAA_THRESHOLD );","vec4 delta;","vec3 C = texture2D( colorTex, texcoord ).rgb;","vec3 Cleft = texture2D( colorTex, offset[0].xy ).rgb;","vec3 t = abs( C - Cleft );","delta.x = max( max( t.r, t.g ), t.b );","vec3 Ctop = texture2D( colorTex, offset[0].zw ).rgb;","t = abs( C - Ctop );","delta.y = max( max( t.r, t.g ), t.b );","vec2 edges = step( threshold, delta.xy );","if ( dot( edges, vec2( 1.0, 1.0 ) ) == 0.0 )","discard;","vec3 Cright = texture2D( colorTex, offset[1].xy ).rgb;","t = abs( C - Cright );","delta.z = max( max( t.r, t.g ), t.b );","vec3 Cbottom  = texture2D( colorTex, offset[1].zw ).rgb;","t = abs( C - Cbottom );","delta.w = max( max( t.r, t.g ), t.b );","float maxDelta = max( max( max( delta.x, delta.y ), delta.z ), delta.w );","vec3 Cleftleft  = texture2D( colorTex, offset[2].xy ).rgb;","t = abs( C - Cleftleft );","delta.z = max( max( t.r, t.g ), t.b );","vec3 Ctoptop = texture2D( colorTex, offset[2].zw ).rgb;","t = abs( C - Ctoptop );","delta.w = max( max( t.r, t.g ), t.b );","maxDelta = max( max( maxDelta, delta.z ), delta.w );","edges.xy *= step( 0.5 * maxDelta, delta.xy );","return vec4( edges, 0.0, 0.0 );","}","void main() {","gl_FragColor = SMAAColorEdgeDetectionPS( vUv, vOffset, tDiffuse );","}"].join("\n");this.uniforms=t;this.vertexShader=r;this.fragmentShader=n;this.defines=e}return e}();var a=function(){function e(e){switch(e){case t.FXAASHADER:this.shader=new r;break;case t.BLENDSHADER:this.shader=new n;break;case t.SMAASHADER:this.shader=new o;break;default:console.log("shader error! have no this shader.")}}e.prototype.getUniforms=function(){return this.shader.uniforms};e.prototype.getDefins=function(){return this.shader.defines};e.prototype.getVertexShader=function(){return this.shader.vertexShader};e.prototype.getFragmentShader=function(){return this.shader.fragmentShader};return e}();e.RadonShader=a})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(){var t=["cc5b4b09-b7d5-4ddd-a58d-cdcc857c3b6c","cc5b4b09-b7d5-4ddd-a58d-cdcc857c3b9d","cc5b4b09-b7d5-4ddd-a58d-cdcc857c3902","cc5b4b09-b7d5-4ddd-a58d-cdcc857c38dc","cc5b4b09-b7d5-4ddd-a58d-cdcc857c39da","cc5b4b09-b7d5-4ddd-a58d-cdcc857c3bbb"];var r=[];var n=new e.MeshPhongMaterial({color:3368635,specular:526344,emissive:0,opacity:.8,transparent:true});function o(e){function o(t){var r=new Array;var n=e.getCount();for(var o=0;o<n;++o){var a=e.getUUID(o);if(a==t)r.push(o)}return r}r.length=0;for(var a=0;a<t.length;++a){var i=o(t[a]);var s=[];var l=new THREE.Geometry;for(var c=0;c<i.length;++c){var u=e.getMesh(i[c]);var f=u.geometry;var d=new THREE.BufferGeometry;d.setIndex(f.index);d.addAttribute("position",f.attributes.position);d.addAttribute("uv",f.attributes.uv);d.addAttribute("normal",f.attributes.normal);d.computeBoundingBox();var v=d.boundingBox;var m=new THREE.Mesh(d,n);var h=20;m.matrix.makeScale(h,h,h);m.applyMatrix(u.matrix);m.position.z-=(v.max.z+v.min.z)*(h-1)/2;m.position.x-=(v.max.x+v.min.x)*(h-1)/2;m.position.y-=(v.max.y+v.min.y)*(h-1)/2;s.push(m)}r[a]=s}}function a(e,t,n){if(e>=r.length)return false;if(t==true){for(var o=0;o<r[e].length;++o){n.add(r[e][o])}}else{console.log(t);for(var o=0;o<r[e].length;++o)n.remove(r[e][o])}return true}this.InitCameras=o;this.SetCameraState=a}return t}();e.CameraOperate=t})(Neon||(Neon={}));var Neon;(function(e){e.coreModel=[];e.isCircle=false;e.isTriPlan=false;e.enableUp=false;e.enableNav=false;e.enableModel=false;e.meter2foot=3.2808399;e.enableBLevel=false;e.enableCLevel=true;e._box=null;var t;function r(){for(var t=0;t<e.coreModel.length;t++){e.coreModel[t].hide(-2)}}e.hideAll=r;function n(t){e.coreModel[0].hideFromGuid(t)}e.hideFromGUID=n;function o(){for(var t=0;t<e.coreModel.length;t++){e.coreModel[t].show(-2)}}e.showAll=o;function a(t){if(t=="b"){e.enableBLevel=true;e.enableCLevel=false;e.coreModel[0].getIterator().reset();e.firstCreat=true}else if(t=="c"){e.enableCLevel=true;e.enableBLevel=false;e.coreModel[0].getIterator().reset();e.firstCreat=true}console.log("cutLevel",t);e.enableUp=true}e.cutLevel=a;function i(t){console.log("enableAxis",t);e.enableAxisNet=t;e.coreModel[0].getIterator().reset();e.enableUp=true;if(t===true){var r=e.coreModel[0].axisNetsMesh[0];e.coreModel[0].axisNetScene.children.length=0;if(r!=undefined){r.forEach(function(t){e.coreModel[0].axisNetScene.add(t)})}}}e.enableAxis=i;function s(t,r){var n=new v(t,r);e.coreModel.push(n);t=null;return n}e.createModel=s;function l(t){if(t===undefined)t=e.coreModel.length-1;return e.coreModel[t]}e.getModel=l;function c(){var t=[];e.gloableParames.modelManager.enumModel(function(e){t=t.concat(e.fragSet.uuids)});return t}e.getUuids=c;function u(){e.gloableParames.modelManager.enumModel(function(e){for(var t=0;t<e.fragSet.getCount();++t){var r=e.fragSet.getBoundingBox(t)}})}e.TestBBox=u;function f(t,r){e.gloableParames.modelManager.enumModel(function(n){n.initLevels(t,new e.Matrix4);n.initAxisNets(r,new e.Matrix4);n.customAxisNet()})}e.InitLevelsAndGrids=f;var d=function(t){__extends(r,t);function r(r){var n=t.call(this)||this;n.up=r.up;n.boundingBox=(new e.Box3).copy(r.boundingBox);e._box=n.boundingBox;var o=e.coreModel.length;n.getModelId=function(){return o};return n}return r}(e.EventEmitter);var v=function(n){__extends(a,n);function a(a,i){var s=n.call(this,a)||this;s.fragSet=null;s.iterator=null;s.highIterator=null;s.up=new e.Vector3;s._gl=null;s._glup=null;s._glnav=null;s.getDownGL=function(){return this._gl};s.getGL=function(){return this._glup};s.getDom=function(){return this._glup.domElement};s.getNavDom=function(){return this._glnav.domElement};s.levels=null;s.axisNets=null;s.id=i.modelId;s.modelurl=i.modelUrl;s.loader=i.loader;s.up.copy(a.up);var l=s;l.levels=new Map;l._gl=e.renderParamers._gl;l._gl.shadowMap.enabled=true;l._gl.shadowMap.type=THREE.BasicShadowMap;l._glnav=e.renderParamers._glnav;l._glup=e.renderParamers._glup;e.enableNav=true;var c=e.modelsControl.getMainCamera();var u=e.modelsControl.getHubCamera();var f=e.modelsControl.getHubScene();var d=e.modelsControl.setZoom(s.boundingBox);var v=e.modelsControl.getNavCamera();var m=e.modelsControl.getNavtriCamera();var h=s.boundingBox.clone();var p=a.geometries;l.fragSet=new e.FragmentSet(a,s.getModelId(),l);l.iterator=new e.LinearIterator(l.fragSet);_();e.modelsControl.initLights();var g=e.modelsControl.getAmbLight();var y=e.modelsControl.getPointLight();var x=[y,g];var A=e.modelsControl.getNavScene("main");var b=e.modelsControl.getNavScene("tri");var E=e.modelsControl.getNavScene("circle");var w=e.modelsControl.getNavScene("home");var M=e.modelsControl.getControl();s.highIterator=new e.HighLightIterator(s.fragSet);s.getHighIterator=function(){return s.highIterator};var C=e.modelsControl.getOverlayScene();var S=new e.Scene;var R=new e.Scene;var B=[];s.axisNetsMesh=B;var T=new Map;s.nameMap=T;e._selector.on("OnSelectFloorN",function(t){var r=t.target.names;var n=e.gloableParames.clipBox;var o=[];l.highIterator.clear();S.children.length=0;var a=new Set;var i=new Set;for(var u=0;u<r.length;++u){var f=r[u];if(f.isChecked==true||f.isHalfChecked)i.add(f.title);var d=f.title;e.getNames(a,f.children,d)}var v=new e.Box3;for(var u=0,m=l.fragSet.getCount();u<m;++u){var h=l.fragSet.getAttribute(u);if(h==null){l.fragSet.setState(u,1);continue}var p=h.floorName;var g=h.major;var y=h.category;var x=h.categoryName;var d="";if(p!=undefined)d+=p;if(g!=undefined)d+=g;if(y!=undefined)d+=y;if(x!=undefined)d+=x;if(a.has(d)){o.push(u);v.union(l.fragSet.getBoundingBox(u))}else l.fragSet.setState(u,1)}s.fragSet.dynamicLoader.LoadGeometry(o);if(!v.equals(new e.Box3)){n.copy(v);if(l._gl&&l._gl.clippingPlanes&&l._gl.clippingPlanes.length>0){l._gl.clippingPlanes[0].constant=-n.min.x;l._gl.clippingPlanes[1].constant=-n.min.y;l._gl.clippingPlanes[2].constant=-n.min.z;l._gl.clippingPlanes[3].constant=n.max.x;l._gl.clippingPlanes[4].constant=n.max.y;l._gl.clippingPlanes[5].constant=n.max.z}}i.forEach(function(t){var r=T.get(t);e.logger.debug(t,r,T);if(r!=undefined){var n=B[r];if(n!=undefined){n.forEach(function(e){S.add(e)})}}});if(i.size>=0&&S.children.length==0){var A=B[0];if(A!=undefined){A.forEach(function(e){S.add(e)})}}l.iterator.reset();e.enableUp=true;M.target.copy(v.getCenter());c.updateProjectionMatrix();M.update()});e._selector.on("OnSelectByGuid",function(t){var n=t.target.uuids;var a=t.target.floorSet;var i=e.gloableParames.clipBox;var c=[];l.highIterator.clear();S.children.length=0;var u=new e.Box3;n.map(function(e){var t=s.fragSet.uuid2fragid.get(e);if(!t)return;t.map(function(e){c.push(e)});u.union(s.fragSet.getBoundingBoxFromUuid(e))});r();s.fragSet.setState(c,2);if(c.length===0)o();if(!u.equals(new e.Box3)){i.copy(u);if(l._gl&&l._gl.clippingPlanes&&l._gl.clippingPlanes.length>0){l._gl.clippingPlanes[0].constant=-i.min.x;l._gl.clippingPlanes[1].constant=-i.min.y;l._gl.clippingPlanes[2].constant=-i.min.z;l._gl.clippingPlanes[3].constant=i.max.x;l._gl.clippingPlanes[4].constant=i.max.y;l._gl.clippingPlanes[5].constant=i.max.z}}a.forEach(function(t){var r=T.get(t);e.logger.debug(t,r,T);if(r!=undefined){var n=B[r];if(n!=undefined){n.forEach(function(e){S.add(e)})}}});if(a.size>=0&&S.children.length==0){var f=B[0];if(f!=undefined){f.forEach(function(e){S.add(e)})}}l.iterator.reset();e.enableUp=true});function P(t){var r=(new e.Vector3).copy(t.max);var n=(new e.Vector3).copy(t.min);var o=Math.abs;r.project(c);n.project(c);var a=o(r.x-n.x);var i=o(r.y-n.y);var s=a>i?i:a;return 1.2/s}var D=function(){var t;return function(r,n){t=p[n];if(e.isUndefined(t)){e.logger.warn("hash is unvalid! ["+n+"]");return}l.fragSet.addGeometry(r,t)}}();function I(){var t=[];for(var r=0,n=l.fragSet.getCount();r<n;++r){var o=l.fragSet.getAttribute(r);if(o!=null){var a=new Array(4);var i=t[o.floorNum];if(i==undefined){i={}}a[0]=o.floorName;a[1]=o.major;a[2]=o.category;a[3]=o.categoryName;if(a[0]!=undefined){if(a[2]!=undefined){var s=void 0;if(i[a[0]]==undefined){s={}}else{s=i[a[0]]}if(a[3]==undefined){var c=void 0;if(s[a[1]]==undefined){c=[]}else{c=s[a[1]]}if(!e.isInArray(c,a[2])&&e.isArray(c))c.push(a[2]);s[a[1]]=c;i[a[0]]=s;t[o.floorNum]=i;if(a[0]!="未知")T.set(a[0],o.floorNum)}else{var c=void 0;if(s[a[1]]==undefined){c={}}else{c=s[a[1]]}var u=void 0;if(c[a[2]]==undefined){u=[]}else{u=c[a[2]]}if(!e.isInArray(u,a[3])&&e.isArray(u))u.push(a[3]);c[a[2]]=u;s[a[1]]=c;i[a[0]]=s;t[o.floorNum]=i;if(a[0]!="未知")T.set(a[0],o.floorNum)}}else{var s=void 0;if(i[a[0]]==undefined){s=[]}else{s=i[a[0]]}if(!e.isInArray(s,a[1])&&e.isArray(s))s.push(a[1]);i[a[0]]=s;t[o.floorNum]=i}}}}var f={};var d=[];for(var v in t){d.push(parseInt(v))}d.sort(function(e,t){return e-t});for(var r=0,n=d.length;r<n;++r){var m=t[d[r]];for(var h in m){f[h]=m[h]}}return f}function k(){var t=new Set;var r=new Set;var n=new Set;var o=new Map;var a=new Map;var i=new Map;function s(e){var t="";var r=0;var n=l.fragSet.getAttributeUUID(e);var o=n.intersectAxis;var a=n.adjoinAxis;if(o.length>=2){t+=o[0].name+o[1].name}else if(o.length==0){t+=a.xpos==null?"":a.xpos.name;t+=a.xneg==null?"":a.xneg.name;t+=a.ypos==null?"":a.ypos.name;t+=a.yneg==null?"":a.yneg.name}else if(o.length==1){t+=o[0].name;var s=o[0].mode;t+=a.xpos!=null&&s!=a.xpos.mode?a.xpos.name:"";t+=a.xneg!=null&&s!=a.xneg.mode?a.xneg.name:"";t+=a.ypos!=null&&s!=a.ypos.mode?a.ypos.name:"";t+=a.yneg!=null&&s!=a.yneg.mode?a.yneg.name:""}if(i.has(t)){r=i.get(t)+1;i.set(t,r)}else{r=1;i.set(t,r)}return t+"-"+r}for(var c=0;c<l.fragSet.uuids.length;++c){var u=l.fragSet.uuids[c];var f=l.fragSet.getAttributeUUID(u);if(f==undefined){continue}if(f.cNames=="基础承台"){t.add(u)}else if(f.cNames=="桩"){n.add(u)}else if(f.cNames=="垫层"){r.add(u)}}t.forEach(function(t){var r=l.fragSet.getBoundingBoxFromUuid(t);n.forEach(function(a){var i=l.fragSet.getBoundingBoxFromUuid(a);if(e.inBoxLinking(r,i)){var s=o.get(t);if(s==undefined)s=[];s.push(a);o.set(t,s);n.delete(a)}})});l.capToPipleMap=o;var d=function(e){var t=l.fragSet.uuids[e];var r=l.fragSet.getAttributeUUID(t);if(r&&r.cNames=="基础承台"){var n=o.get(t);if(n!=undefined){var a=1;n.map(function(e){var r=l.fragSet.getAttributeUUID(e);r.no=s(t);r.pileLocation=r.no.split("-")[0];a++})}}};for(var c=0;c<l.fragSet.uuids.length;++c){d(c)}}e.callBackMap.setCallBack("initPile",{fn:k,target:l,arguments:[]});var N=function(){var e;var t=performance;var r=0;var n=0;var o=0;var a=0;function i(i){if(l.iterator.done())return;a=t.now();n=a-o;r-=n;o=a;while(true){e=l.iterator.next(l._gl.getFrustum());if(!e)break;l._gl.render(e,i,null,false,x);if(l.iterator.done()){break}a=t.now();n=a-o;if(e.time===undefined)e.time=n;else e.time=.8*e.time+.2*n;r-=n;if(r<=0){break}}}return function(e,n){r=n;o=t.now();i(e)}}();function U(t){if(e.enableAxisNet)l._glup.render(S,t,null,false,x);if(Math.abs(M.getSpherical().phi-3.1415926/2)<1e-4&&Math.abs(M.getSpherical().theta%(3.1415926/2))<1e-4){if(e.firstCreat){l.createLevel(M.getSpherical().theta,M.getSpherical().phi,h,R);e.firstCreat=false}l._glup.render(R,t,null,false,x)}else{e.firstCreat=true}}function _(){e.modelsControl.setHome();l.iterator.reset()}function q(e){if(e.children.length!=0)for(var t=0,r=e.children.length;t<r;++t){e.remove(e.children[t]);e.children[t]=null}e.children.length=0}s.dispose=function(){cancelAnimationFrame(t);l._gl.dispose();l._glup.dispose();l._glnav.dispose();l._gl=null;l._glup=undefined;c=undefined;u=undefined;v=undefined;m=undefined;q(A);q(E);q(b);q(C);q(R);q(S);l.highIterator.clear();l.highIterator=null;M=null;e.coreModel.length=0;e._selector.reSet();l.fragSet.dispose();l.fragSet=null;B.length=0;B=null};s.loadOver=function(){s.iterator.setGeomScenes()};(function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){l.fragSet.InitAttribute();l.customAxisNet();k();return[2]})})})();delete a.geometries;delete a.nodes;delete a.indices;a=null;s.renderModel=N;s.renderUp=U;s.axisNetScene=S;s.setHome=_;s.addGeometry=D;s.getFloorAndMajorAndCategoryName=I;s.disposeScene=q;return s}a.prototype.show=function(t){if(t===-2){this.highIterator.clear();for(var r=0,n=this.fragSet.getCount();r<n;++r)this.fragSet.setState(r,2)}else{this.highIterator.splice(t);this.fragSet.setState(t,2)}e.enableModel=true;e.enableUp=true;e.enableNav=true};a.prototype.hide=function(e){if(e===-2){this.highIterator.clear();for(var t=0,r=this.fragSet.getCount();t<r;++t)this.fragSet.setState(t,1)}else{this.fragSet.setState(e,1);this.highIterator.splice(e)}this.iterator.reset()};a.prototype.initLevels=function(t,r){var n=new e.Vector3;var o=new e.Quaternion;var a=new e.Vector3;var i=this;this.levels.clear();r.decompose(n,o,a);e.gloableTran.copy(n);function s(t,r,o){isNaN(t)?t=0:undefined;var a=i.levels.get(t);if(a==undefined)a={b:null,c:null};if(r==e.LEVELMODE.BUILDING)a.b={mode:r,location:o+n.z};else a.c={mode:r,location:o+n.z};i.levels.set(t,a)}for(var l=0,c=t.length;l<c;++l){var u=t[l];if(!u.name)u.name=u.Name;if(!u.height)u.height=u.Height/1e3*e.meter2foot;if(u.name=="基础"){s(-1,e.LEVELMODE.STRUCTURE,u.height)}else if(u.name=="屋面结构"){s(9,e.LEVELMODE.STRUCTURE,u.height)}else if(u.name=="水箱间结构"){s(10,e.LEVELMODE.STRUCTURE,u.height)}else if(u.name=="出屋面"){s(11,e.LEVELMODE.STRUCTURE,u.height)}else if(u.name=="屋面建筑"){s(9,e.LEVELMODE.BUILDING,u.height)}else if(u.name=="水箱间建筑"){s(10,e.LEVELMODE.BUILDING,u.height)}var f=u.name.split("F");if(f.length==2){var d=f[1]=="结构"?e.LEVELMODE.STRUCTURE:e.LEVELMODE.BUILDING;s(parseInt(f[0]),d,u.height)}f=u.name.split(" ");if(f.length==2){e.logger.debug(f);var v=f[0].indexOf("建筑")<0?e.LEVELMODE.STRUCTURE:e.LEVELMODE.BUILDING;if(f[0]=="建筑屋面")v=e.LEVELMODE.STRUCTURE;else if(f[0]=="站房")v=e.LEVELMODE.BUILDING;s(parseFloat(f[1]),v,u.height)}f=u.name.split("-");if(f.length==2){var m=f[0]=="建筑"?e.LEVELMODE.BUILDING:e.LEVELMODE.STRUCTURE;s(parseFloat(f[1].split("/")[0]),m,u.height)}var h=e.LEVELMODE.STRUCTURE;s(u.height*e.meter2foot,h,u.height*e.meter2foot)}};a.prototype.customAxisNet=function(){var t=e.getMicroYaHeiFont();var r=this.axisNets;var n=this.nameMap;var o=this.axisNetsMesh;e.logger.debug("nameMap",this.nameMap,r);if(!r)return;var a=this.levels;var i=new THREE.Line;i.material=new THREE.LineDashedMaterial({color:16711680,linewidth:1,scale:1,dashSize:3,gapSize:1});var s=new THREE.Line;s.material=new THREE.LineBasicMaterial({color:65280});var l={size:4,height:.1,font:t,curveSegments:4};var c={size:1,height:.1,font:t,currentTarget:4};var u=new e.SelfAdaptionObject;var f=new THREE.Mesh;u.material=new THREE.MeshPhongMaterial({color:16711680});f.material=u.material;function d(t,r){var n=i.clone();var o=new THREE.Geometry;var s=(new e.Vector3).copy(t.startPoint);var l=(new e.Vector3).copy(t.endPoint);if(r!=0){s.z=a.get(r).c.location;l.z=s.z}o.vertices.push(t.startPoint,t.endPoint);n.geometry=o;return n}function v(t,r){var n=u.clone();var o=new THREE.TextGeometry(t.name,l);o.center();o.computeBoundingBox();var i=new e.Vector3;var s=o.boundingBox;n.geometry=o;n.axis=t;if(t===undefined)console.log("axis undefined",t);var c=n.clone();c.axis=t;if(t.mode==e.AXISMODE.YMODE){if(t.startPoint.x<t.endPoint.x){i.set((s.max.x-s.min.x)/2,0,0)}else{i.set(-(s.max.x-s.min.x)/2,0,0)}}else{if(t.startPoint.y<t.endPoint.y){i.set(0,(s.max.y-s.min.y)/2,0)}else{i.set(0,-(s.max.y-s.min.y)/2,0)}}n.position.copy(t.startPoint).sub(i);c.position.copy(t.endPoint).add(i);if(r!=0){n.position.z=a.get(r).c.location;c.position.z=a.get(r).c.location}return[n,c]}function m(t,r,n){var o=s.clone();var i=s.clone();var l=new e.Geometry;var u=new e.Geometry;var d=new e.Vector3;var v=new e.Vector3;var m=new e.Vector3;var h=new e.Vector3;if(t.mode==e.AXISMODE.XMODE){if(t.startPoint.y==r.startPoint.y||t.endPoint.y==r.startPoint.y){d.copy(t.startPoint);v.copy(r.startPoint);m.copy(t.endPoint);h.copy(r.endPoint)}else{d.copy(t.startPoint);v.copy(r.endPoint);m.copy(t.endPoint);h.copy(r.startPoint)}if(t.startPoint.y>t.endPoint.y){d.y=t.startPoint.y>r.startPoint.y?t.startPoint.y:r.startPoint.y;v.y=d.y;m.y=t.endPoint.y>r.endPoint.y?r.endPoint.y:t.endPoint.y;h.y=m.y}else{d.y=t.startPoint.y<r.startPoint.y?t.startPoint.y:r.startPoint.y;v.y=d.y;m.y=t.endPoint.y<r.endPoint.y?r.endPoint.y:t.endPoint.y;h.y=m.y}}else if(t.mode==e.AXISMODE.YMODE){if(t.startPoint.x==r.startPoint.x||t.endPoint.x==r.endPoint.x){d.copy(t.startPoint);v.copy(r.startPoint);m.copy(t.endPoint);h.copy(r.endPoint)}else{d.copy(t.startPoint);v.copy(r.endPoint);m.copy(t.endPoint);h.copy(r.startPoint)}if(t.startPoint.x>t.endPoint.x){d.x=t.startPoint.x>r.startPoint.x?t.startPoint.x:r.startPoint.x;v.x=d.x;m.x=t.endPoint.x>r.endPoint.x?r.endPoint.x:t.endPoint.x;h.x=m.x}else{d.x=t.startPoint.x<r.startPoint.x?t.startPoint.x:r.startPoint.x;v.x=d.x;m.x=t.endPoint.x<r.endPoint.x?r.endPoint.x:t.endPoint.x;h.x=m.x}}var p=f.clone();var g;if(t.mode==e.AXISMODE.XMODE){g=new THREE.TextGeometry(String(Math.abs((v.x-d.x)*1e3).toFixed(0)),c);g.center();p.position.set((d.x+v.x)/2,d.y,d.z);if(d.y>m.y){d.y-=.5;v.y-=.5;m.y+=.5;h.y+=.5}else{d.y+=.5;v.y+=.5;m.y-=.5;h.y-=.5}}else if(t.mode==e.AXISMODE.YMODE){g=new THREE.TextGeometry(String(Math.abs((v.y-d.y)*1e3).toFixed(0)),c);g.center();p.position.set(d.x+.01,(d.y+v.y)/2,d.z);if(d.x>m.x){d.x-=1;v.x-=1;m.x+=1;h.x+=1}else{d.x+=1;v.x+=1;m.x-=1;h.x-=1}}if(n!=0){d.z=a.get(n).c.location;v.z=d.z;m.z=d.z;h.z=d.z;p.position.z=d.z}l.vertices.push(d,v);u.vertices.push(m,h);o.geometry=l;i.geometry=u;p.geometry=g;var y=p.clone();if(t.mode==e.AXISMODE.XMODE){y.position.set((m.x+h.x)/2,m.y,d.z);p.position.set((d.x+v.x)/2,d.y,d.z)}else if(t.mode==e.AXISMODE.YMODE){y.position.x=m.x;p.position.x=d.x;y.rotation.set(0,0,Math.PI/2);p.rotation.set(0,0,Math.PI/2)}return[o,i,p,y]}function h(t,r,n){var o=new Map;var a=new Map;t.map(function(t){var r=n[t];var a=(new e.Vector3).copy(r.startPoint).distanceTo(r.endPoint);var i=Math.floor(a);var s=o.get(i);if(s==undefined){s=[]}s.push(t);o.set(i,s)});r.map(function(t){var r=n[t];var o=(new e.Vector3).copy(r.startPoint).distanceTo(r.endPoint);var i=Math.floor(o);var s=a.get(i);if(s==undefined){s=[]}s.push(t);a.set(i,s)});o.forEach(function(e){e.sort(function(e,t){return n[e].startPoint.x-n[t].startPoint.x})});a.forEach(function(e){e.sort(function(e,t){return n[e].startPoint.x-n[t].startPoint.x})});return[o,a]}var p=r.get(0);if(p!=undefined){var g=[];var y=[];var x=[];for(var A=0,b=p.length;A<b;++A){var E=p[A];g.push(d(E,0));var w=v(E,0);g.push(w[0],w[1]);if(E.mode==e.AXISMODE.XMODE)y.push(A);else if(E.mode==e.AXISMODE.YMODE)x.push(A)}var M=h(y,x,p),C=M[0],S=M[1];C.forEach(function(e){for(var t=0;t<e.length;++t){if(e[t+1]!=undefined){var r=m(p[e[t]],p[e[t+1]],0);g.push(r[0],r[1],r[2],r[3])}}});S.forEach(function(e){for(var t=0;t<e.length;++t){if(e[t+1]!=undefined){var r=m(p[e[t]],p[e[t+1]],0);g.push(r[0],r[1],r[2],r[3])}}});o[0]=g}n.forEach(function(t,n){var i=r.get(t);var s=0;if(a.get(t)==undefined){if(a.has(0)){s=a.get(0).b==null?a.get(0).c.location:a.get(0).b.location}}else{s=a.get(t).c==null?a.get(t).b.location:a.get(t).c.location}if(i==undefined){var l=[];var c=o[0];for(var u=0,f=c.length;u<f;++u){var v=c[u].clone();if(v.isLine==true){var m=v.geometry;var h=new e.Geometry;v.geometry=h;h.vertices.push((new e.Vector3).copy(m.vertices[0]).add(new e.Vector3(0,0,s-m.vertices[0].z)),(new e.Vector3).copy(m.vertices[1]).add(new e.Vector3(0,0,s-m.vertices[1].z)))}else{v.position.z=s}l.push(v)}o[t]=l}else{var p=[];for(var u=0,g=i.length;u<g;++u){var y=i[u];p.push(d(y,t))}o[t]=p}});e.logger.debug(o)};a.prototype.createLevel=function(t,r,n,o){var a=3;var i=e.getMicroYaHeiFont();var s={size:a,height:.1,font:i,curveSegments:4};var l=n.clone();o.children.length=0;var c=0;var u=0;var f=0;var d=(n.max.z-n.min.z)/10;var v=new THREE.Geometry;function m(r){var n,i,c,u;if(Math.abs(t)<1e-4||Math.abs(t-3.1415926)<1e-4||Math.abs(t+3.1415926)<1e-4){n=l.max.x;i=l.min.x;c=l.max.y+d;u=l.max.y+d;var f=new THREE.Geometry
;f.vertices.push(new THREE.Vector3(n+2*d,c,r),new THREE.Vector3(n,c,r));var v=new THREE.Line(f,p);var m=new THREE.Geometry;m.vertices.push(new THREE.Vector3(n+7/3*d+d,c,r+1/3*d),new THREE.Vector3(n+1/3*d+d,c,r+1/3*d));var h=new THREE.Line(m,p);var g=new THREE.Geometry;g.vertices.push(new THREE.Vector3(n+1/3*d+d,c,r+1/3*d),new THREE.Vector3(n+2/3*d+d,c,r));var y=new THREE.Line(g,p);var x=new THREE.Geometry;x.vertices.push(new THREE.Vector3(n+d+d,c,r+1/3*d),new THREE.Vector3(n+2/3*d+d,c,r));var A=new THREE.Line(x,p);var b=String((r-e.gloableTran.z).toFixed(2));var E=new e.NeonMesh(new THREE.TextGeometry(b,s),new THREE.MeshBasicMaterial({color:16711680}));var w=E.geometry.center();E.position.set(n+7/3*d+d+w.x,c,r+1/3*d+1/2*a+.5);if(Math.abs(t-3.1415926)<.001||Math.abs(t+3.1415926)<1e-4){E.rotateX(-3.1415926/2);E.rotateZ(-3.1415926)}else{E.rotateX(3.1415926/2)}o.add(v);o.add(h);o.add(y);o.add(A);o.add(E);var M=new THREE.Geometry;M.vertices.push(new THREE.Vector3(i-2*d,u,r),new THREE.Vector3(i,u,r));var C=new THREE.Line(M,p);var S=new THREE.Geometry;S.vertices.push(new THREE.Vector3(i-7/3*d-d,u,r+1/3*d),new THREE.Vector3(i-1/3*d-d,u,r+1/3*d));var R=new THREE.Line(S,p);var B=new THREE.Geometry;B.vertices.push(new THREE.Vector3(i-1/3*d-d,u,r+1/3*d),new THREE.Vector3(i-2/3*d-d,u,r));var T=new THREE.Line(B,p);var P=new THREE.Geometry;P.vertices.push(new THREE.Vector3(i-d-d,u,r+1/3*d),new THREE.Vector3(i-2/3*d-d,u,r));var D=new THREE.Line(P,p);var I=String((r-e.gloableTran.z).toFixed(2));var k=new e.NeonMesh(new THREE.TextGeometry(I,s),new THREE.MeshBasicMaterial({color:16711680}));var N=k.geometry.center();k.position.set(i-7/3*d-d-N.x,u,r+1/3*d+1/2*a+.5);if(Math.abs(t-3.1415926)<.001||Math.abs(t+3.1415926)<1e-4){k.rotateX(-3.1415926/2);k.rotateZ(-3.1415926)}else{k.rotateX(3.1415926/2)}o.add(C);o.add(R);o.add(T);o.add(D);o.add(k)}else{n=l.max.x;i=l.max.x;c=l.max.y;u=l.min.y;var U=new THREE.Geometry;U.vertices.push(new THREE.Vector3(n,u+d-d,r),new THREE.Vector3(n,u-d-d,r));var _=new THREE.Line(U,p);var q=new THREE.Geometry;q.vertices.push(new THREE.Vector3(n,u-7/3*d-d,r+1/3*d),new THREE.Vector3(n,u-1/3*d-d,r+1/3*d));var H=new THREE.Line(q,p);var L=new THREE.Geometry;L.vertices.push(new THREE.Vector3(n,u-1/3*d-d,r+1/3*d),new THREE.Vector3(n,u-2/3*d-d,r));var F=new THREE.Line(L,p);var O=new THREE.Geometry;O.vertices.push(new THREE.Vector3(n,u-3/3*d-d,r+1/3*d),new THREE.Vector3(n,u-2/3*d-d,r));var z=new THREE.Line(O,p);var V=String((r-e.gloableTran.z).toFixed(2));var j=new e.NeonMesh(new THREE.TextGeometry(V,s),new THREE.MeshBasicMaterial({color:16711680}));var G=j.geometry.center();j.position.set(n,u-7/3*d-d-G.x,r+1/3*d+1/2*a+.5);if(Math.abs(t-3.1415926/2)<.001){j.rotateX(3.1415926/2);j.rotateY(3.1415926/2)}else{j.rotateX(3.1415926/2);j.rotateY(-3.1415926/2)}o.add(_);o.add(H);o.add(F);o.add(z);o.add(j);var W=new THREE.Geometry;W.vertices.push(new THREE.Vector3(n,c+d+d,r),new THREE.Vector3(n,c-d+d,r));var Y=new THREE.Line(W,p);var Q=new THREE.Geometry;Q.vertices.push(new THREE.Vector3(n,c+7/3*d+d,r+1/3*d),new THREE.Vector3(n,c+1/3*d+d,r+1/3*d));var X=new THREE.Line(Q,p);var K=new THREE.Geometry;K.vertices.push(new THREE.Vector3(n,c+1/3*d+d,r+1/3*d),new THREE.Vector3(n,c+2/3*d+d,r));var J=new THREE.Line(K,p);var Z=new THREE.Geometry;Z.vertices.push(new THREE.Vector3(n,c+3/3*d+d,r+1/3*d),new THREE.Vector3(n,c+2/3*d+d,r));var $=new THREE.Line(Z,p);var ee=String((r-e.gloableTran.z).toFixed(2));var te=new e.NeonMesh(new THREE.TextGeometry(ee,s),new THREE.MeshBasicMaterial({color:16711680}));var re=te.geometry.center();te.position.set(n,c+7/3*d+d+re.x,r+1/3*d+a/2+.5);if(Math.abs(t-3.1415926/2)<.001){te.rotateX(-3.1415926/2);te.rotateY(3.1415926/2);te.rotateZ(3.1415926)}else{te.rotateX(3.1415926/2);te.rotateY(3.1415926*3/2)}o.add(Y);o.add(X);o.add(J);o.add($);o.add(te)}}var h=[];if(e.enableCLevel==true){this.levels.forEach(function(e){if(e.c!=null)h.push(e.c.location)})}else if(e.enableBLevel==true){this.levels.forEach(function(e){if(e.b!=null)h.push(e.b.location)})}var p=new THREE.LineBasicMaterial({color:16711680,linewidth:5});for(var g=0;g<h.length;++g){m(h[g])}};a.prototype.initAxisNets=function(t,r){var n=1e-4;var o=Math.abs;var a=new e.Vector3;var i=new e.Vector3;var s=new e.Vector3;this.axisNets=null;this.axisNets=new Map;var l=new Set;for(var c=0,u=t.length;c<u;++c){var f=t[c];if(f.type==0){var d=0;a.set(f.data[0],f.data[1],f.data[2]).applyMatrix4(r);i.set(f.data[3],f.data[4],f.data[5]).applyMatrix4(r);if(f.data.length==7)d=new Int32Array(f.data)[6];var v=this.axisNets.get(d);if(v==undefined)v=[];var m=void 0;if(o(a.x-i.x)<n)m=e.AXISMODE.XMODE;else if(o(a.y-i.y)<n)m=e.AXISMODE.YMODE;if(!l.has(f.name)){v.push({name:f.name,mode:m,startPoint:(new e.Vector3).copy(a),endPoint:(new e.Vector3).copy(i),centerPoint:undefined});l.add(f.name)}this.axisNets.set(d,v)}else if(f.Guid){var d=0;a.set(f.ReAxiss[0].Data[0],f.ReAxiss[0].Data[1],f.ReAxiss[0].Data[2]).multiplyScalar(1/1e3*e.meter2foot);i.set(f.ReAxiss[0].Data[3],f.ReAxiss[0].Data[4],f.ReAxiss[0].Data[5]).multiplyScalar(1/1e3*e.meter2foot);var v=this.axisNets.get(d);if(v==undefined)v=[];var m=void 0;if(o(a.x-i.x)<n)m=e.AXISMODE.XMODE;else if(o(a.y-i.y)<n)m=e.AXISMODE.YMODE;if(!l.has(f.Name)){v.push({name:f.Name,mode:m,startPoint:(new e.Vector3).copy(a),endPoint:(new e.Vector3).copy(i),centerPoint:undefined});l.add(f.Name)}this.axisNets.set(d,v)}}e.logger.debug("axisNets",this.axisNets)};a.prototype.hideFromGuid=function(e){for(var t=0,r=e.length;t<r;++t){var n=new Array;var o=this.fragSet.getCount();for(var a=0;a<o;++a){var i=this.fragSet.getUUID(a);if(i==e[a])n.push(a)}this.fragSet.setState(n,1)}};a.prototype.getFragmentSet=function(){return this.fragSet};a.prototype.getIterator=function(){return this.iterator};return a}(d);e.RenderModel=v})(Neon||(Neon={}));var Neon;(function(e){function t(e,t){return new r(e,t)}e.createCamera=t;var r=function(t){__extends(r,t);function r(r,n){var o=t.call(this)||this;o.fov=50;o.near=.1;o.far=5e4;o.aspect=r/n;o.left=-r/2;o.right=r/2;o.top=n/2;o.bottom=-n/2;o.clientHeight=n;o.clientWidth=r;o.target=new e.Vector3(0,0,-1);o.worldUp=new e.Vector3(0,1,0);o.pCamera=new e.PerspectiveCamera(o.fov,o.aspect,o.near,o.far);o.oCamera=new e.OrthographicCamera(o.left,o.right,o.top,o.bottom,o.near,o.far);o.zoom=1;o.toPerspective();o.isPerspectiveCamera=true;o.isOrthographicCamera=false;return o}r.prototype.from=function(e){this.up.set(e.up.x,e.up.y,e.up.z);this.setFov(e.fov);if(e.isPerspective)this.toPerspective();else this.toOrthographic()};r.prototype.__computeFovPosition=function(t){if(Math.abs(this.fov-t)<=1e-5)return this.position.clone();var r=this.target.clone().sub(this.position);var n=e._Math.degToRad(this.fov);var o=e._Math.degToRad(t);var a=r.length()*Math.tan(n*.5)/Math.tan(o*.5);var i=r.normalize().multiplyScalar(-a);return this.target.clone().add(i)};r.prototype.toPerspective=function(){if(!this.isPerspective&&this.cacheFov){this.position.copy(this.__computeFovPosition(this.cacheFov));this.fov=this.cacheFov}this.pCamera.aspect=this.aspect;this.pCamera.near=this.near;this.pCamera.far=this.far;this.pCamera.fov=this.fov/this.zoom;this.pCamera.updateProjectionMatrix();this.projectionMatrix=this.pCamera.projectionMatrix;this.isPerspective=true;this.isPerspectiveCamera=true;this.isOrthographicCamera=false};r.prototype.toOrthographic=function(){if(!this.isPerspective){this.cacheFov=this.fov;var e=r.ORTHO_FOV;this.position.copy(this.__computeFovPosition(e));this.fov=e}this.orthoScale=this.target.clone().sub(this.position).length();var t=this.orthoScale*.5;var n=t*this.aspect;this.left=this.oCamera.left=-n;this.right=this.oCamera.right=n;this.top=this.oCamera.top=t;this.bottom=this.oCamera.bottom=-t;this.oCamera.near=this.near;this.oCamera.far=this.far;this.oCamera.updateProjectionMatrix();this.projectionMatrix=this.oCamera.projectionMatrix;this.isPerspective=false;this.isOrthographicCamera=true;this.isPerspectiveCamera=false};r.prototype.updateProjectionMatrix=function(){this.isPerspective?this.toPerspective():this.toOrthographic()};r.prototype.setSize=function(e,t){this.pCamera.aspect=e/t;this.left=-e/2;this.right=e/2;this.top=t/2;this.bottom=-t/2;this.updateProjectionMatrix()};r.prototype.setFov=function(e){this.fov=e;this.updateProjectionMatrix()};r.prototype.setLens=function(t,r){if(r===undefined)r=24;var n=2*e._Math.radToDeg(Math.atan(r/(t*2)));this.setFov(n);return n};r.prototype.clone=function(){var e=new r(this.right*2,this.top*2);e.copy(this);e.position.copy(this.position);e.up.copy(this.up);e.target.copy(this.target);e.worldUp.copy(this.worldUp);if(this.worldUpMatrix)e.worldUpMatrix=this.worldUpMatrix.clone();e.left=this.left;e.right=this.right;e.top=this.top;e.bottom=this.bottom;e.near=this.near;e.far=this.far;e.fov=this.fov;e.aspect=this.aspect;e.zoom=this.zoom;e.isPerspective=this.isPerspective;this.updateProjectionMatrix();return e};r.ORTHO_FOV=2*Math.atan(.5)*180/Math.PI;return r}(e.Camera)})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(){this.colorArray=e.UniformsLib.common.colorArray.value;this.index=0;this.colorMap=new Map;this.colorIndexes=new Map;this.indexPool=new e.Queue;for(var t=0;t<25;++t){this.indexPool.push(t)}this.blueIndex=this.createHighLightColor(98,.3);this.greenIndex=this.createHighLightColor(25088,.3);this.redIndex=this.createHighLightColor(6422528,.3);this.yellowIndex=this.createHighLightColor(6447616,.3);this.setColorArray(19,new THREE.Color(10526880),1)}t.prototype.createHighLightColor=function(e,t){if(!this.colorMap.has(e+t)){var r=this.indexPool.shift();if(r===null){console.error("Color Pool has empty!");return null}this.setColorArray(r,new THREE.Color(e),t);this.colorMap.set(e+t,r);this.colorIndexes.set(r,e);return r}else{return this.colorMap.get(e+t)}};t.prototype.deleteHighLightColor=function(e){if(this.colorIndexes.has(e)){this.colorMap.delete(this.colorIndexes.get(e));this.colorIndexes.delete(e);this.setColorArray(e,new THREE.Color(0),0);this.indexPool.push(e)}};t.prototype.setColorArray=function(e,t,r){if(e<20){var n=e*4;this.colorArray[n+0]=t.r;this.colorArray[n+1]=t.g;this.colorArray[n+2]=t.b;if(r)this.colorArray[n+3]=r;else this.colorArray[n+3]=1}};t.prototype.setHighLightColor=function(e,t,r){this.setColorArray(e,new THREE.Color(t),r)};return t}();e.HighLightColorManager=t;e._highLightCM=new t})(Neon||(Neon={}));var Neon;(function(e){function t(e){return new r(e)}e.createRender=t;var r=function(){function t(t){t=t||{};var r=t.canvas!==undefined?t.canvas:document.createElement("canvas");var x=t.context!==undefined?t.context:null;var A=t.alpha!==undefined?t.alpha:false;var b=t.depth!==undefined?t.depth:true;var E=t.stencil!==undefined?t.stencil:true;var w=t.antialias!==undefined?t.antialias:true;var M=t.premultipliedAlpha!==undefined?t.premultipliedAlpha:true;var C=t.preserveDrawingBuffer!==undefined?t.preserveDrawingBuffer:true;var S=false;var R=[];var B=[];var T=-1;var P=[];var D=-1;var I=new Float32Array(8);var k=[];var N=[];this.domElement=r;this.context=null;this.autoClear=true;this.autoClearColor=true;this.autoClearDepth=true;this.autoClearStencil=true;this.sortObjects=true;this.clippingPlanes=[];this.localClippingEnabled=false;this.gammaFactor=2;this.gammaInput=false;this.gammaOutput=false;this.physicallyCorrectLights=false;this.toneMapping=1;this.toneMappingExposure=1;this.toneMappingWhitePoint=1;this.maxMorphTargets=8;this.maxMorphNormals=4;var U=this;var _=null;var q=null;var H=null;var L=-1;var F="";var O=null;var z=new e.Vector4;var V=null;var j=new e.Vector4;var G=new e.Sphere;var W=0;var Y=new e.Color(16777215);var Q=0;var X=r.width;var K=r.height;var J=1;var Z=new e.Vector4(0,0,X,K);var $=false;var ee=new e.Vector4(0,0,X,K);var te=new e.Frustum;this.getFrustum=function(){return te};var re=new THREE.WebGLClipping;var ne=false;var oe=false;var ae=new e.Matrix4;var ie=new e.Vector3;var se=new e.Matrix4;var le=new e.Matrix4;var ce={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]};var ue={calls:0,vertices:0,faces:0,points:0};this.info={render:ue,memory:{geometries:0,textures:0},programs:null};var fe;try{var de={alpha:A,depth:b,stencil:E,antialias:w,premultipliedAlpha:M,preserveDrawingBuffer:C};if(x){fe=x}else{fe=r.getContext("webgl2",de)||r.getContext("experimental-webgl2",de);if(!fe){fe=r.getContext("webgl",de)||r.getContext("experimental-webgl",de);e.logger.debug("浏览器支持webgl1.0")}else{e.logger.debug("浏览器支持webgl2.0");S=true}}if(fe===null){if(r.getContext("webgl")!==null||r.getContext("webgl2")){throw"Error creating WebGL context whit your selected attributes."}else{throw"Error create WebGL context."}}if(fe.getShaderPrecisionFormat===undefined){fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}}r.addEventListener("webglcontextlost",Ue,false)}catch(t){e.logger.error("Create WebGLRenderer Error:"+t)}var ve=new e.WebGLExtensions(fe);if(!S){ve.get("WEBGL_depth_texture");ve.get("OES_texture_float");ve.get("OES_texture_float_linear");ve.get("OES_texture_half_float");ve.get("OES_texture_half_float_linear");ve.get("OES_standard_derivatives");ve.get("ANGLE_instanced_arrays");if(ve.get("OES_element_index_uint")){e.BufferGeometry.MaxIndex=4294967296}}else{ve.get("EXT_color_buffer_float");ve.get("EXT_disjoint_timer_query_webgl2");ve.get("EXT_texture_filter_anisotropic");ve.get("OES_texture_float_linear");ve.get("WEBGL_compressed_texture_s3tc");ve.get("WEBGL_compressed_texture_s3tc_srgb");ve.get("WEBGL_debug_renderer_info");ve.get("WEBGL_debug_shaders")}var me=new e.WebGLCapabilities(fe,ve,t);var he=new e.WebGLState(fe,ve,Le);var pe=new e.WebGLProperties;var ge=new e.WebGLTextures(fe,ve,he,pe,me,Le,this.info);var ye=new e.WebGLObjects(fe,pe,this.info);var xe=new THREE.WebGLGeometries(fe,pe,this.info);var Ae=new e.WebGLPrograms(this,me);var be=new e.WebGLLights;this.info.programs=Ae.programs;var Ee=new e.WebGLBufferRenderer(fe,ve,ue);var we=new e.WebGLIndexedBufferRenderer(fe,ve,ue);var Me=new e.OrthographicCamera(-1,1,1,-1,0,1);var Ce=new e.PerspectiveCamera;var Se=new e.Mesh(new e.PlaneBufferGeometry(2,2),new e.MeshBasicMaterial({depthTest:false,depthWrite:false,fog:false}));var Re=e.ShaderLib["cube"];var Be=new e.Mesh(new e.BoxBufferGeometry(5,5,5),new e.ShaderMaterial({uniforms:Re.uniforms,vertexShader:Re.vertexShader,fragmentShader:Re.fragmentShader,side:1,depthTest:false,depthWrite:false,fog:false}));function Te(){return q===null?J:1}function Pe(){he.init();he.scissor(z.copy(Z).multiplyScalar(J));he.viewport(j.copy(ee).multiplyScalar(J));he.buffers.color.setClear(Y.r,Y.g,Y.b,Q,M)}function De(){_=null;O=null;F="";L=-1;he.reset()}Pe();this.context=fe;this.capabilities=me;this.extensions=ve;this.properties=pe;this.state=he;var Ie=new e.WebGLShadowMap(this,ce,ye,me);this.shadowMap=Ie;var ke=new e.SpritePlugin(this,k);var Ne=new e.LensFlarePlugin(this,N);this.getContext=function(){return fe};this.getContextAttributes=function(){return fe.getContextAttributes()};this.forceContextLoss=function(){ve.get("WEBGL_lose_context").loseContext()};this.getMaxAnisotropy=function(){return me.getMaxAnisotropy()};this.getPrecision=function(){return me.precision};this.getPixelRatio=function(){return J};this.setPixelRatio=function(e){if(e===undefined)return;J=e;this.setSize(ee.z,ee.w,false)};this.getSize=function(){return{width:X,height:K}};this.setSize=function(e,t,n){X=e;K=t;r.width=e*J;r.height=t*J;if(n!==false){r.style.width=e+"px";r.style.height=t+"px"}this.setViewport(0,0,e,t)};this.setViewport=function(e,t,r,n){he.viewport(ee.set(e,t,r,n))};this.setScissor=function(e,t,r,n){he.scissor(Z.set(e,t,r,n))};this.setScissorTest=function(e){he.setScissorTest($=e)};this.getClearColor=function(){return Y};this.setClearColor=function(e,t){Y.set(e);Q=t!==undefined?t:1;he.buffers.color.setClear(Y.r,Y.g,Y.b,Q,M)};this.getClearAlpha=function(){return Q};this.setClearAlpha=function(e){Q=e;he.buffers.color.setClear(Y.r,Y.g,Y.b,Q,M)};this.clear=function(e,t,r){var n=0;if(e===undefined||e)n|=fe.COLOR_BUFFER_BIT;if(t===undefined||t)n|=fe.DEPTH_BUFFER_BIT;if(r===undefined||r)n|=fe.STENCIL_BUFFER_BIT;fe.clear(n)};this.clearColor=function(){this.clear(true,false,false)};this.clearDepth=function(){this.clear(false,true,false)};this.clearStencil=function(){this.clear(false,false,true)};this.clearTarget=function(e,t,r,n){this.setRenderTarget(e);this.clear(t,r,n)};this.resetGLState=De;this.dispose=function(){P=[];D=-1;B=[];T=-1;r.removeEventListener("webglcontextlost",Ue,false)};function Ue(e){e.preventDefault();De();Pe();pe.clear()}function _e(e){var t=e.target;t.removeEventListener("dispose",_e);qe(t)}function qe(e){He(e);pe.delete(e)}function He(e){var t=pe.get(e).program;e.program=undefined;if(t!==undefined){Ae.releaseProgram(t)}}function Le(e){return y(e,ve,fe)}function Fe(e){var t=e.geometry;if(t.boundingSphere===null)t.computeBoundingSphere();G.copy(t.boundingSphere).applyMatrix4(e.matrixWorld);return ze(G)}function Oe(e){G.center.set(0,0,0);G.radius=.7071067811865476;G.applyMatrix4(e.matrixWorld);return ze(G)}function ze(e){if(!te.intersectsSphere(e))return false;var t=re.numPlanes;if(t===0)return true;var r=U.clippingPlanes,n=e.center,o=-e.radius,a=0;do{if(r[a].distanceToPoint(n)<o)return false}while(++a!==t);return true}function Ve(t,r){var n;var o;var a;var i=0;var s=0;var l=0;var c;var u;var f;var d;var v=r.matrixWorldInverse;var m=0;var h=0;var p=0;var g=0;var y=0;for(n=0,o=t.length;n<o;n++){a=t[n];c=a.color;u=a.intensity;f=a.distance;d=a.shadow&&a.shadow.map?a.shadow.map.texture:null;if(a.isAmbientLight){i+=c.r*u;s+=c.g*u;l+=c.b*u}else if(a.isDirectionalLight){var x=be.get(a);x.color.copy(a.color).multiplyScalar(a.intensity);x.direction.setFromMatrixPosition(a.matrixWorld);ie.setFromMatrixPosition(a.target.matrixWorld);x.direction.sub(ie);x.direction.transformDirection(v);x.shadow=a.castShadow;if(a.castShadow){x.shadowBias=a.shadow.bias;x.shadowRadius=a.shadow.radius;x.shadowMapSize=a.shadow.mapSize}ce.directionalShadowMap[m]=d;ce.directionalShadowMatrix[m]=a.shadow.matrix;ce.directional[m++]=x}else if(a.isSpotLight){var x=be.get(a);x.position.setFromMatrixPosition(a.matrixWorld);x.position.applyMatrix4(v);x.color.copy(c).multiplyScalar(u);x.distance=f;x.direction.setFromMatrixPosition(a.matrixWorld);ie.setFromMatrixPosition(a.target.matrixWorld);x.direction.sub(ie);x.direction.transformDirection(v);x.coneCos=Math.cos(a.angle);x.penumbraCos=Math.cos(a.angle*(1-a.penumbra));x.decay=a.distance===0?0:a.decay;x.shadow=a.castShadow;if(a.castShadow){x.shadowBias=a.shadow.bias;x.shadowRadius=a.shadow.radius;x.shadowMapSize=a.shadow.mapSize}ce.spotShadowMap[p]=d;ce.spotShadowMatrix[p]=a.shadow.matrix;ce.spot[p++]=x}else if(a.isRectAreaLight){var x=be.get(a);x.color.copy(c).multiplyScalar(u/(a.width*a.height));x.position.setFromMatrixPosition(a.matrixWorld);x.position.applyMatrix4(v);le.identity();se.copy(a.matrixWorld);se.premultiply(v);le.extractRotation(se);x.halfWidth.set(a.width*.5,0,0);x.halfHeight.set(0,a.height*.5,0);x.halfWidth.applyMatrix4(le);x.halfHeight.applyMatrix4(le);ce.rectArea[g++]=x}else if(a.isPointLight){var x=be.get(a);x.position.setFromMatrixPosition(a.matrixWorld);x.position.applyMatrix4(v);x.color.copy(a.color).multiplyScalar(a.intensity);x.distance=a.distance;x.decay=a.distance===0?0:a.decay;x.shadow=a.castShadow;if(a.castShadow){x.shadowBias=a.shadow.bias;x.shadowRadius=a.shadow.radius;x.shadowMapSize=a.shadow.mapSize}ce.pointShadowMap[h]=d;if(ce.pointShadowMatrix[h]===undefined){ce.pointShadowMatrix[h]=new e.Matrix4}ie.setFromMatrixPosition(a.matrixWorld).negate();ce.pointShadowMatrix[h].identity().setPosition(ie);ce.point[h++]=x}else if(a.isHemisphereLight){var x=be.get(a);x.direction.setFromMatrixPosition(a.matrixWorld);x.direction.transformDirection(v);x.direction.normalize();x.skyColor.copy(a.color).multiplyScalar(u);x.groundColor.copy(a.groundColor).multiplyScalar(u);ce.hemi[y++]=x}}ce.ambient[0]=i;ce.ambient[1]=s;ce.ambient[2]=l;ce.directional.length=m;ce.spot.length=p;ce.rectArea.length=g;ce.point.length=h;ce.hemi.length=y;ce.hash=m+","+h+","+p+","+g+","+y+","+ce.shadows.length}function je(e){var t=0;for(var r=0,n=e.length;r<n;r++){var o=e[r];if(o.castShadow){ce.shadows[t++]=o}}ce.shadows.length=t}function Ge(e){e.side===2?he.disable(fe.CULL_FACE):he.enable(fe.CULL_FACE);he.setFlipSided(e.side===1);e.transparent===true?he.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):he.setBlending(0);he.setDepthFunc(e.depthFunc);he.setDepthTest(e.depthTest);he.setDepthWrite(e.depthWrite);he.setColorWrite(e.colorWrite);he.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function We(t,r,n){var o=pe.get(t);var a=Ae.getParameters(t,ce,r,re.numPlanes,re.numIntersection,n);if(S)a["isWebgl2"]=true;var i=Ae.getProgramCode(t,a);var s=o.program;var l=true;if(s===undefined){t.addEventListener("dispose",_e)}else if(s.code!==i){He(t)}else if(a.shaderID!==undefined){return}else{l=false}if(l){if(a.shaderID){var c=e.ShaderLib[a.shaderID];o.__webglShader={name:t.type,uniforms:e.UniformsUtils.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else{o.__webglShader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}}t.__webglShader=o.__webglShader;s=Ae.acquireProgram(t,a,i);o.program=s;t.program=s}var u=s.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var f=0;f<U.maxMorphTargets;f++){if(u["morphTarget"+f]>=0){t.numSupportedMorphTargets++}}}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var f=0;f<U.maxMorphNormals;f++){if(u["morphNormal"+f]>=0){t.numSupportedMorphNormals++}}}var d=o.__webglShader.uniforms;if(!t.isShaderMaterial&&!t.isRawShaderMaterial||t.clipping===true){o.numClippingPlanes=re.numPlanes;o.numIntersection=re.numIntersection;d.clippingPlanes=re.uniform}o.fog=r;o.lightsHash=ce.hash;if(t.lights){d.ambientLightColor.value=ce.ambient;d.directionalLights.value=ce.directional;d.spotLights.value=ce.spot;d.pointLights.value=ce.point;d.hemisphereLights.value=ce.hemi;d.directionalShadowMap.value=ce.directionalShadowMap;d.directionalShadowMatrix.value=ce.directionalShadowMatrix;d.spotShadowMap.value=ce.spotShadowMap;d.spotShadowMatrix.value=ce.spotShadowMatrix;d.pointShadowMap.value=ce.pointShadowMap;d.pointShadowMatrix.value=ce.pointShadowMatrix}var v=o.program.getUniforms(),m=e.WebGLUniforms.seqWithValue(v.seq,d);o.uniformsList=m}function Ye(e,t,r,n,o){var a,i;if(r.transparent){a=P;i=++D}else{a=B;i=++T}var s=a[i];if(s!==undefined){s.id=e.id;s.object=e;s.geometry=t;s.material=r;s.z=ie.z;s.group=o}else{s={id:e.id,object:e,geometry:t,material:r,z:ie.z,group:o};a.push(s)}}function Qe(t,r){if(t.visible===false)return;var n=(t.layers.mask&r.layers.mask)!==0;if(n){if(t.isLight){R.push(t)}else if(t.isSprite){if(t.frustumCulled===false||Oe(t)===true){k.push(t)}}else if(t.isLensFlare){N.push(t)}else if(t.isImmediateRenderObject){if(U.sortObjects===true){ie.setFromMatrixPosition(t.matrixWorld);ie.applyProjection(ae)}Ye(t,null,t.material,ie.z,null)}else if(t.isMesh||t.isLine||t.isPoints){if(t.isSkinnedMesh){t.skeleton.update()}if(t.frustumCulled===false||Fe(t)===true||t instanceof e.SelfAdaptionObject){var o=t.material;if(o.visible===true){if(U.sortObjects===true){ie.setFromMatrixPosition(t.matrixWorld);ie.applyProjection(ae)}var a=ye.update(t);if(o.isMultiMaterial){var i=a.groups;var s=o.materials;for(var l=0,c=i.length;l<c;l++){var u=i[l];var f=s[u.materialIndex];if(f.visible===true){Ye(t,a,f,ie.z,u)}}}else{Ye(t,a,o,ie.z,null)}}}}}var d=t.children;for(var l=0,c=d.length;l<c;l++){Qe(d[l],r)}}function Xe(t,r,n,o){var a=function(a,i){var s=t[a];var l=s.object;if(l instanceof e.SelfAdaptionObject)l.adaptionMethod(n);var c=s.geometry;var u=o===undefined?s.material:o;var f=s.group;l.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,l.matrixWorld);l.normalMatrix.getNormalMatrix(l.modelViewMatrix);l.onBeforeRender(U,r,n,c,u,f);if(l.isImmediateRenderObject){Ge(u);var d=Ke(n,r.fog,u,l);F="";l.render(function(e){U.renderBufferImmediate(e,d,u)})}else{lt(l);U.renderBufferDirect(n,r.fog,c,u,l,f)}l.onAfterRender(U,r,n,c,u,f)};for(var i=0,s=t.length;i<s;i++){a(i,s)}}function Ke(t,r,n,o){W=0;var a=pe.get(n);if(ne){if(oe||t!==O){var y=t===O&&n.id===L;re.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,a,y)}}if(n.needsUpdate===false){if(a.program===undefined){n.needsUpdate=true}else if(n.fog&&a.fog!==r){n.needsUpdate=true}else if(n.lights&&a.lightsHash!==ce.hash){n.needsUpdate=true}else if(a.numClippingPlanes!==undefined&&(a.numClippingPlanes!==re.numPlanes||a.numIntersection!==re.numIntersection)){n.needsUpdate=true}}if(n.needsUpdate){We(n,r,o);n.needsUpdate=false}var x=false;var A=false;var b=false;var E=a.program,w=E.getUniforms(),M=a.__webglShader.uniforms;if(E.id!==_){fe.useProgram(E.program);_=E.id;x=true;A=true;b=true}if(n.id!==L){L=n.id;A=true}if(x||t!==O){w.set(fe,t,"projectionMatrix");if(me.logarithmicDepthBuffer){w.setValue(fe,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2))}if(t!==O){O=t;A=true;b=true}if(n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var C=w.map.cameraPosition;if(C!==undefined){C.setValue(fe,ie.setFromMatrixPosition(t.matrixWorld))}}if(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning){w.setValue(fe,"viewMatrix",t.matrixWorldInverse)}w.set(fe,U,"toneMappingExposure");w.set(fe,U,"toneMappingWhitePoint")}if(n.skinning){w.setOptional(fe,o,"bindMatrix");w.setOptional(fe,o,"bindMatrixInverse");var S=o.skeleton;if(S){if(me.floatVertexTextures&&S.useVertexTexture){w.set(fe,S,"boneTexture");w.set(fe,S,"boneTextureWidth");w.set(fe,S,"boneTextureHeight")}else{w.setOptional(fe,S,"boneMatrices")}}}if(A){if(n.lights){g(M,b)}if(r&&n.fog){u(M,r)}if(n.isMeshBasicMaterial||n.isMeshLambertMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isMeshNormalMaterial||n.isMeshDepthMaterial){i(M,n)}if(n.isLineBasicMaterial){s(M,n)}else if(n.isLineDashedMaterial){s(M,n);l(M,n)}else if(n.isPointsMaterial){c(M,n,J,K)}else if(n.isMeshLambertMaterial){f(M,n)}else if(n.isMeshToonMaterial){v(M,n)}else if(n.isMeshPhongMaterial){d(M,n)}else if(n.isMeshPhysicalMaterial){h(M,n)}else if(n.isMeshStandardMaterial){m(M,n)}else if(n.isMeshDepthMaterial){if(n.displacementMap){M.displacementMap.value=n.displacementMap;M.displacementScale.value=n.displacementScale;M.displacementBias.value=n.displacementBias}}else if(n.isMeshNormalMaterial){p(M,n)}if(M.ltcMat!==undefined)M.ltcMat.value=e.UniformsLib.LTC_MAT_TEXTURE;if(M.ltcMag!==undefined)M.ltcMag.value=e.UniformsLib.LTC_MAG_TEXTURE;e.WebGLUniforms.upload(fe,a.uniformsList,M,U)}w.set(fe,o,"modelViewMatrix");w.set(fe,o,"normalMatrix");w.setValue(fe,"modelMatrix",o.matrixWorld);if(o.material){w.set(fe,n,"wireframe")}return E}function Je(t,r,n,o){var a;if(n&&n.isInstancedBufferGeometry&&!S){a=ve.get("ANGLE_instanced_arrays");if(a===null){e.logger.error("WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}}if(o===undefined)o=0;he.initAttributes();var i=n.attributes;var s=r.getAttributes();var l=t.defaultAttributeValues;for(var c in s){var u=s[c];if(u>=0){var f=i[c];if(f!==undefined){var d=f.normalized;var v=f.itemSize;var m=ye.getAttributeProperties(f);var h=m.__webglBuffer;var p=m.type;var g=m.bytesPerElement;if(f.isInterleavedBufferAttribute){var y=f.data;var x=y.stride;var A=f.offset;if(y&&y.isInstancedInterleavedBuffer){he.enableAttributeAndDivisor(u,y.meshPerAttribute,a);if(n.maxInstancedCount===undefined){n.maxInstancedCount=y.meshPerAttribute*y.count}}else{he.enableAttribute(u)}fe.bindBuffer(fe.ARRAY_BUFFER,h);fe.vertexAttribPointer(u,v,p,d,x*g,(o*x+A)*g)}else{if(f.isInstancedBufferAttribute){he.enableAttributeAndDivisor(u,f.meshPerAttribute,a);if(n.maxInstancedCount===undefined){n.maxInstancedCount=f.meshPerAttribute*f.count}}else{he.enableAttribute(u)}fe.bindBuffer(fe.ARRAY_BUFFER,h);fe.vertexAttribPointer(u,v,p,d,0,o*v*g)}}else if(l!==undefined){var b=l[c];if(b!==undefined){switch(b.length){case 2:fe.vertexAttrib2fv(u,b);break;case 3:fe.vertexAttrib3fv(u,b);break;case 4:fe.vertexAttrib4fv(u,b);break;default:fe.vertexAttrib1fv(u,b)}}}}}he.disableUnusedAttributes()}this.allocTextureUnit=function(){var t=W;if(t>=me.maxTextures){e.logger.warn("WebGLRenderer: trying to use "+t+" texture units while this GPU supports only "+me.maxTextures)}W+=1;return t};this.setTexture=function(e,t){ge.setTexture2D(e,t)};this.setTexture2D=function(e,t){ge.setTexture2D(e,t)};this.setTextureCube=function(e,t){if(e&&e.isCubeTexture||Array.isArray(e.image)&&e.image.length===6){ge.setTextureCube(e,t)}else{ge.setTextureCubeDynamic(e,t)}};this.getCurrentRenderTarget=function(){return q};this.setRenderTarget=function(e){q=e;if(e&&pe.get(e).__webglFramebuffer===undefined){ge.setupRenderTarget(e)}var t=e&&e.isWebGLRenderTargetCube;var r;if(e){var n=pe.get(e);if(t){r=n.__webglFramebuffer[e.activeCubeFace]}else{r=n.__webglFramebuffer}z.copy(e.scissor);V=e.scissorTest;j.copy(e.viewport)}else{r=null;z.copy(Z).multiplyScalar(J);V=$;j.copy(ee).multiplyScalar(J)}if(H!==r){fe.bindFramebuffer(fe.FRAMEBUFFER,r);H=r}he.scissor(z);he.setScissorTest(V);he.viewport(j);if(t){var o=pe.get(e.texture);fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,o.__webglTexture,e.activeMipMapLevel)}};this.setFaceCulling=function(e,t){he.setCullFace(e);he.setFlipSided(t===0)};this.readRenderTargetPixels=function(t,r,n,o,a,i){if((t&&t.isWebGLRenderTarget)===false){e.logger.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}var s=pe.get(t).__webglFramebuffer;if(s){var l=false;if(s!==H){fe.bindFramebuffer(fe.FRAMEBUFFER,s);l=true}try{var c=t.texture;var u=c.format;var f=c.type;if(u!==1023&&Le(u)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_FORMAT)){e.logger.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(f!==1009&&Le(f)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_TYPE)&&!(f===1016&&ve.get("EXT_color_buffer_half_float"))){e.logger.error("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}if(fe.checkFramebufferStatus(fe.FRAMEBUFFER)===fe.FRAMEBUFFER_COMPLETE){if(r>=0&&r<=t.width-o&&(n>=0&&n<=t.height-a)){fe.readPixels(r,n,o,a,Le(u),Le(f),i)}}else{e.logger.error("WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}}finally{if(l){fe.bindFramebuffer(fe.FRAMEBUFFER,H)}}}};this.render=function(t,r,n,i,s){if(r!==undefined&&r.isCamera!==true){e.logger.error("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}F="";L=-1;O=null;if(t.autoUpdate===true)t.updateMatrixWorld();if(r.parent===null)r.updateMatrixWorld();r.matrixWorldInverse.getInverse(r.matrixWorld);ae.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse);te.setFromMatrix(ae);R.length=0;k.length=0;N.length=0;oe=this.localClippingEnabled;ne=re.init(this.clippingPlanes,oe,r);var l=t.classType===8455969;if(!l){T=-1;D=-1;Qe(t,r);B.length=T+1;P.length=D+1;if(U.sortObjects===true){B.sort(o);P.sort(a)}}if(s&&s.length>0){R=s.slice()}if(ne)re.beginShadows();je(R);Ie.render(t,r);Ve(R,r);if(ne)re.endShadows();ue.calls=0;ue.vertices=0;ue.faces=0;ue.points=0;if(n===undefined){n=null}this.setRenderTarget(n);if(t.overrideMaterial){var c=t.overrideMaterial;if(!l){Xe(B,t,r,c);Xe(P,t,r,c)}else{at(t,r,c)}}else{if(!l){he.setBlending(0);Xe(B,t,r);Xe(P,t,r)}else{at(t,r,null)}}ke.render(t,r);Ne.render(t,r,j);if(n){ge.updateRenderTargetMipmap(n)}he.setDepthTest(true);he.setDepthWrite(true);he.setColorWrite(true)};var Ze=fe.createBuffer();var $e=fe.createBuffer()
;var et=fe.createBuffer();var tt=fe.createBuffer();this.renderBufferImmediate=function(e,t,r){he.initAttributes();var n=pe.get(e);if(e.hasPositions&&!n.position)n.position=Ze;if(e.hasNormals&&!n.normal)n.normal=$e;if(e.hasUvs&&!n.uv)n.uv=et;if(e.hasColors&&!n.color)n.color=tt;var o=t.getAttributes();if(e.hasPositions){fe.bindBuffer(fe.ARRAY_BUFFER,n.position);fe.bufferData(fe.ARRAY_BUFFER,e.positionArray,fe.DYNAMIC_DRAW);he.enableAttribute(o.position);fe.vertexAttribPointer(o.position,3,fe.FLOAT,false,0,0)}if(e.hasNormals){fe.bindBuffer(fe.ARRAY_BUFFER,n.normal);if(!r.isMeshPhongMaterial&&!r.isMeshStandardMaterial&&!r.isMeshNormalMaterial&&r.shading===1){for(var a=0,i=e.count*3;a<i;a+=9){var s=e.normalArray;var l=(s[a+0]+s[a+3]+s[a+6])/3;var c=(s[a+1]+s[a+4]+s[a+7])/3;var u=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=l;s[a+1]=c;s[a+2]=u;s[a+3]=l;s[a+4]=c;s[a+5]=u;s[a+6]=l;s[a+7]=c;s[a+8]=u}}fe.bufferData(fe.ARRAY_BUFFER,e.normalArray,fe.DYNAMIC_DRAW);he.enableAttribute(o.normal);fe.vertexAttribPointer(o.normal,3,fe.FLOAT,false,0,0)}if(e.hasUvs&&r.map){fe.bindBuffer(fe.ARRAY_BUFFER,n.uv);fe.bufferData(fe.ARRAY_BUFFER,e.uvArray,fe.DYNAMIC_DRAW);he.enableAttribute(o.uv);fe.vertexAttribPointer(o.uv,2,fe.FLOAT,false,0,0)}if(e.hasColors&&r.vertexColors!==0){fe.bindBuffer(fe.ARRAY_BUFFER,n.color);fe.bufferData(fe.ARRAY_BUFFER,e.colorArray,fe.DYNAMIC_DRAW);he.enableAttribute(o.color);fe.vertexAttribPointer(o.color,3,fe.FLOAT,false,0,0)}he.disableUnusedAttributes();fe.drawArrays(fe.TRIANGLES,0,e.count);e.count=0};var rt=new Map;this.renderBufferDirect=function(e,t,r,o,a,i){Ge(o);var s=Ke(e,t,o,a);var l=false;var c=r.id+"_"+s.id+"_"+o.wireframe;if(c!==F){F=c;l=true}var u=a.morphTargetInfluences;if(u!==undefined){var f=[];for(var d=0,v=u.length;d<v;d++){var m=u[d];f.push([m,d])}f.sort(n);if(f.length>8){f.length=8}var h=r.morphAttributes;for(var d=0,v=f.length;d<v;d++){var m=f[d];I[d]=m[0];if(m[0]!==0){var p=m[1];if(o.morphTargets===true&&h.position)r.addAttribute("morphTarget"+d,h.position[p]);if(o.morphNormals===true&&h.normal)r.addAttribute("morphNormal"+d,h.normal[p])}else{if(o.morphTargets===true)r.removeAttribute("morphTarget"+d);if(o.morphNormals===true)r.removeAttribute("morphNormal"+d)}}for(var d=f.length,g=I.length;d<g;d++){I[d]=0}s.getUniforms().setValue(fe,"morphTargetInfluences",I);l=true}var y=r.index||r.indices||null;var x=r.attributes.position;var A=1;if(o.wireframe===true){y=yt(r);A=2}var b;if(y!==null){b=we;b.setIndex(y)}else{b=Ee}var E=true;var w=rt.get(r.id);if(w){fe.bindVertexArray(w);E=false}else if(S){w=fe.createVertexArray();fe.bindVertexArray(w);rt.set(r.id,w)}if(l&&E){Je(o,s,r)}if(y!==null){fe.bindBuffer(fe.ELEMENT_ARRAY_BUFFER,ye.getAttributeBuffer(y))}var M=r.attributes?r.attributes.state:null;if(M)ht(M,fe.ARRAY_BUFFER,"state");var C=0;if(y!==null){C=y.count}else if(x!==undefined){C=x.count}var R=r.drawRange.start*A;var B=r.drawRange.count*A;var T=i!==null?i.start*A:0;var P=i!==null?i.count*A:Infinity;var D=Math.max(R,T);var k=Math.min(C,R+B,T+P)-1;var N=Math.max(0,k-D+1);if(N===0)return;if(a.isMesh){if(o.wireframe===true){he.setLineWidth(o.wireframeLinewidth*Te());b.setMode(fe.LINES)}else{switch(a.drawMode){case 0:b.setMode(fe.TRIANGLES);break;case 1:b.setMode(fe.TRIANGLE_STRIP);break;case 2:b.setMode(fe.TRIANGLE_FAN);break}}}else if(a.isLine){var U=o.linewidth;if(U===undefined)U=1;he.setLineWidth(U*Te());if(a.isLineSegments){b.setMode(fe.LINES)}else{b.setMode(fe.LINE_STRIP)}}else if(a.isPoints){b.setMode(fe.POINTS)}if(r&&r.isInstancedBufferGeometry){if(r.maxInstancedCount>0){b.renderInstances(r,D,N)}}else{b.render(D,N)}if(w)fe.bindVertexArray(null)};var nt=null;var ot=null;function at(e,t,r){nt=t;ot=r;e.foreach(it,te,t)}function it(e,t){if(e.visible){var r=void 0;if(ot){r=ot}else{r=e.material}if(!r)return;e.modelViewMatrix.multiplyMatrices(nt.matrixWorldInverse,e.matrixWorld);e.normalMatrix.getNormalMatrix(e.modelViewMatrix);if(r.transparent&&r.opacity!==1){var n=r.side;r.side=1;st(e,r);r.side=0;st(e,r);r.side=n}else{he.setBlending(0);st(e,r)}}}function st(e,t){t.side===2?he.disable(fe.CULL_FACE):he.enable(fe.CULL_FACE);he.setFlipSided(t.side===1);lt(e);U.renderBufferDirect(nt,null,e.geometry,t,e,null)}function lt(e){xt(e,true)}var ct=e.gloableParames.MaxBufferMemorySize;var ut=fe.createBuffer();var ft=fe.createBuffer();var dt=fe.createBuffer();var vt=fe.createBuffer();var mt=false;function ht(e,t,r){var n=e.isInterleavedBufferAttribute?e.data:e;var o=pe.get(n);if(o.__webglBuffer===undefined||o.__webglBuffer==ut||o.__webglBuffer==dt||o.__webglBuffer==ft||o.__webglBuffer==vt){pt(o,n,t,r)}else if(o.version!==n.version){gt(o,n,t)}}function pt(t,r,n,o){var a;if(mt==true){if(e.gloableParames.memorySize<ct){t.__webglBuffer=fe.createBuffer();a=fe.STATIC_DRAW;e.gloableParames.memorySize+=r.array.BYTES_PER_ELEMENT*r.array.length*8}else if(n==fe.ELEMENT_ARRAY_BUFFER){t.__webglBuffer=ut;a=fe.DYNAMIC_DRAW}else{if(o==="state")t.__webglBuffer=ft;else if(o.indexOf("mvp")>=0)t.__webglBuffer=vt;else t.__webglBuffer=dt;a=fe.DYNAMIC_DRAW}}else{t.__webglBuffer=fe.createBuffer();a=r.dynamic?fe.DYNAMIC_DRAW:fe.STATIC_DRAW}fe.bindBuffer(n,t.__webglBuffer);fe.bufferData(n,r.array,a);var i=fe.FLOAT;var s=r.array;if(s instanceof Float32Array){i=fe.FLOAT}else if(s instanceof Float64Array){console.warn("Unsupported data buffer format: Float64Array")}else if(s instanceof Uint16Array){i=fe.UNSIGNED_SHORT}else if(s instanceof Int16Array){i=fe.SHORT}else if(s instanceof Uint32Array){i=fe.UNSIGNED_INT}else if(s instanceof Int32Array){i=fe.INT}else if(s instanceof Int8Array){i=fe.BYTE}else if(s instanceof Uint8Array){i=fe.UNSIGNED_BYTE}t.bytesPerElement=s.BYTES_PER_ELEMENT;t.type=i;t.version=r.version;r.onUploadCallback()}function gt(e,t,r){fe.bindBuffer(r,e.__webglBuffer);if(t.dynamic===false){fe.bufferData(r,t.array,fe.STATIC_DRAW)}else if(t.updateRange.count===-1){fe.bufferSubData(r,0,t.array)}else if(t.updateRange.count===0){console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.")}else{fe.bufferSubData(r,t.updateRange.offset*t.array.BYTES_PER_ELEMENT,t.array.subarray(t.updateRange.offset,t.updateRange.offset+t.updateRange.count));t.updateRange.count=0}e.version=t.version}function yt(t){var r=t.wireframe;if(r!==undefined){ht(r,fe.ELEMENT_ARRAY_BUFFER);return r}if(t.lineIndex){var n=t.attributes;var o=n.position;var a=o.count>65535?Uint32Array:Uint16Array;var i=new e.BufferAttribute(new a(t.lineIndex),1);t.lineIndex.length=0;ht(i,fe.ELEMENT_ARRAY_BUFFER);t.wireframe=i;return i}else{var s=[];var l=t.index;var n=t.attributes;var o=n.position;if(l!==null){var c={};var u=l.array;for(var f=0,d=u.length;f<d;f+=3){var v=u[f+0];var m=u[f+1];var h=u[f+2];s.push(v,m,m,h,h,v)}}else{var u=n.position.array;for(var f=0,d=u.length/3-1;f<d;f+=3){var v=f+0;var m=f+1;var h=f+2;s.push(v,m,m,h,h,v)}}var a=o.count>65535?Uint32Array:Uint16Array;var i=new e.BufferAttribute(new a(s),1);ht(i,fe.ELEMENT_ARRAY_BUFFER);t.wireframe=i;return i}}var xt=function(){return function(e,t){if(t!=undefined)mt=t;else mt=false;var r=xe.get(e);if(e.geometry.isGeometry){r.updateFromObject(e)}var n=r.index;var o=r.attributes;if(n!==null){ht(n,fe.ELEMENT_ARRAY_BUFFER)}for(var a in o){ht(o[a],fe.ARRAY_BUFFER,a)}var i=r.morphAttributes;for(var s in i){var l=i[s];for(var c=0,u=l.length;c<u;c++){ht(l[c],fe.ARRAY_BUFFER)}}return r}}();this.neonUpdata=lt}return t}();function n(e,t){return Math.abs(t[0])-Math.abs(e[0])}function o(e,t){if(e.object.renderOrder!==t.object.renderOrder){return e.object.renderOrder-t.object.renderOrder}else if(e.material.program&&t.material.program&&e.material.program!==t.material.program){return e.material.program.id-t.material.program.id}else if(e.material.id!==t.material.id){return e.material.id-t.material.id}else if(e.z!==t.z){return e.z-t.z}else{return e.id-t.id}}function a(e,t){if(e.object.renderOrder!==t.object.renderOrder){return e.object.renderOrder-t.object.renderOrder}if(e.z!==t.z){return t.z-e.z}else{return e.id-t.id}}function i(e,t){e.opacity.value=t.opacity;e.diffuse.value=t.color;if(t.emissive){e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity)}e.map.value=t.map;e.specularMap.value=t.specularMap;e.alphaMap.value=t.alphaMap;if(t.lightMap){e.lightMap.value=t.lightMap;e.lightMapIntensity.value=t.lightMapIntensity}if(t.aoMap){e.aoMap.value=t.aoMap;e.aoMapIntensity.value=t.aoMapIntensity}var r;if(t.map){r=t.map}else if(t.specularMap){r=t.specularMap}else if(t.displacementMap){r=t.displacementMap}else if(t.normalMap){r=t.normalMap}else if(t.bumpMap){r=t.bumpMap}else if(t.roughnessMap){r=t.roughnessMap}else if(t.metalnessMap){r=t.metalnessMap}else if(t.alphaMap){r=t.alphaMap}else if(t.emissiveMap){r=t.emissiveMap}if(r!==undefined){if(r.isWebGLRenderTarget){r=r.texture}var n=r.offset;var o=r.repeat;e.offsetRepeat.value.set(n.x,n.y,o.x,o.y)}e.envMap.value=t.envMap;if(t.hasUvMatrix==true){e.uvMatrix.value=t.uvMatrix}e.flipEnvMap.value=!(t.envMap&&t.envMap.isCubeTexture)?1:-1;e.reflectivity.value=t.reflectivity;e.refractionRatio.value=t.refractionRatio}function s(e,t){e.diffuse.value=t.color;e.opacity.value=t.opacity}function l(e,t){e.dashSize.value=t.dashSize;e.totalSize.value=t.dashSize+t.gapSize;e.scale.value=t.scale}function c(e,t,r,n){e.diffuse.value=t.color;e.opacity.value=t.opacity;e.size.value=t.size*r;e.scale.value=n*.5;e.map.value=t.map;if(t.map!==null){var o=t.map.offset;var a=t.map.repeat;e.offsetRepeat.value.set(o.x,o.y,a.x,a.y)}}function u(e,t){e.fogColor.value=t.color;if(t.isFog){e.fogNear.value=t.near;e.fogFar.value=t.far}else if(t.isFogExp2){e.fogDensity.value=t.density}}function f(e,t){if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}}function d(e,t){e.specular.value=t.specular;e.shininess.value=Math.max(t.shininess,1e-4);if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function v(e,t){d(e,t);if(t.gradientMap){e.gradientMap.value=t.gradientMap}}function m(e,t){e.roughness.value=t.roughness;e.metalness.value=t.metalness;if(t.roughnessMap){e.roughnessMap.value=t.roughnessMap}if(t.metalnessMap){e.metalnessMap.value=t.metalnessMap}if(t.emissiveMap){e.emissiveMap.value=t.emissiveMap}if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}if(t.envMap){e.envMapIntensity.value=t.envMapIntensity}}function h(e,t){e.clearCoat.value=t.clearCoat;e.clearCoatRoughness.value=t.clearCoatRoughness;m(e,t)}function p(e,t){if(t.bumpMap){e.bumpMap.value=t.bumpMap;e.bumpScale.value=t.bumpScale}if(t.normalMap){e.normalMap.value=t.normalMap;e.normalScale.value.copy(t.normalScale)}if(t.displacementMap){e.displacementMap.value=t.displacementMap;e.displacementScale.value=t.displacementScale;e.displacementBias.value=t.displacementBias}}function g(e,t){e.ambientLightColor.needsUpdate=t;e.directionalLights.needsUpdate=t;e.pointLights.needsUpdate=t;e.spotLights.needsUpdate=t;e.hemisphereLights.needsUpdate=t}function y(e,t,r){var n;if(e===1e3)return r.REPEAT;if(e===1001)return r.CLAMP_TO_EDGE;if(e===1002)return r.MIRRORED_REPEAT;if(e===1003)return r.NEAREST;if(e===1004)return r.NEAREST_MIPMAP_NEAREST;if(e===1005)return r.NEAREST_MIPMAP_LINEAR;if(e===1006)return r.LINEAR;if(e===1007)return r.LINEAR_MIPMAP_NEAREST;if(e===1008)return r.LINEAR_MIPMAP_LINEAR;if(e===1009)return r.UNSIGNED_BYTE;if(e===1017)return r.UNSIGNED_SHORT_4_4_4_4;if(e===1018)return r.UNSIGNED_SHORT_5_5_5_1;if(e===1019)return r.UNSIGNED_SHORT_5_6_5;if(e===1010)return r.BYTE;if(e===1011)return r.SHORT;if(e===1012)return r.UNSIGNED_SHORT;if(e===1013)return r.INT;if(e===1014)return r.UNSIGNED_INT;if(e===1015)return r.FLOAT;if(e===1016){n=t.get("OES_texture_half_float");if(n!==null)return n.HALF_FLOAT_OES}if(e===1021)return r.ALPHA;if(e===1022)return r.RGB;if(e===1023)return r.RGBA;if(e===1024)return r.LUMINANCE;if(e===1025)return r.LUMINANCE_ALPHA;if(e===1026)return r.DEPTH_COMPONENT;if(e===1027)return r.DEPTH_STENCIL;if(e===100)return r.FUNC_ADD;if(e===101)return r.FUNC_SUBTRACT;if(e===102)return r.FUNC_REVERSE_SUBTRACT;if(e===200)return r.ZERO;if(e===201)return r.ONE;if(e===202)return r.SRC_COLOR;if(e===203)return r.ONE_MINUS_SRC_COLOR;if(e===204)return r.SRC_ALPHA;if(e===205)return r.ONE_MINUS_SRC_ALPHA;if(e===206)return r.DST_ALPHA;if(e===207)return r.ONE_MINUS_DST_ALPHA;if(e===208)return r.DST_COLOR;if(e===209)return r.ONE_MINUS_DST_COLOR;if(e===210)return r.SRC_ALPHA_SATURATE;if(e===2001||e===2002||e===2003||e===2004){n=t.get("WEBGL_compressed_texture_s3tc");if(n!==null){if(e===2001)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===2002)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===2003)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===2004)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}}if(e===2100||e===2101||e===2102||e===2103){n=t.get("WEBGL_compressed_texture_pvrtc");if(n!==null){if(e===2100)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===2101)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===2102)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===2103)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}}if(e===2151){n=t.get("WEBGL_compressed_texture_etc1");if(n!==null)return n.COMPRESSED_RGB_ETC1_WEBGL}if(e===103||e===104){n=t.get("EXT_blend_minmax");if(n!==null){if(e===103)return n.MIN_EXT;if(e===104)return n.MAX_EXT}}if(e===1020){n=t.get("WEBGL_depth_texture");if(n!==null)return n.UNSIGNED_INT_24_8_WEBGL}return 0}})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function e(e){this.enable=false;this.scene=e}e.prototype.render=function(e,t,r){if(this.enable==true){e.render(this.scene,t,null,null,r);this.enable=false}};e.prototype.setEnable=function(e){this.enable=e};return e}();var r=function(){function e(e){var t=this;var r=e}return e}();e.RenderManger=r})(Neon||(Neon={}));var Neon;(function(e){var t=new e.Queue;t.push({test:1});t.push({qq:2});t.push({queue:3});e.logger.debug("..................................Queue test.................");e.logger.debug(t.shift());e.logger.debug(t.shift());e.logger.debug(t.shift());e.logger.debug(t.shift());e.logger.debug(t);e.logger.debug(".................................Queue test..................")})(Neon||(Neon={}));var Neon;(function(e){function t(e,t){switch(e){case"selected":{if(t!=undefined)r(t)}}}e.InitAttribute=t;function r(t){e.logger.debug("InitSelected",t)}})(Neon||(Neon={}));var Neon;(function(e){function t(){}e.loadBox=t})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(t,n,o,a,i){this._object=new THREE.Object3D;this._type=null;this._matrix=null;this.createWorker=function(){var t;var n=0;var o=0;var a=null;var i=[];var s=null;var l=null;var c=null;function u(e){var r=e.data;if(r.objectDef===2&&r.packageType===32){var u=parseInt(r.package);for(var f=0;f<r.vbo.length;++f){t.addGeometry(r.vbo[f],u+":"+f)}}if(++n==o){a.terminate();var d=new Error;var v=t.getObject();if(s!=null){s(d,v,t.getBox(),l,c)}}else{a.postMessage(i[n])}}function f(s){if(s.data["error"]){e.logger.error(s.data);return}a.removeEventListener("message",f,false);a.addEventListener("message",u,false);var l=s.data.packages;i.length=0;o=l.length;for(var c=0;c<o;++c){var d={action:1,workerId:-1,url:e.loadParamers.CURRENT_MODEL_DIRECTORY+l[c],package:l[c],packageType:32,options:{responseType:2}};i.push(d)}delete s.data.packages;delete s.data.packageType;t=new r(s.data);a.postMessage(i[n])}return function(e,t,r,n,o){s=r;l=n;c=o;if(a==null){a=new Worker(t);a.workerId=0;if(this.callback==null)this.callback=r}a.addEventListener("message",f,false);a.postMessage({action:1,url:e,package:"project.jdx",packageType:2147483648,options:{responseType:2}})}}();this._type=n;this._matrix=o;if(t!="")this.load(t,a);else e.logger.error("error, hava no this model");if(i===undefined)this._object.code=-1;else this._object.code=i}t.prototype.load=function(t,r){e.loadParamers.CURRENT_MODEL_DIRECTORY=t;var n=this;n.createWorker(t,e.loadParamers.WORKER_CACHE_URL,r,this._type,this._matrix)};return t}();e.Load=t;var r=function(){function t(t){this.box=new e.Box3;var r=this;r.fragSet=new e.FragmentSet(t,0,r,true);r.geometryMap=t.geometries;this.box.copy(t.boundingBox);this.iterator=new e.LinearIterator(this.fragSet);t=null}t.prototype.addGeometry=function(t,r){var n=this.geometryMap[r];if(e.isUndefined(n)){e.logger.warn("hash is unvalid! ["+r+"]");return}this.fragSet.addGeometry(t,n);delete this.geometryMap[r]};t.prototype.getFragSet=function(){return this.fragSet};t.prototype.getObject=function(){var t=new THREE.Object3D;this.iterator.setGeomScenes();for(var r=0;r<this.iterator.geomScenes.length;++r){var n=this.iterator.geomScenes[r].mesh.geometry;n.computeBoundingBox();n.computeBoundingSphere();t.add(new e.Mesh(n,this.iterator.geomScenes[r].mesh.material))}var o=this.box.getCenter();for(var r=0;r<t.children.length;++r){var a=t.children[r];a.position.set(-o.x,-o.y,-o.z)}this.box.setFromObject(t);return t};t.prototype.getBox=function(){return this.box};t.prototype.reset=function(){};return t}()})(Neon||(Neon={}));var Neon;(function(e){e.loadPointCloud=function(){var t=null;var r=null;var n=new THREE.Points;var o=function(){var o=document.getElementById("file");o.onchange=function(a){var i=o.files[0];e.logger.debug(i);if(t==null&&r==null){e.modelsControl.getOverlayScene().remove(n);var s=new XMLHttpRequest;var l=e.STATIC_URL+"necn.js";e.logger.debug("url",l);s.open("GET",l,true);s.withCredentials=false;s.onload=function(){var o;try{o=new Blob([s.responseText],{type:"application/javascript"})}catch(t){e.logger.error("can't get resource: [ "+l+" ]")}t=URL.createObjectURL(o);e.logger.debug("src",t);r=new Worker(t);r.addEventListener("message",function(o){var a=o.data.positions;var i=o.data.colors;e.controlService.hidenAll();var s=new THREE.BufferGeometry;s.addAttribute("position",new THREE.BufferAttribute(a,3));s.addAttribute("color",new THREE.BufferAttribute(i,3));console.log(s.boundingSphere);s.computeBoundingSphere();var l=new THREE.PointsMaterial({size:.1,vertexColors:THREE.VertexColors});n.geometry=s;n.material=l;e.modelsControl.getOverlayScene().add(n);e.coreModel[0].getIterator().reset();e.enableUp=true;var c=e.modelsControl.getMainCamera();var u=e.modelsControl.getControl();u.target.copy(s.boundingSphere.center);u.update();c.lookAt(s.boundingSphere.center);console.log(s.boundingSphere,a);r.terminate();r=null;t=null});r.postMessage(i)};s.send()}else{r.postMessage(i)}}}()}})(Neon||(Neon={}));var Neon;(function(e){e.loadFBX=function(){var e=new THREE.FBXLoader}})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(t,r){this.normal=new e.Vector3;this.w=0;this.EPSILON=1e-5;if(t&&r){this.normal.copy(t);this.w=r}}t.prototype.setFromPlan=function(t){var r=t.geometry;var n=(new e.Matrix4).compose(t.position,(new e.Quaternion).setFromEuler(t.rotation),t.scale).multiply(t.matrixWorld);var o=r.getAttribute("position").array;var a=new e.Vector3(o[0],o[1],o[2]).applyMatrix4(n);var i=new e.Vector3(o[3],o[4],o[5]).applyMatrix4(n);var s=new e.Vector3(o[6],o[7],o[8]).applyMatrix4(n);this.setFromPoints(a,i,s);return this};t.prototype.setFromPoints=function(t,r,n){var o=(new e.Vector3).copy(r).sub(t).cross((new e.Vector3).copy(n).sub(t)).normalize();this.normal.copy(o);this.w=o.dot(t)};t.prototype.clone=function(){return new t(this.normal,this.w)};t.prototype.flip=function(){this.normal.negate();this.w=-this.w};t.prototype.splitTriangle=function(t,r,n,o,i){var s=0;var l=1;var c=2;var u=3;var f=0;var d=[];for(var v=0;v<t.vertices.length;v++){var m=this.normal.dot(t.vertices[v])-this.w;var h=m<-this.EPSILON?c:m>this.EPSILON?l:s;f|=h;d.push(h)}switch(f){case s:(this.normal.dot(t.plan.normal)>0?r:n).push(t);break;case l:o.push(t);break;case c:i.push(t);break;case u:{var p=[],g=[],y=[],x=[],A=[],b=[];for(var v=0;v<t.vertices.length;++v){var E=(v+1)%t.vertices.length;var w=d[v],M=d[E];var C=t.vertices[v],S=t.vertices[E],R=t.normals[v],B=t.vertices[E],T=t.uvs[v],P=t.uvs[E];if(w!=c){p.push(C);y.push(R);A.push(T)}if(w!=l){g.push(w!=c?C.clone():C);x.push(w!=c?R.clone():R);b.push(w!=c?T.clone():T)}if((w|M)==u){var m=(this.w-this.normal.dot(C))/this.normal.dot((new e.Vector3).copy(S).sub(C));var D=C.clone().lerp(S,m);var I=R.clone().lerp(B,m);var k=T.clone().lerp(P,m);p.push(D);g.push(D.clone());y.push(I);x.push(I.clone());A.push(k);b.push(k.clone())}}if(p.length>=3){o.push(new a(p,y,A))}if(g.length>=3){i.push(new a(g,x,b))}break}}};return t}();e.CSGPlan=t;function r(e,t){var r=new n;r.triangles=e;t?r.matrix.copy(t):undefined;return r}e.fromTriangles=r;var n=function(){function t(t,r,n){this.triangles=[];this.modelId=0;this.dynamicMode=null;this.matrix=new e.Matrix4;this.pos=null;this.nor=null;this.uvs=null;e.logger.log("init CSG");if(t){if(t instanceof e.RenderBufferGeometry){this.fromRenderBufferGeometry(t,n)}else if(t instanceof e.BufferGeometry){this.fromBufferGeometry(t)}r?this.matrix.copy(r):undefined;this.applyMatrix(this.matrix)}}t.prototype.renderBufferGeometryToTriangles=function(t,r){for(var n=0,o=r.length;n<o;n+=3){var i=new e.Vector3(t[8*r[n]],t[8*r[n]+1],t[8*r[n]+2]);var s=new e.Vector3(t[8*r[n]+3],t[8*r[n]+4],t[8*r[n]+5]);var l=new e.Vector2(t[8*r[n]+6],t[8*r[n]+7]);var c=new e.Vector3(t[8*r[n+1]],t[8*r[n+1]+1],t[8*r[n+1]+2]);var u=new e.Vector3(t[8*r[n+1]+3],t[8*r[n+1]+4],t[8*r[n+1]+5]);var f=new e.Vector2(t[8*r[n+1]+6],t[8*r[n+1]+7]);var d=new e.Vector3(t[8*r[n+2]],t[8*r[n+2]+1],t[8*r[n+2]+2]);var v=new e.Vector3(t[8*r[n+2]+3],t[8*r[n+2]+4],t[8*r[n+2]+5]);var m=new e.Vector2(t[8*r[n+2]+6],t[8*r[n+2]+7]);this.triangles.push(new a([i,c,d],[s,u,v],[l,f,m]))}};t.prototype.bufferGeometryToTriangles=function(t,r,n,o){for(var i=0,s=o.length;i<s;i+=3){var l=new e.Vector3(t[3*o[i]],t[3*o[i]+1],t[3*o[i]+2]);var c=new e.Vector3(t[3*o[i+1]],t[3*o[i+1]+1],t[3*o[i+1]+2]);var u=new e.Vector3(t[3*o[i+2]],t[3*o[i+2]+1],t[3*o[i+2]+2]);var f=new e.Vector3(r[3*o[i]],r[3*o[i]+1],r[3*o[i]+2]);var d=new e.Vector3(r[3*o[i+1]],r[3*o[i+1]+1],r[3*o[i+1]+2]);var v=new e.Vector3(r[3*o[i+2]],r[3*o[i+2]+1],r[3*o[i+2]+2]);var m=new e.Vector2(n[3*o[i]],n[3*o[i]+1]);var h=new e.Vector2(n[3*o[i+1]],n[3*o[i+1]+1]);var p=new e.Vector2(n[3*o[i+2]],n[3*o[i+2]+1]);this.triangles.push(new a([l,c,u],[f,d,v],[m,h,p]))}};t.prototype.getNeonAttribute=function(){var e=[];this.applyInverseMatrix();this.triangles.map(function(t){t.vertices.map(function(t){e.push(t.x,t.y,t.z)});t.normals.map(function(t){e.push(t.x,t.y,t.z)});t.uvs.map(function(t){e.push(t.x,t.y)})});this.applyMatrix(this.matrix);var t=new Float32Array(e.length);var r=0;e.map(function(e){t[r++]=e});return t};t.prototype.pushAttri=function(t,r,n,o){if(t instanceof e.Vector3&&r instanceof e.Vector3&&n instanceof e.Vector3)o.push(t.x,t.y,t.z,r.x,r.y,r.z,n.x,n.y,n.z);else o.push(t.x,t.y,r.x,r.y,n.x,n.y)};t.prototype.setTHREEAttribute=function(){this.pos=[],this.nor=[],this.uvs=[];var t=this;this.applyInverseMatrix();for(var r=0,n=this.triangles.length;r<n;++r){var o=this.triangles[r];if(o.vertices.length!==o.normals.length&&o.normals.length!==o.uvs.length&&o.vertices.length!=o.uvs.length){e.logger.warn("polygon length not equal");continue}for(var a=0;a<o.vertices.length;++a){if(a>=2){t.pushAttri(o.vertices[0],o.vertices[a-1],o.vertices[a],t.pos);t.pushAttri(o.normals[0],o.normals[a-1],o.normals[a],t.nor);t.pushAttri(o.uvs[0],o.uvs[a-1],o.uvs[a],t.uvs)}}}this.applyMatrix(this.matrix)};t.prototype.getPosition=function(){var e=[];this.triangles.map(function(t){t.vertices.map(function(t){e.push(t.x,t.y,t.z)})});return new Float32Array(this.pos)};t.prototype.getNormal=function(){var e=[];this.triangles.map(function(t){t.normals.map(function(t){e.push(t.x,t.y,t.z)})});return new Float32Array(this.nor)};t.prototype.getUv=function(){var e=[];this.triangles.map(function(t){t.uvs.map(function(t){e.push(t.x,t.y)})});return new Float32Array(this.uvs)};t.prototype.getIndex=function(){var e=new(this.pos.length/3>256?this.triangles.length/3>65536?Uint32Array:Uint16Array:Uint8Array)(this.pos.length/3);for(var t=0;t<e.length;++t){e[t]=t}return e};t.prototype.fromRenderBufferGeometry=function(e,t){this.modelId=t;this.dynamicMode=e.dynamicMode;var r=e.attributes.position.array;var n=e.index.array;this.renderBufferGeometryToTriangles(r,n)};t.prototype.fromBufferGeometry=function(e){var t=e.getAttribute("position").array;var r=e.getAttribute("normal").array;var n=e.getAttribute("uv").array;var o=e.index.array;this.bufferGeometryToTriangles(t,r,n,o)};t.prototype.applyMatrix=function(e){var t=this;t.triangles.map(function(t){t.vertices.map(function(t){t.applyMatrix4(e)})});return this};t.prototype.applyInverseMatrix=function(){var t=(new e.Matrix4).getInverse(this.matrix);this.applyMatrix(t)};t.prototype.clone=function(){var e=new t;e.triangles=this.triangles.map(function(e){return e.clone()});e.modelId=this.modelId;e.matrix.copy(this.matrix);e.dynamicMode=this.dynamicMode;return e};t.prototype.toTriangles=function(){return this.triangles};t.prototype.add=function(e,t){var n=new o(this.clone().toTriangles());var a=new o(e.clone().toTriangles());if(t===true){a.invert();n.build(a.allTriangles())}else{n.build(a.allTriangles())}return r(n.allTriangles(),this.matrix)};t.prototype.union=function(e){var t=new o(this.clone().toTriangles());var n=new o(e.clone().toTriangles());t.clipTo(n);n.clipTo(t);n.invert();n.clipTo(t);n.invert();t.build(n.allTriangles());return r(t.allTriangles(),this.matrix)};t.prototype.subtract=function(e){var t=new o(this.clone().toTriangles());var n=new o(e.clone().toTriangles());t.invert();t.clipTo(n);n.clipTo(t);n.invert();n.clipTo(t);n.invert();t.build(n.allTriangles());t.invert();return r(t.allTriangles(),this.matrix)};t.prototype.intersect=function(e){var t=new o(this.clone().toTriangles());var n=new o(e.clone().toTriangles());t.invert();n.clipTo(t);n.invert();t.clipTo(n);n.clipTo(t);t.build(n.allTriangles());t.invert();return r(t.allTriangles(),this.matrix)};t.prototype.inverse=function(){var e=this.clone();e.triangles.map(function(e){e.flip()});return e};t.prototype.toRenderBufferGeometry=function(){var t=new e.RenderBufferGeometry;var r=this.getNeonAttribute();var n=new e.RenderInterleavedBuffer(r,8,this.modelId);var o=this.getIndex();t.addAttribute("position",new e.RenderInterleavedBufferAttribute(n,3,0,false));t.addAttribute("normal",new e.RenderInterleavedBufferAttribute(n,3,3,false));t.addAttribute("uv",new e.RenderInterleavedBufferAttribute(n,2,6,false));t.setIndex(new e.RenderBufferAttribute(o,1,false,this.modelId));t.dynamicMode=this.dynamicMode;return t};t.prototype.toBufferGeometry=function(){var t=new e.BufferGeometry;this.setTHREEAttribute();var r=this.getPosition();var n=this.getUv();var o=this.getIndex();t.addAttribute("position",new e.BufferAttribute(r,3,false));t.addAttribute("uv",new e.BufferAttribute(n,2,false));t.computeVertexNormals();return t};return t}();e.CSG=n;var o=function(){function t(r){this.triangles=[];this.plan=null;this.front=null;this.back=null;this.clone_NonRecursive=function(){function r(e){var r=new t;r.plan=e.plan&&e.plan.clone();r.triangles=e.triangles.map(function(e){return e.clone()});return r}return function(){var t=this;var n=new e.Queue;var o=new e.Queue;n.push(this);var a=r(this);o.push(a);while(!n.empty()){var i=n.shift();var s=o.shift();if(i!=null&&s!=null){if(i.front){n.push(i.front);var l=r(i.front);s.front=l;o.push(l)}if(i.back){n.push(i.back);var l=r(i.back);s.back=l;o.push(l)}}}return a}}();this.build_NonRecursive=function(){function r(e,t){var r=[],n=[];if(!e.length)return[r,n];if(!t.plan)t.plan=e[0].plan.clone();for(var o=0;o<e.length;++o){t.plan.splitTriangle(e[o],t.triangles,t.triangles,r,n)}return[r,n]}return function(n){var o=new e.Queue;o.push({csg:this,triangles:n});while(!o.empty()){var a=o.shift();if(a!=null){var i=r(a.triangles,a.csg),s=i[0],l=i[1];if(s.length>0){if(!a.csg.front)a.csg.front=new t;o.push({csg:a.csg.front,triangles:s})}if(l.length>0){if(!a.csg.back)a.csg.back=new t;o.push({csg:a.csg.back,triangles:l})}}}}}();this.clipTriangles_NonRecursive=function(){function e(e,t){var r=[];var n=[];t.plan.splitTriangle(e,n,r,n,r);return[n,r]}return function(t){var r=[];var n=[];var o=this;t.map(function(e){n.push({triangle:e,csg:o})});var a=n.pop();while(a){var i=a.csg;var s=a.triangle;while(i){var l=e(s,i),c=l[0],u=l[1];if(c.length>0&&u.length>0){if(i.front&&i.back){n.push({triangle:c[0],csg:i.front});n.push({triangle:u[0],csg:i.back});break}else if(i.front&&!i.back){i=i.front;s=c[0]}else if(!i.front&&i.back){r.push(c[0]);i=i.back;s=u[0]}else if(!i.front&&!i.back){r.push(c[0]);break}}else if(c.length>0){if(i.front){i=i.front;s=c[0]}else{r.push(c[0]);break}}else if(u.length>0){if(i.back){i=i.back;s=u[0]}else{break}}}a=n.pop()}return r}}();if(r){this.build(r)}}t.prototype.invert=function(){this.invert_NonRecursive()};t.prototype.invert_Recursive=function(){this.plan.flip();for(var e=0;e<this.triangles.length;++e){this.triangles[e].flip()}var t=this.back;this.back=this.front;this.front=t;if(this.back)this.back.invert();if(this.front)this.front.invert()};t.prototype.invert_NonRecursive=function(){var t=new e.Queue;t.push(this);while(!t.empty()){var r=t.shift();if(r){for(var n=0;n<r.triangles.length;++n){r.triangles[n].flip()}r.plan.flip();if(r.back)t.push(r.back);if(r.front)t.push(r.front);var o=r.back;r.back=r.front;r.front=o}}};t.prototype.clone=function(){return this.clone_NonRecursive()};t.prototype.clone_Recursive=function(){var e=new t;e.plan=this.plan&&this.plan.clone();e.front=this.front&&this.front.clone();e.back=this.back&&this.back.clone();e.triangles=this.triangles.map(function(e){return e.clone()});return e};t.prototype.allTriangles=function(){return this.allTriagles_NonRecursive()};t.prototype.allTriagles_Recursive=function(){var e=this.triangles.slice();if(this.front)e=e.concat(this.front.allTriagles_Recursive());if(this.back)e=e.concat(this.back.allTriagles_Recursive());return e};t.prototype.allTriagles_NonRecursive=function(){var t=[];var r=new e.Queue;r.push(this);while(!r.empty()){var n=r.shift();if(n!=null){t=t.concat(n.triangles.slice());if(n.front){r.push(n.front)}if(n.back){r.push(n.back)}}}return t};t.prototype.build=function(e){this.build_NonRecursive(e)};t.prototype.build_Recursive=function(e){if(!e.length)return;if(!this.plan)this.plan=e[0].plan.clone();var r=[],n=[];for(var o=0;o<e.length;++o){this.plan.splitTriangle(e[o],this.triangles,this.triangles,r,n)}if(n.length>0){if(!this.back)this.back=new t;this.back.build_Recursive(n)}if(r.length>0){if(!this.front)this.front=new t;this.front.build_Recursive(r)}};t.prototype.clipTriangles=function(e){return this.clipTriangles_NonRecursive(e)};t.prototype.clipTriangles_Recursive=function(e){if(!this.plan)return e.slice();var t=[];var r=[];for(var n=0;n<e.length;++n){this.plan.splitTriangle(e[n],r,t,r,t)}if(this.front&&r.length)r=this.front.clipTriangles_Recursive(r);if(this.back&&t.length)t=this.back.clipTriangles_Recursive(t);else t=[];return r.concat(t)};t.prototype.clipTo=function(e){this.clipTo_NonRecursive(e)};t.prototype.clipTo_Recursive=function(e){this.triangles=e.clipTriangles(this.triangles);if(this.front)this.front.clipTo_Recursive(e);if(this.back)this.back.clipTo_Recursive(e)};t.prototype.clipTo_NonRecursive=function(t){var r=new e.Queue;r.push(this);while(!r.empty()){var n=r.shift();if(n!=null){n.triangles=t.clipTriangles(n.triangles);if(n.front)r.push(n.front);if(n.back)r.push(n.back)}}};return t}();e.CSGNode=o;var a=function(){function e(e,r,n){this.vertices=[];this.plan=new t;this.normals=[];this.uvs=[];if(e&&r&&n){this.vertices=e;this.normals=r;this.uvs=n;this.plan.setFromPoints(e[0],e[1],e[2])}}
e.prototype.clone=function(){var t=this.vertices.map(function(e){return e.clone()});var r=this.normals.map(function(e){return e.clone()});var n=this.uvs.map(function(e){return e.clone()});return new e(t,r,n)};e.prototype.flip=function(){this.plan.flip();this.normals.reverse().map(function(e){e.negate()});this.vertices.reverse();this.uvs.reverse()};return e}();e.CSGTriangle=a})(Neon||(Neon={}));var Neon;(function(e){var t=function(){function t(){this.enable=true;this.isActive=false;this.meshs=[];this.material=null;this.getSplitCSG=function(){var t=new THREE.Box3;var r=new e.Matrix4;function n(t){r=o(t);return new e.CSG(t.geometry,r)}function o(t){var r=new e.Matrix4;r.compose(t.position,(new e.Quaternion).setFromEuler(t.rotation),t.scale);r.multiply(t.matrixWorld);return r}return function(t,r){var a=(new e.CSGPlan).setFromPlan(r);var i=n(t);var s=i.intersect(n(r));var l=[];var c=[];this.setMaterial(t);for(var u=0,f=i.triangles.length;u<f;++u){a.splitTriangle(i.triangles[u],l,c,l,c)}return[e.fromTriangles(l,o(t)).add(s),e.fromTriangles(c,o(t)).add(s,true)]}}();var t=this;document.addEventListener("keydown",function(e){if(e.ctrlKey===true&&e.key=="c")t.active()},false)}t.prototype.active=function(){var t=this;this.isActive=true;var r=e._selector.get();var n=e.coreModel[0].getFragmentSet();if(r.length){e.hideAll();var o=e.modelsControl.getOverlayScene();for(var a=0;a<r.length;++a){var i=n.uuid2fragid.get(r[a]);n.setState(i,1);i.map(function(r){var a=n.getMesh(r);var i=n.getBoundingBox(r);var s=new e.PlaneBufferGeometry(i.max.x-i.min.x+10,i.max.y-i.min.y);var l=new e.Mesh(s,new e.MeshPhongMaterial({color:16776960}));l.position.copy(i.getCenter());var c=t.getFrontMesh(a,l);o.add(c)})}e.coreModel[0].getIterator().reset()}};t.prototype.setMaterial=function(e){this.material=e.material};t.prototype.dispose=function(){};t.prototype.mouseUp=function(){if(this.enable===true&&this.isActive===true){}};t.prototype.mouseMove=function(){if(this.enable===true&&this.isActive===true){}};t.prototype.mouseClick=function(){if(this.enable===true&&this.isActive===true){}};t.prototype.mouseDown=function(){if(this.enable===true&&this.isActive===true){}};t.prototype.keyDown=function(e){console.log(e.ctrlKey,e.key);if(e.ctrlKey===true&&e.key=="c")this.active()};t.prototype.setMeshs=function(e){this.meshs=this.meshs.concat(e)};t.prototype.pushMesh=function(e){this.meshs.push(e)};t.prototype.clearMesh=function(){this.meshs=[]};t.prototype.evenlySplitMesh=function(e,t){};t.prototype.splitBySurface=function(e){this.meshs};t.prototype.getFrontGeometry=function(e,t){var r=this.getSplitCSG(e,t)[0];return r.toBufferGeometry()};t.prototype.getBackGeometry=function(e,t){var r=this.getSplitCSG(e,t)[1];return r.toBufferGeometry()};t.prototype.getBothGeometry=function(e,t){var r=this.getSplitCSG(e,t),n=r[0],o=r[1];return[n.toBufferGeometry(),o.toBufferGeometry()]};t.prototype.getFrontMesh=function(t,r){var n=this.getFrontGeometry(t,r);var o=new e.Mesh(n,this.material);if(t instanceof e.Mesh){o.position.copy(t.position);o.rotation.copy(t.rotation);o.scale.copy(t.scale)}else{var a=new e.Quaternion;t.matrix.decompose(o.position,a,o.scale);o.rotation.setFromQuaternion(a)}return new e.Mesh(n,this.material)};return t}();e.Spliter=t})(Neon||(Neon={}));var Neon;(function(e){e.testCSG=function(){var t=new THREE.BoxBufferGeometry(2e3,2e3,2e3,1,1,1);var r=new THREE.SphereBufferGeometry(1350,100,100);var n=new THREE.PlaneBufferGeometry(4001,4001);var o=new THREE.Mesh(t,new THREE.MeshPhongMaterial({color:255,wireframe:false}));o.position.set(0,5e3,0);var a=new THREE.Mesh(r,new THREE.MeshPhongMaterial({color:65280,wireframe:false}));a.position.set(0,5e3,0);var i=new THREE.Mesh(n,new THREE.MeshPhongMaterial({color:16776960,side:THREE.DoubleSide}));i.position.set(0,5e3,0);var s=function(){var n=new e.CSG(t);var i=new e.CSG(r);var s=n.union(i);var l=s.toBufferGeometry();l.computeVertexNormals();var c=new THREE.Mesh(l,new THREE.MeshPhongMaterial({color:255,wireframe:false}));c.position.set(0,-2e3,0);var u=e.modelsControl.getOverlayScene();u.add(c);u.add(o);u.add(a)};var l=function(){var n=new e.CSG(t);var i=new e.CSG(r);var s=n.subtract(i);var l=s.toBufferGeometry();l.computeVertexNormals();var c=new THREE.Mesh(l,new THREE.MeshPhongMaterial({color:16776960,wireframe:false,side:THREE.FrontSide}));var u=new THREE.Mesh(l,new THREE.MeshPhongMaterial({color:16776960,wireframe:true}));c.position.set(0,-2e3,3e3);u.position.set(0,-2e3,3e3);var f=e.modelsControl.getOverlayScene();f.add(c);f.add(u);f.add(o);f.add(a)};var c=function(){var n=new e.CSG(t);var s=new e.CSG(r);var l=n.intersect(s);var c=l.toBufferGeometry();c.computeVertexNormals();var u=new THREE.Mesh(c,new THREE.MeshPhongMaterial({color:65280,wireframe:false,side:THREE.FrontSide}));u.position.set(0,-2e3,-3e3);var f=e.modelsControl.getOverlayScene();f.add(u);f.add(o);f.add(a);f.add(i)};return{union:s,subtract:l,intersect:c}}()})(Neon||(Neon={}));var Neon;(function(e){e.callBackMap=function(){var t=new Map;var r=function(r,n){if(t.has(r)){e.logger.warn("name "+r+" has one callBack",n)}t.set(r,n)};var n=function(){var r=[];for(var n=0;n<arguments.length;n++){r[n]=arguments[n]}for(var o=0,a=arguments.length;o<a;++o){var i=t.get(arguments[o].name);e.logger.log("args",arguments[o]);if(i!=undefined){var s=[].slice.call(i.arguments);s.push(arguments[o].args);i.fn.apply(i.target,s);e.logger.log("args: ",s,i,arguments[o].args)}else{e.logger.warn("have no callBack named "+arguments[o].name+"\n you can set callBack by setCallBack(name: string).")}}};var o=function(e){return t.get(e)};return{setCallBack:r,runCallBack:n,getCallBack:o}}();e.inCallBack=function(){var t=new Map;var r=function(e,r){t.set(e,r)};var n=function(){t.clear()};var o=function(r){if(r===undefined)t.forEach(function(t,r){t.fn.apply(t.target,t.arguments);e.logger.log("name",r)});else{var n=t.get(r);if(n)n.fn.apply(n.target,n.arguments);else e.logger.warn("Name error! Have no callback named "+r)}};var a=function(e){t.delete(e)};return{add:r,clear:n,run:o,deleteCb:a}}()})(Neon||(Neon={}));var Neon;(function(e){function t(t){var r=e.modelsControl.getScene();var n=e.modelsControl.getOverlayScene();var o=e.controlManager.controls.getControl("DragControl").getObjects();var a=new Map;a.set("scene",r);a.set("overlayScene",n);o.forEach(function(r,n){var o=r.object;e.logger.debug("renderSceneModels",r.sceneName);if(t==true){a.get(r.sceneName).add(o)}else if(t==false){a.get(r.sceneName).remove(o)}});e.coreModel[0].getIterator().reset()}e.renderSceneModels=t;e.taskApis=function(){var t=false;var r=new e.Box3;var n=null;var o=new Set;var a=false;var i=new Map;var s=[];var l=new Map;var c=null;var u=new THREE.Box3;function f(t){var r=n.get(t);var o=null;var a=null;var s=e.gloableParames.modelManager;var l=[];if(r!=undefined){for(var c=0,f=r.length;c<f;++c){i.set(r[c].uuid,r[c].info);a=e.coreModel[0];o=a?a.getFragmentSet():undefined;if(!o)continue;l=o.uuid2fragid.get(r[c].uuid);if(l)l.map(function(e){u.union(o.getBoundingBox(e))})}}u.expandByScalar(10)}function d(){e.gloableParames.modelManager.enumModel(function(t){var n=t.getFragmentSet();var o=t.getHighIterator();o.clear();for(var a=0,s=n.getCount();a<s;++a){var l=n.getAttribute(a);var c=n.getUUID(a);if(i.has(c)){o.push(a);n.setState(a,2)}else if(e.insectBox(r,n.getBoundingBoxFromUuid(c))){o.push(a,e.HMATERIAL.OPICATY)}else{n.setState(a,1)}}})}var v=function(t){c=t;var r=e.modelsControl.getControl();if(e.isNumber(t)){i.clear();u.copy(new e.Box3);f(t)}else if(e.isArray(t)){i.clear();u.copy(new e.Box3);for(var n=0,o=t.length;n<o;++n){f(t[n])}}d();r.target.copy(u.getCenter());r.update()};var m=function(){a=false;e.coreModel[0].getHighIterator().clear();e.coreModel[0].getIterator().reset()};var h=function(){return e._selector.get()};var p=function(){return e._selector.clear()};var g=function(){m();e.hideAll();e.logger.debug("reset state")};var y=function(t){var r=e.coreModel[0];var n=r.getHighIterator();var o=r.getFragmentSet();n.clear();var a=o.uuid2fragid.get(t);for(var i=0;i<a.length;++i)n.push(a[i]);o.setState(a,2)};var x=function(e){i.clear();f(e);i.forEach(function(e,t){y(t)})};function A(t,r,n){var o=n.getHighIterator();if(t==1){for(var a=0,i=r.length;a<i;++a){o.push(r[a],e.HMATERIAL.GREEN)}}else if(t==2){for(var a=0,i=r.length;a<i;++a){o.push(r[a],e.HMATERIAL.RED)}}}var b=function(t){var r=e.gloableParames.modelManager;i.clear();f(t);i.forEach(function(t,r){var n=e.coreModel[0];if(!n)return;var o=n.getFragmentSet();var a=o.uuid2fragid.get(r);o.setState(a,2);A(t.isFinished,a,n)});e.enableModel=true;a=true};var E=function(t){if(!n){n=t}e.logger.debug("init uuidMap",n)};var w=function(){n=null};var M=function(t,r){e.callBackMap.setCallBack(t,r)};var C=function(){e.logger.debug("添加构建");m();e._selector.clear()};var S=function(){e.logger.debug("添加完成");if(c!=null){v(c)}return e._selector.get()};var R=function(t){var r=e.gloableParames.modelManager;r.enumModel(function(e){e.getHighIterator().reverse()});i.clear();f(t);for(var n=0,o=s.length;n<o;++n){if(s[n].isSelected&&s[n].uuid&&s[n].isSelected==true){var a=s[n].uuid;var l=e.coreModel[0];if(!l)continue;var c=l.getFragmentSet();var u=c.uuid2fragid.get(a);A(i.get(a).isFinished,u,l)}}e.enableModel=true};var B=function(){if(a&&e.coreModel[0].getHighIterator().length()>0){e.callBackMap.runCallBack({name:"finish",args:s})}};var T=function(t){return e.callBackMap.getCallBack(t)};var P=function(){var e=new Set;return function(t,r){if(r){s.length=0;e.clear();l.clear()}for(var n=0;n<t.length;++n){if(t[n].uuid&&!e.has(t[n].uuid)){s.push(t[n]);e.add(t[n].uuid);l.set(t[n].uuid,t[n])}}}}();var D=function(t){var r=e.coreModel[0];if(!r)return;var n=r.getFragmentSet();var o=n.uuid2fragid.get(t);n.setState(o,1);e.enableModel=true};var I=function(t){if(e.isNumber(t)){i.clear();f(t)}else if(e.isArray(t)){i.clear();for(var r=0,n=t.length;r<n;++r){f(t[r])}}i.forEach(function(e,t){D(t)})};function k(t){var r=n.get(t);var o=[];e.gloableParames.modelManager.enumModel(function(e){e.getHighIterator().reverse()});if(r){r.map(function(e){var t={};t.isSekected=false;t.uuid=e.uuid;o.push(t)})}P(o,true);e.callBackMap.runCallBack({name:"finish",args:s});b(t);e.enableModel=true}function N(e){t=e}function U(){return t}return{renderTask:v,unSelect:m,renderUuid:y,hiddenUuid:D,hiddenTask:I,renderUuidsFromTask:x,getSelectedUUIDs:h,clearSelectedUUIDS:p,resetState:g,renderFinishedMode:b,init:E,dispose:w,setCallBack:M,addFragment:C,addOver:S,getCallBack:T,runCallBack:B,setHighLight:R,setPropers:P,getTaskPros:k,isEnable:U,enableTask:N,taskUuids:o}}()})(Neon||(Neon={}));var Neon;(function(e){e.attriApi=function(){return{}}()})(Neon||(Neon={}));var Neon;(function(e){e.tpTestApi=function(){var t=null;var r="";var n=false;var o=false;var a=this;var i="桩";var s=function(r){if(n){e.gloableParames.modelManager.enumModel(function(n){var o=n.getFragmentSet();var a=o.getAttributeUUID(r);if(a&&a.cNames===i){for(var s=0,l=o.uuids.length;s<l;++s){var c=o.uuids[s];var u=o.getAttributeUUID(c);if(u.pileCate==a.pileCate&&a.pileSize==u.pileSize){o.setState(o.uuid2fragid.get(c),2)}else{o.setState(o.uuid2fragid.get(c),1)}}e.coreModel[0].getIterator().reset();t=r}})}};var l=function(){var r=e.coreModel[0].getFragmentSet();var n=e.coreModel[0].capToPipleMap;var o=0;if(t!=null){var a=r.getAttributeUUID(t);n.forEach(function(e,t){e.map(function(e){var t=r.getAttributeUUID(e);if(t.pileCate==a.pileCate&&t.pileSize==a.pileSize){o++}})})}return o};var c={"低应变法":function(){var r=e._selector.get();var n=e.coreModel[0].capToPipleMap;var o=e.coreModel[0].getFragmentSet();var a=new Map;var i=0;var s="低应变法";var l=o.getAttributeUUID(t);n.forEach(function(e,t){a.set(t,false)});n.forEach(function(t,n){var s=false;var c=true;t.map(function(t){var n=o.getAttributeUUID(t);if(n.pileCate==l.pileCate&&n.pileSize==l.pileSize){if(e.isInArray(r,t)){s=true}c=false;i++}});if(s||!s&&c)a.set(n,true);else a.set(n,false)});var c={f:true,info:""};a.forEach(function(e,t){if(!e){c={f:false,info:s+"不满足“每一根承台都至少有一根满足要求的桩需要检测”条件。"}}});if(!c.f){return c}if(i<20){if(r.length===i)return{f:true,info:s+"同类型构件小于20根， 检测数量已经满足要求。"};else return{f:false,info:s+"总数少于20根，需将所有的桩都加入检测"}}else{var u=Math.floor(i*.3)>20?Math.floor(i*.3):20;if(r.length<u){return{f:false,info:s+"不满足“不少于总是30%且不少于20根”条件。"}}else{return{f:true,info:s+"检测数量满足要求。"}}}},"声波投射法":function(){var t=l();var r="声波投射法";var n=e._selector.get();if(n.length>=Math.floor(t*.1))return{f:true,info:r+"检测数量满足要求"};else return{f:false,info:r+"不满足检测数量不少于总体数量10%的要求"}},"钻芯法":function(){var t=l();var r="钻芯法";var n=e._selector.get();if(n.length>=Math.floor(t*.1))return{f:true,info:r+"检测数量满足要求"};else return{f:false,info:r+"不满足检测数量不少于总体数量10%的要求"}}};var u=function(r){e.logger.log(r);if(n&&t!=null){return c[r]()}};var f=function(){if(n){var t=e._selector.get();var r=[];var o=e.coreModel[0].getFragmentSet();t.map(function(e){var t=o.getAttributeUUID(e);if(t){r.push({uuid:e,pipleNo:t.no})}else{r.push({uuid:e,pipleNo:undefined})}});return r}};var d=function(t,n){e.callBackMap.setCallBack(t,n);r=t};var v=function(){e.logger.log("runCallBack");var t=e.coreModel[0].getFragmentSet();if(n&&o){if(e.coreModel[0].getHighIterator().length()>0){var a=e._selector.get()[0];var s=a?t.getAttributeUUID(a):undefined;if(s&&s.cNames===i)e.callBackMap.runCallBack({name:r,args:[]})}}};function m(t){var r=e.coreModel[0].getFragmentSet();var n=e.coreModel[0].capToPipleMap;if(n===undefined){h();n=e.coreModel[0].capToPipleMap}var o=e.coreModel[0].getHighIterator();o.clear();e.hideAll();if(t==="基柱"){i="桩";if(n)n.forEach(function(t,n){t.map(function(e){var t=r.getAttributeUUID(e);if(t===undefined)return;r.setState(r.uuid2fragid.get(e),2)});var a=r.uuid2fragid.get(n);a.map(function(t){o.push(t,e.HMATERIAL.OPICATY)})});else{var a=e.coreModel[0].getFragmentSet();for(var s=0;s<a.uuids.length;++s){var l=a.getAttributeUUID(a.uuids[s]);if(l&&l.cNames===i){a.setState(a.uuid2fragid.get(a.uuids[s]),2)}else if(l&&l.cNames==="基础承台"){var c=a.uuid2fragid.get(a.uuids[s]);c.map(function(t){o.push(t,e.HMATERIAL.OPICATY)})}else{a.setState(a.uuid2fragid.get(a.uuids[s]),1)}}}}e.coreModel[0].getIterator().reset();e.enableModel=true}var h=function(){e.callBackMap.runCallBack({name:"initPile",args:[]})};var p=function(r,o){n=r;if(r===true){if(!e.ISLOADOVER){e.inCallBack.add("tpTestApi",{fn:function(){m(o);setTimeout(function(){e.enableAxis(true)},1)},target:a,arguments:[]})}else{m(o);e.enableAxis(true)}}else if(r===false){e.inCallBack.deleteCb("tpTestApi");t=null}};var g=function(e){o=e};var y=function(){return e._selector.get()};var x=function(t){var r=e.coreModel[0].getFragmentSet();var n=r.getAttributeUUID(t);if(n)return{uuid:t,size:n.pileSize,type:n.pileCate,no:n.no,location:n.pileLocation,level:n.pileBlockLevel,depth:n.pileDepth,specification:n.specification};else return undefined};return{renderSamePiles:s,runCallBack:v,getSelctPiplesInfo:f,setCallBack:d,isFitRule:u,setEnable:p,enableCallBack:g,getPileUUid:y,getPileAttributes:x,computePilesNo:h}}()})(Neon||(Neon={}));var Neon;(function(e){e.tpTest=function(){var t=e.coreModel[0].getFragmentSet();e.tpTestApi.setEnable(true,"基柱");e.tpTestApi.renderSamePiles("9f6f30fb-09c6-4230-b699-c97a4c303689");console.log(e.tpTestApi.isFitRule("低应变法"));console.log(".....................................")}})(Neon||(Neon={}));var Neon;(function(e){var t=function(t){__extends(r,t);function r(r,n){var o=t.call(this,n)||this;var a=o;var i=null;var s={"是否全装修":false,"主体结构分值":"","计算主体结构分值":function(){var t=a.calcScore(e.assemblyRateStrategis.majorStructure.nonVertical.getScale(),20,30,.35,.8)+a.calcScore(e.assemblyRateStrategis.majorStructure.vertical.getScale(true),10,20,.7,.8);if(i)s["主体结构分值"]=String(t.toFixed(1))},"围护墙和内隔墙分值":"","计算围护墙和内隔墙分值":function(){var t=a.calcScore_min(e.assemblyRateStrategis.wall.retainingWall.preRate(),.8,5)+a.calcScore(e.assemblyRateStrategis.wall.retainingWall.integration(true),2,5,.5,.8)+a.calcScore_min(e.assemblyRateStrategis.wall.brickWall.preRate(),.5,5)+a.calcScore(e.assemblyRateStrategis.wall.brickWall.integration(true),2,5,.5,.8);if(i)s["围护墙和内隔墙分值"]=String(t.toFixed(1))},"装修和设备管线分值":"","计算装修和设备管线分值":function(){var t=0;if(s["是否全装修"]===true)t+=6;t+=a.calcScore_min(e.assemblyRateStrategis.fitUp.board.getScale(),.7,6)+a.calcScore(e.assemblyRateStrategis.fitUp.kitchen.getScale(),3,6,.7,.9)+a.calcScore(e.assemblyRateStrategis.fitUp.bathroom.getScale(),3,6,.7,.9);if(i)s["装修和设备管线分值"]=String(t.toFixed(1))},"总体装配率分值":"","总体装配率":"","计算总体装配率":function(){s["计算主体结构分值"]();s["计算围护墙和内隔墙分值"]();s["计算装修和设备管线分值"]();s["总体装配率分值"]=String(parseFloat(s["主体结构分值"])+parseFloat(s["围护墙和内隔墙分值"])+parseFloat(s["装修和设备管线分值"]))}};o.getHotKey=function(){return{needLongPress:false,hotkey:"ctr+x"}};o.getName=function(){return"assemblyRateAction"};o.regist=function(){var t=e.renderParamers.container;i=new dat.GUI({autoPlace:false,width:400});t.appendChild(i.domElement);i.add(s,"是否全装修").fire;i.add(s,"主体结构分值").listen();i.add(s,"计算主体结构分值");i.add(s,"围护墙和内隔墙分值").listen();i.add(s,"计算围护墙和内隔墙分值");i.add(s,"装修和设备管线分值").listen();i.add(s,"计算装修和设备管线分值");i.add(s,"总体装配率分值").listen();i.add(s,"总体装配率").listen();i.add(s,"计算总体装配率");i.domElement.style.top="35px";i.domElement.style.left="10%";i.domElement.style.zIndex="3";i.domElement.style.position="absolute";t.appendChild(i.domElement)};o.unRegist=function(){if(i)e.renderParamers.container.removeChild(i.domElement);i=null};return o}r.prototype.calcScore=function(e,t,r,n,o){if(e<n)return 0;if(e>o)return r;var a=Math.abs((r-t)/(o-n));return(e-n)*a+t};r.prototype.calcScore_min=function(e,t,r){if(e>=t)return r;else return 0};return r}(e.BaseControl);e.AssemblyRateAction=t})(Neon||(Neon={}));var Neon;(function(e){e.selectorService=function(){var t=e.getSelector();var r=function(){return t.get()};var n=function(){};return{get:r,clear:n}}()})(Neon||(Neon={}));var Neon;(function(e){e.highLightService=function(){var t=function(){return e._selector.get()};var r=function(){};return{getHighlightUuids:t,clearHighLight:r}}()})(Neon||(Neon={}));var Neon;(function(e){e.levelService=function(){var t="c";var r=function(r){if(r===true){e.cutLevel(t)}else{e.enableBLevel=false;e.enableCLevel=false;e.coreModel[0].getIterator().reset()}};var n=function(r){e.cutLevel(r);t=r};return{enableLevel:r,levelSwitcher:n}}()})(Neon||(Neon={}));var Neon;(function(e){e.axisNetService=function(){var t=function(t){e.enableAxis(t)};return{enableAxisNet:t}}()})(Neon||(Neon={}));var Neon;(function(e){e.controlService=function(){var t=function(){e.hideAll()};var r=function(){e.showAll()};var n=function(t){var r=e.coreModel[0].getFragmentSet();var n=r.uuid2fragid.get(t);r.setState(n,2);e.coreModel[0].getIterator().reset()};var o=function(t){var r=e.coreModel[0].getFragmentSet();var n=r.uuid2fragid.get(t);r.setState(n,1);e.coreModel[0].getIterator().reset()};return{hidenAll:t,shownAll:r,shownByUuid:n,hidenByUuid:o}}()})(Neon||(Neon={}));var Neon;(function(e){e.amplifierService=function(){}()})(Neon||(Neon={}));var Neon;(function(e){e.clickService=function(){}()})(Neon||(Neon={}));var Neon;(function(e){e.focusService=function(){}()})(Neon||(Neon={}));var Neon;(function(e){e.hiddenService=function(){}()})(Neon||(Neon={}));var Neon;(function(e){e.shrinkService=function(){}()})(Neon||(Neon={}));var Neon;(function(e){e.wanderService=function(){}()})(Neon||(Neon={}));var Neon;(function(e){e.ControlApi=function(){var t=function(t){var r=e.modelsControl.getControl();var n=e.modelsControl.getMainCamera();if(r&&n){r.target.copy(t.target);n.zoom=t.zoom;r.update(t.spherical.phi,t.spherical.theta);n.updateMatrix();n.updateMatrixWorld();n.updateProjectionMatrix();e.gloableParames.modelManager.reset()}};var r=function(){var t=e.modelsControl.getControl();var r=e.modelsControl.getMainCamera();if(t){return{target:(new THREE.Vector3).copy(t.target),spherical:(new THREE.Spherical).copy(t.getSpherical()),zoom:r.zoom}}else{e.logger.error("获取视点失败")}};return{setViewPoint:t,getViewPoint:r}}()})(Neon||(Neon={}));